<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum - Varp</title>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script type="module" src="https://public.sellhub.cx/embeds.js"></script>
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Geologica:wght@100..900&family=Libertinus+Math&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #4a90e2;
            --primary-gradient: linear-gradient(135deg, #4a90e2, #6bb6ff);
            --secondary-color: #6bb6ff;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --dark-bg: #090A0B;
            --card-bg: rgba(255, 255, 255, 0.02);
            --border-color: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #b3d9ff;
            --text-muted: #999999;
        }

        body {
            font-family: 'Geologica', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header & Navigation */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(9, 10, 11, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 2rem;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            background: rgba(9, 10, 11, 0.95);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
        }

        .logo img {
            width: 32px;
            height: 32px;
            border-radius: 6px;
        }

        .menu {
            padding: 0.5rem;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
        }

        .link {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 70px;
            height: 50px;
            border-radius: 8px;
            position: relative;
            z-index: 1;
            overflow: hidden;
            transform-origin: center left;
            transition: width 0.2s ease-in;
            text-decoration: none;
            color: #94a3b8;
        }

        .link:before {
            position: absolute;
            z-index: -1;
            content: "";
            display: block;
            border-radius: 8px;
            width: 100%;
            height: 100%;
            top: 0;
            transform: translateX(100%);
            transition: transform 0.2s ease-in;
            transform-origin: center right;
            background-color: rgba(74, 144, 226, 0.1);
        }

        .link:hover,
        .link:focus {
            outline: 0;
            width: 130px;
            color: #ffffff;
        }

        .link:hover:before,
        .link:focus:before,
        .link:hover .link-title,
        .link:focus .link-title {
            transform: translateX(0);
            opacity: 1;
        }

        .link-icon {
            width: 20px;
            height: 20px;
            display: block;
            flex-shrink: 0;
            left: 18px;
            position: absolute;
        }

        .link-icon svg {
            width: 20px;
            height: 20px;
        }

        .link-title {
            transform: translateX(100%);
            transition: transform 0.2s ease-in;
            transform-origin: center right;
            display: block;
            text-align: center;
            text-indent: 28px;
            width: 100%;
            color: #94a3b8;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-left: auto;
            margin-right: -7rem;
        }

        .search-container {
            position: relative;
            margin-right: 1rem;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #64748b;
        }

        .search-input {
            background: rgba(22, 23, 24, 0.4);
            border: 1px solid rgba(22, 23, 24, 0.4);
            border-radius: 6px;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 250px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #60a5fa;
            background: rgba(22, 23, 24, 0.705);
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
        }

        .search-input::placeholder {
            color: #64748b;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: #60a5fa;
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(96, 165, 250, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: #60a5fa;
            border: 2px solid #60a5fa;
        }

        .btn-outline:hover {
            background: #60a5fa;
            color: white;
        }

        .user-panel {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }

        .user-panel.hidden {
            display: none;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.8rem;
            color: white;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(22, 23, 24, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.5rem;
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s ease;
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Forum Styles */
        .forum-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .forum-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .forum-title {
            font-size: 3rem;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .forum-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .forum-categories {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .forum-category {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .forum-category:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .category-icon {
            width: 48px;
            height: 48px;
            background: var(--primary-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .category-info h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .category-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .forum-topics {
            display: grid;
            gap: 1rem;
        }

        .forum-topic {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .forum-topic:hover {
            border-color: var(--primary-color);
            background: rgba(255, 255, 255, 0.05);
        }

        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .topic-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .topic-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .topic-author {
            color: var(--primary-color);
            font-weight: 500;
        }

        .topic-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .topic-excerpt {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .new-topic-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }

        .new-topic-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
        }

        .new-topic-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Footer */
        .footer {
            background: rgba(9, 10, 11, 0.95);
            border-top: 1px solid var(--border-color);
            margin-top: 4rem;
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--primary-gradient);
            animation: glow-footer-line 3s ease-in-out infinite;
        }

        @keyframes glow-footer-line {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .footer-section h3 {
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li a {
            color: var(--text-secondary);
            text-decoration: none;
            display: block;
            padding: 0.5rem 0;
            transition: color 0.3s ease;
        }

        .footer-links li a:hover {
            color: var(--primary-color);
        }

        .newsletter-form {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .newsletter-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .newsletter-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .newsletter-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .newsletter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 165, 250, 0.3);
        }

        .footer-bottom {
            border-top: 1px solid var(--border-color);
            padding: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .footer-country {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .footer-country label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .country-selector {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .payment-methods {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .payment-icon {
            height: 24px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .payment-icon:hover {
            opacity: 1;
        }

        .footer-copyright {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .menu {
                position: static;
                transform: none;
            }

            .search-input {
                width: 200px;
            }

            .forum-container {
                padding: 0 1rem;
            }

            .forum-title {
                font-size: 2rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

                     .footer-bottom {
             flex-direction: column;
             text-align: center;
         }
     }

           /* Status Modal Styles - Full Page Look */
      .status-modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: var(--dark-bg);
          z-index: 10000;
          opacity: 0;
          visibility: hidden;
          transform: translateX(100%);
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          overflow-y: auto;
          
          /* Custom Scrollbar */
          scrollbar-width: thin;
          scrollbar-color: var(--primary-color) rgba(255, 255, 255, 0.1);
      }
      
      .status-modal::-webkit-scrollbar {
          width: 8px;
      }
      
      .status-modal::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 4px;
      }
      
      .status-modal::-webkit-scrollbar-thumb {
          background: var(--primary-gradient);
          border-radius: 4px;
          transition: all 0.3s ease;
      }
      
      .status-modal::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(135deg, #6bb6ff, #89c4ff);
      }

     .status-modal.active {
         opacity: 1;
         visibility: visible;
         transform: translateX(0);
     }

     .status-modal-content {
         background: var(--dark-bg);
         width: 100%;
         min-height: 100vh;
         padding: 0;
         position: relative;
         transform: none;
         transition: none;
         border: none;
         border-radius: 0;
     }

     .status-modal.active .status-modal-content {
         transform: none;
     }

           .status-modal-header {
          background: rgba(9, 10, 11, 0.95);
          backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-color);
          padding: 1rem 2rem;
          position: sticky;
          top: 0;
          z-index: 1001;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

             .status-modal-header h2 {
           font-size: 1.4rem;
           font-weight: 700;
           background: var(--primary-gradient);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
       }

      .status-modal-close {
          background: none;
          border: none;
          color: var(--text-muted);
          font-size: 1.5rem;
          cursor: pointer;
          transition: color 0.3s ease;
          padding: 0.5rem;
          border-radius: 6px;
      }

      .status-modal-close:hover {
          color: var(--primary-color);
          background: rgba(255, 255, 255, 0.05);
      }

      /* Community Updates Styles */
      .community-updates-container {
          display: flex;
          flex-direction: column;
          gap: 2rem;
      }

      .community-update-card {
          background: rgba(255, 255, 255, 0.02);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1.5rem;
          transition: all 0.3s ease;
      }

      .community-update-card:hover {
          background: rgba(255, 255, 255, 0.04);
          border-color: rgba(74, 144, 226, 0.3);
          transform: translateY(-2px);
      }

      .update-header {
          margin-bottom: 1rem;
      }

      .update-title {
          font-size: 1.3rem;
          font-weight: 600;
          color: var(--text-primary);
          margin-bottom: 0.5rem;
          background: var(--primary-gradient);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
      }

      .update-meta {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.9rem;
          color: var(--text-muted);
      }

      .update-author {
          color: var(--text-secondary);
          font-weight: 500;
      }

      .update-date {
          color: var(--text-muted);
      }

      .update-content {
          color: var(--text-primary);
          line-height: 1.6;
      }

      .update-description {
          margin-bottom: 1rem;
          font-size: 1rem;
      }

      .update-image {
          display: flex;
          justify-content: center;
          margin: 1rem 0;
      }

      .update-image img {
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
          transition: transform 0.3s ease;
      }

      .update-image img:hover {
          transform: scale(1.02);
      }

           /* Status Filter Bar */
      .status-filter-bar {
          display: flex;
          gap: 0.4rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
      }

      .status-filter-btn {
          padding: 0.4rem 0.8rem;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 6px;
          color: var(--text-primary);
          cursor: pointer;
          transition: all 0.3s ease;
          font-weight: 500;
          font-size: 0.85rem;
      }

     .status-filter-btn.active {
         background: var(--primary-color);
         border-color: var(--primary-color);
     }

     .status-filter-btn:hover {
         background: rgba(74, 144, 226, 0.1);
         border-color: var(--primary-color);
     }

           /* Status Legend */
      .status-legend {
          display: flex;
          gap: 0.8rem;
          margin-bottom: 1.5rem;
          justify-content: flex-end;
          flex-wrap: wrap;
      }

      .legend-item {
          display: flex;
          align-items: center;
          gap: 0.4rem;
          font-size: 0.8rem;
      }

           .status-dot {
          width: 6px;
          height: 6px;
          border-radius: 50%;
      }

     .status-dot.undetected {
         background: var(--success-color);
     }

     .status-dot.risk {
         background: var(--warning-color);
     }

     .status-dot.testing {
         background: #fbbf24;
     }

     .status-dot.updating {
         background: var(--primary-color);
     }

     .status-dot.offline {
         background: var(--error-color);
     }

           /* Status Products Container */
      .status-products-container {
          background: rgba(255, 255, 255, 0.02);
          border-radius: 12px;
          padding: 1.5rem;
          border: 1px solid rgba(255, 255, 255, 0.1);
      }

     .status-game-category {
         margin-bottom: 2rem;
     }

     .status-game-category:last-child {
         margin-bottom: 0;
     }

           .status-game-title {
          font-size: 1.2rem;
          font-weight: 700;
          color: var(--primary-color);
          margin-bottom: 0.8rem;
          text-transform: uppercase;
      }

                       .status-product-row {
                display: flex;
                align-items: center;
                padding: 0.8rem;
                background: rgba(255, 255, 255, 0.02);
                border-radius: 8px;
                margin-bottom: 0.4rem;
                border: 1px solid rgba(255, 255, 255, 0.05);
                gap: 1rem;
            }

                       .status-product-name {
                font-weight: 600;
                color: var(--text-primary);
                min-width: 140px;
                font-size: 0.9rem;
                flex-shrink: 0;
            }

            .status-pricing-options {
                display: flex;
                gap: 0.4rem;
                min-width: 200px;
                flex-shrink: 0;
            }

      .status-price-btn {
          padding: 0.3rem 0.6rem;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 4px;
          color: var(--text-primary);
          font-size: 0.75rem;
          font-weight: 500;
      }

                       .status-supported-platforms {
                color: var(--text-primary);
                font-size: 0.8rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                flex-shrink: 0;
            }

            .supported-label {
                color: var(--text-primary);
                font-weight: 600;
                font-size: 0.75rem;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .supported-os {
                color: var(--primary-color);
                font-weight: 600;
                font-size: 0.8rem;
            }

                  .status-indicator {
                display: flex;
                align-items: center;
                gap: 0.4rem;
                font-size: 0.8rem;
                flex-shrink: 0;
            }

     .status-indicator.undetected {
         color: var(--success-color);
     }

     .status-indicator.updating {
         color: var(--primary-color);
     }

                       .status-purchase-btn {
                background: var(--primary-color);
                color: white;
                border: none;
                padding: 0.5rem 1rem;
                border-radius: 6px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 0.85rem;
                flex-shrink: 0;
                margin-left: auto;
            }

            .status-details-right {
                display: flex;
                align-items: center;
                gap: 2rem;
                margin-left: 1rem;
                flex-shrink: 0;
            }

     .status-purchase-btn:hover {
         background: var(--secondary-color);
         transform: translateY(-2px);
         box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
     }

     /* Responsive Design for Modal */
     @media (max-width: 768px) {
         .status-modal-content {
             width: 98%;
             padding: 1rem;
         }

         .status-product-row {
             flex-direction: column;
             align-items: flex-start;
             gap: 1rem;
         }

         .status-pricing-options {
             margin-left: 0;
         }

         .status-supported-platforms {
             margin-left: 0;
         }

         .status-indicator {
             margin-left: 0;
         }

         .status-purchase-btn {
             margin-left: 0;
             width: 100%;
         }

         .status-filter-bar {
             justify-content: center;
         }

                   .status-legend {
              justify-content: center;
          }
      }

      /* Admin Controls Styles */
      .admin-controls {
          display: flex;
          gap: 0.5rem;
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid var(--border-color);
      }

      .admin-btn {
          background: none;
          border: none;
          color: var(--text-muted);
          cursor: pointer;
          padding: 0.5rem;
          border-radius: 6px;
          transition: all 0.3s ease;
          font-size: 0.9rem;
      }

      .admin-btn:hover {
          background: rgba(255, 255, 255, 0.05);
      }

      .delete-btn:hover {
          color: var(--error-color);
          background: rgba(239, 68, 68, 0.1);
      }

      .edit-btn:hover {
          color: var(--primary-color);
          background: rgba(74, 144, 226, 0.1);
      }

      .topic-screenshot {
          margin-top: 1rem;
          padding-top: 1rem;
          border-top: 1px solid var(--border-color);
      }

      .topic-screenshot img {
          max-width: 100%;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      /* Edit Modal Styles */
      .edit-modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          z-index: 20000;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0;
          visibility: hidden;
          transition: all 0.3s ease;
      }

      .edit-modal.active {
          opacity: 1;
          visibility: visible;
      }

      .edit-modal-content {
          background: var(--dark-bg);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 0;
          max-width: 600px;
          width: 90%;
          max-height: 90vh;
          overflow-y: auto;
          transform: scale(0.9);
          transition: transform 0.3s ease;
      }

      .edit-modal.active .edit-modal-content {
          transform: scale(1);
      }

      .edit-modal-header {
          background: rgba(9, 10, 11, 0.95);
          backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-color);
          padding: 1.5rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .edit-modal-header h3 {
          font-size: 1.3rem;
          font-weight: 600;
          background: var(--primary-gradient);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
      }

      .edit-modal-close {
          background: none;
          border: none;
          color: var(--text-muted);
          font-size: 1.5rem;
          cursor: pointer;
          transition: color 0.3s ease;
          padding: 0.5rem;
          border-radius: 6px;
      }

      .edit-modal-close:hover {
          color: var(--primary-color);
          background: rgba(255, 255, 255, 0.05);
      }

      .edit-form {
          padding: 1.5rem;
      }

      .form-group {
          margin-bottom: 1.5rem;
      }

      .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          color: var(--text-primary);
          font-weight: 500;
      }

      .edit-input, .edit-textarea {
          width: 100%;
          padding: 0.75rem;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid var(--border-color);
          border-radius: 6px;
          color: var(--text-primary);
          font-size: 0.9rem;
          transition: all 0.3s ease;
      }

      .edit-input:focus, .edit-textarea:focus {
          outline: none;
          border-color: var(--primary-color);
          background: rgba(255, 255, 255, 0.08);
      }

      .edit-textarea {
          min-height: 120px;
          resize: vertical;
      }

      .edit-file {
          width: 100%;
          padding: 0.75rem;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid var(--border-color);
          border-radius: 6px;
          color: var(--text-primary);
          font-size: 0.9rem;
          cursor: pointer;
      }

      .edit-file::-webkit-file-upload-button {
          background: var(--primary-color);
          color: white;
          border: none;
          padding: 0.5rem 1rem;
          border-radius: 4px;
          cursor: pointer;
          margin-right: 1rem;
      }

      .file-preview {
          margin-top: 1rem;
      }

      .edit-actions {
          display: flex;
          gap: 1rem;
          justify-content: flex-end;
          margin-top: 2rem;
      }

      /* Animation for delete */
      @keyframes fadeOut {
          from {
              opacity: 1;
              transform: translateY(0);
          }
          to {
              opacity: 0;
              transform: translateY(-20px);
          }
      }

      /* Responsive for admin controls */
      @media (max-width: 768px) {
          .admin-controls {
              flex-direction: column;
              gap: 0.25rem;
          }

          .edit-modal-content {
              width: 95%;
              margin: 1rem;
          }

                     .edit-actions {
               flex-direction: column;
           }
       }

       /* Issues Modal Styles */
       .issues-container {
           display: flex;
           flex-direction: column;
           gap: 1.5rem;
       }

       .issue-section {
           background: rgba(255, 255, 255, 0.02);
           border: 1px solid var(--border-color);
           border-radius: 12px;
           overflow: hidden;
           transition: all 0.3s ease;
       }

       .issue-section:hover {
           border-color: rgba(74, 144, 226, 0.3);
           transform: translateY(-2px);
       }

       .issue-section-header {
           background: rgba(255, 255, 255, 0.03);
           padding: 1.5rem;
           cursor: pointer;
           display: flex;
           justify-content: space-between;
           align-items: center;
           transition: all 0.3s ease;
           border-bottom: 1px solid var(--border-color);
       }

       .issue-section-header:hover {
           background: rgba(255, 255, 255, 0.05);
       }

       .issue-section-header.active {
           background: rgba(74, 144, 226, 0.1);
           border-bottom-color: var(--primary-color);
       }

       .issue-section-title {
           display: flex;
           align-items: center;
           gap: 1rem;
           flex: 1;
       }

       .issue-section-title i {
           color: var(--primary-color);
           font-size: 1.2rem;
       }

       .issue-section-title h3 {
           font-size: 1.3rem;
           font-weight: 600;
           color: var(--text-primary);
           margin: 0;
       }

       .issue-meta {
           color: var(--text-muted);
           font-size: 0.85rem;
           margin-left: 1rem;
       }

       .section-icon {
           color: var(--text-muted);
           transition: transform 0.3s ease;
           font-size: 1rem;
       }

       .section-icon.active {
           transform: rotate(180deg);
           color: var(--primary-color);
       }

       .issue-section-content {
           max-height: 0;
           overflow: hidden;
           transition: max-height 0.4s ease;
           background: rgba(255, 255, 255, 0.01);
       }

       .issue-section-content.active {
           max-height: 2000px;
       }

       .issue-description {
           padding: 1.5rem 1.5rem 1rem;
           border-bottom: 1px solid var(--border-color);
       }

       .issue-description h4 {
           font-size: 1.1rem;
           font-weight: 600;
           color: var(--text-primary);
           margin-bottom: 0.5rem;
       }

       .issue-description p {
           color: var(--text-secondary);
           line-height: 1.5;
           margin: 0;
       }

       .issue-subsection {
           padding: 1rem 1.5rem 1.5rem;
       }

       .issue-subsection h5 {
           font-size: 1rem;
           font-weight: 600;
           color: var(--text-primary);
           margin-bottom: 0.5rem;
       }

       .issue-subsection p {
           color: var(--text-secondary);
           line-height: 1.5;
           margin-bottom: 1rem;
       }

       .error-item {
           background: rgba(239, 68, 68, 0.1);
           border: 1px solid rgba(239, 68, 68, 0.2);
           border-radius: 8px;
           padding: 1rem;
           margin-bottom: 0.75rem;
           transition: all 0.3s ease;
       }

       .error-item:hover {
           background: rgba(239, 68, 68, 0.15);
           border-color: rgba(239, 68, 68, 0.3);
       }

       .error-title {
           color: var(--text-primary);
           font-weight: 500;
           line-height: 1.4;
       }

       .setup-step {
           display: flex;
           align-items: flex-start;
           gap: 1rem;
           background: rgba(34, 197, 94, 0.1);
           border: 1px solid rgba(34, 197, 94, 0.2);
           border-radius: 8px;
           padding: 1rem;
           margin-bottom: 0.75rem;
           transition: all 0.3s ease;
       }

       .setup-step:hover {
           background: rgba(34, 197, 94, 0.15);
           border-color: rgba(34, 197, 94, 0.3);
       }

       .step-number {
           background: var(--success-color);
           color: white;
           width: 24px;
           height: 24px;
           border-radius: 50%;
           display: flex;
           align-items: center;
           justify-content: center;
           font-weight: 600;
           font-size: 0.8rem;
           flex-shrink: 0;
       }

       .step-content {
           color: var(--text-primary);
           font-weight: 500;
           line-height: 1.4;
           flex: 1;
       }

       /* Responsive for issues modal */
       @media (max-width: 768px) {
           .issue-section-title {
               flex-direction: column;
               align-items: flex-start;
               gap: 0.5rem;
           }

           .issue-meta {
               margin-left: 0;
           }

                       .setup-step {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }

        /* Installation Modal Styles */
        .installation-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .installation-section {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .installation-section:hover {
            border-color: rgba(74, 144, 226, 0.3);
            transform: translateY(-2px);
        }

        .installation-header {
            margin-bottom: 1.5rem;
        }

        .installation-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .installation-header h3 i {
            color: var(--primary-color);
        }

        .installation-header p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin: 0;
        }

        .installation-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .installation-step {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .installation-step:hover {
            background: rgba(34, 197, 94, 0.15);
            border-color: rgba(34, 197, 94, 0.3);
            transform: translateX(5px);
        }

        .installation-step .step-number {
            background: var(--success-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .installation-step .step-content {
            flex: 1;
        }

        .installation-step .step-content h4 {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }

        .installation-step .step-content p {
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.4;
        }

        .error-solutions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .error-solution {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .error-solution:hover {
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(239, 68, 68, 0.3);
            transform: translateX(5px);
        }

        .error-icon {
            color: var(--error-color);
            font-size: 1.2rem;
            flex-shrink: 0;
            margin-top: 0.1rem;
        }

        .error-content {
            flex: 1;
        }

        .error-content h4 {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .error-content p {
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.5;
        }

        .error-content strong {
            color: var(--primary-color);
        }

        .important-notes {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .note-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(74, 144, 226, 0.1);
            border: 1px solid rgba(74, 144, 226, 0.2);
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .note-item:hover {
            background: rgba(74, 144, 226, 0.15);
            border-color: rgba(74, 144, 226, 0.3);
        }

        .note-item i {
            color: var(--success-color);
            font-size: 1rem;
            flex-shrink: 0;
        }

        .note-item span {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Responsive for installation modal */
        @media (max-width: 768px) {
            .installation-step {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            .error-solution {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }

            .installation-header h3 {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }

        /* Welcome Modal Styles */
        .welcome-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .welcome-section {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .welcome-section:hover {
            background: rgba(255, 255, 255, 0.03);
            border-color: rgba(74, 144, 226, 0.3);
        }

        .welcome-header {
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .welcome-header h3 {
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .welcome-header p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .service-info {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .service-card {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.25rem;
            background: rgba(74, 144, 226, 0.05);
            border: 1px solid rgba(74, 144, 226, 0.1);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .service-card:hover {
            background: rgba(74, 144, 226, 0.08);
            border-color: rgba(74, 144, 226, 0.2);
            transform: translateY(-2px);
        }

        .service-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 8px;
            flex-shrink: 0;
        }

        .service-icon i {
            color: white;
            font-size: 1.25rem;
        }

        .service-content h4 {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .service-content p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .terms-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .term-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .term-item:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.15);
        }

        .term-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 50%;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .term-content h4 {
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .term-content p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .term-content a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .term-content a:hover {
            color: var(--secondary-color);
            text-decoration: underline;
        }

        /* Responsive for welcome modal */
        @media (max-width: 768px) {
            .service-card {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .term-item {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .welcome-header h3 {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        /* Auth Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--dark-bg);
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            position: relative;
            transform: translateY(-20px) scale(0.95);
            transition: all 0.3s ease;
        }

        .modal.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--primary-color);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 2rem;
            background: var(--card-bg);
            border-radius: 8px;
            padding: 4px;
        }

        .auth-tab {
            flex: 1;
            padding: 0.75rem;
            text-align: center;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            background: var(--primary-gradient);
            color: white;
        }

        .auth-form {
            margin-bottom: 1rem;
        }

        .auth-form.hidden {
            display: none;
        }

        .discord-btn {
            background: #5865f2;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .discord-btn:hover {
            background: #4752c4;
            transform: translateY(-2px);
        }

        .loading {
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading.hidden {
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .divider {
            position: relative;
            text-align: center;
            border-top: 1px solid var(--border-color);
        }

        .divider span {
            background: var(--dark-bg);
            padding: 0 1rem;
        }
       </style>
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <nav class="nav-container">
            <a href="index.html" class="logo">
                <img src="https://i.imgur.com/AMPTf1r.png" alt="Varp Logo">
                VARP
            </a>
            
                        <div class="menu">
  <a href="#home" class="link">
    <span class="link-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="192"
        height="192"
        fill="currentColor"
        viewBox="0 0 256 256"
      >
        <rect width="256" height="256" fill="none"></rect>
        <path
          d="M213.3815,109.61945,133.376,36.88436a8,8,0,0,0-10.76339.00036l-79.9945,72.73477A8,8,0,0,0,40,115.53855V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V115.53887A8,8,0,0,0,213.3815,109.61945Z"
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="16"
        ></path>
      </svg>
    </span>
    <span class="link-title">Home</span>
  </a>
  <a href="#products" class="link">
    <span class="link-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart-icon lucide-shopping-cart"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>
    </span>
    <span class="link-title">Products</span>
  </a>
  <a href="https://varp.gay/reviews" class="link">
    <span class="link-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star-icon lucide-star"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/></svg>
    </span>
    <span class="link-title">Reviews</span>
  </a>
  <a href="https://varp.gay/forum" class="link">
    <span class="link-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square-icon lucide-message-square"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
    </span>
    <span class="link-title">Forum</span>
  </a>

  <a href="https://varp.gay/status" class="link">
    <span class="link-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trending-up-icon lucide-trending-up"><path d="M16 7h6v6"/><path d="m22 7-8.5 8.5-5-5L2 17"/></svg>
    </span>
    <span class="link-title">Status</span>
  </a>
  <a href="https://varp.gay/media-resell" class="link">
    <span class="link-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hand-coins-icon lucide-hand-coins"><path d="M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17"/><path d="m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9"/><path d="m2 16 6 6"/><circle cx="16" cy="9" r="2.9"/><circle cx="6" cy="5" r="3"/></svg>
    </span>
    <span class="link-title">Reselling</span>
  </a>
</div>
            
            <div class="auth-buttons">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search for products..." id="searchInput">
                </div>
                
                <!-- Not logged in -->
<!-- Not logged in -->
<div id="loginButtons">
    <button class="btn btn-primary" id="loginBtn">Login</button>
    <button class="btn btn-outline" onclick="window.location.href='cart.html'">
        <i class="fas fa-shopping-cart"></i>
    </button>
</div>
                
                <!-- Logged in -->
                <div id="userPanel" class="user-panel hidden">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <span id="username">User</span>
                    <button id="userDropdownBtn" style="background: none; border: none; color: var(--text-muted); cursor: pointer;">
                        <i class="fas fa-chevron-down"></i>
                    </button>
<div class="user-dropdown" id="userDropdown">
    <button class="dropdown-item" id="customerPanelBtn" onclick="window.location.href='https://varp.gay/customer-panel'">
        <i class="fas fa-user-cog"></i>
        Customer Panel
    </button>
<button class="dropdown-item" id="dailyRewardDropdownBtn" onclick="window.location.href='https://varp.gay/gambling'">
    <i class="fas fa-gift"></i>
    Daily Reward
</button>
    <button class="dropdown-item" id="logoutBtn">
        <i class="fas fa-sign-out-alt"></i>
        Logout
    </button>
</div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Forum Content -->
    <main class="forum-container">
        <div class="forum-header">
            <h1 class="forum-title">Varp Forum</h1>
            <p class="forum-subtitle">Join the community discussion about our products, share experiences, and get support from fellow users.</p>
        </div>

        <button class="new-topic-btn" id="newTopicBtn" disabled>
            <i class="fas fa-plus"></i>
            Create New Topic
        </button>

        <div class="forum-categories">
            <!-- General Discussion -->
            <div class="forum-category">
                <div class="category-header">
                    <div class="category-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="category-info">
                        <h3>General Discussion</h3>
                        <p>General topics about gaming, cheats, and community discussions</p>
                    </div>
                </div>
                <div class="forum-topics">
                    <div class="forum-topic" onclick="openWelcomeModal()" style="cursor: pointer;">
                        <div class="topic-header">
                            <div>
                                <div class="topic-title">Welcome to Varp Softwares!</div>
                                <div class="topic-meta">
                                    <span class="topic-author">perm.cc</span>
                                    <span></span>
                                    <span>Aug 28, 2025</span>
                                </div>
                            </div>
                            <div class="topic-stats">
                                <span><i class="fas fa-comment"></i> 2</span>
                                <span><i class="fas fa-eye"></i> 127</span>
                            </div>
                        </div>
                        <div class="topic-excerpt">
                            Welcome everyone to the official Varp forum! This is where you can discuss our products, share your experiences, and connect with other users. Remember, only authorized users can create new topics.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Support -->
            <div class="forum-category">
                <div class="category-header">
                    <div class="category-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="category-info">
                        <h3>Product Support</h3>
                        <p>Get help with installation, configuration, and troubleshooting</p>
                    </div>
                </div>
                <div class="forum-topics">
                                         <div class="forum-topic" onclick="openInstallationModal()" style="cursor: pointer;">
                         <div class="topic-header">
                             <div>
                                 <div class="topic-title">Fortnite Private - Installation Guide</div>
                                 <div class="topic-meta">
                                     <span class="topic-author">perm.cc</span>
                                     <span></span>
                                     <span>Aug 28, 2025</span>
                                 </div>
                             </div>
                             <div class="topic-stats">
                                 <span><i class="fas fa-comment"></i> 3</span>
                                 <span><i class="fas fa-eye"></i> 142</span>
                             </div>
                         </div>
                         <div class="topic-excerpt">
                             Complete installation guide for Fortnite Private cheat. Step-by-step instructions for safe and proper setup.
                         </div>
                     </div>
                                         <div class="forum-topic" onclick="openIssuesModal()" style="cursor: pointer;">
                         <div class="topic-header">
                             <div>
                                 <div class="topic-title">Common Issues & Solutions</div>
                                 <div class="topic-meta">
                                     <span class="topic-author">perm.cc</span>
                                     <span></span>
                                     <span>Aug 28, 2025</span>
                                 </div>
                             </div>
                             <div class="topic-stats">
                                 <span><i class="fas fa-comment"></i> 3</span>
                                 <span><i class="fas fa-eye"></i> 289</span>
                             </div>
                         </div>
                         <div class="topic-excerpt">
                             Frequently asked questions and common troubleshooting solutions for all our products.
                         </div>
                     </div>
                </div>
            </div>

            <!-- Updates & News -->
            <div class="forum-category">
                <div class="category-header">
                    <div class="category-icon">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <div class="category-info">
                        <h3>Product Status</h3>
                        <p>Dashboard status of all our products.</p>
                    </div>
                </div>
                <div class="forum-topics">
                    <div class="forum-topic" onclick="openStatusModal()" style="cursor: pointer;">
                        <div class="topic-header">
                            <div>
                                <div class="topic-title">Fortnite Private Updated</div>
                                <div class="topic-meta">
                                    <span class="topic-author">perm.cc</span>
                                    <span></span>
                                    <span>Aug 28, 2025</span>
                                </div>
                            </div>
                            <div class="topic-stats">
                                <span><i class="fas fa-comment"></i> 45</span>
                                <span><i class="fas fa-eye"></i> 356</span>
                            </div>
                        </div>
                        <div class="topic-excerpt">
                            Updated to latest game patch, Path: ++Fortnite+Release-37.10-CL-45056983, Swapped ImGui, Changed Amib...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Community -->
            <div class="forum-category">
                <div class="category-header">
                    <div class="category-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="category-info">
                        <h3>Community</h3>
                        <p>Share experiences, tips, and connect with other users</p>
                    </div>
                </div>
                <div class="forum-topics">
                    <div class="forum-topic" onclick="openCommunityModal()" style="cursor: pointer;">
                        <div class="topic-header">
                            <div>
                                <div class="topic-title">New Version of Varp Private</div>
                                <div class="topic-meta">
                                    <span class="topic-author">perm.cc</span>
                                    <span></span>
                                    <span>Aug 28, 2025</span>
                                </div>
                            </div>
                            <div class="topic-stats">
                                <span><i class="fas fa-comment"></i> 4</span>
                                <span><i class="fas fa-eye"></i> 162</span>
                            </div>
                        </div>
                        <div class="topic-excerpt">
                           
We share new and upcoming Updates on our Service... Discounts, Products, Changes and other Announcements
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Varp Menu</h3>
                <ul class="footer-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#products">Products</a></li>
                    <li><a href="https://discord.gg/varpud" target="_blank">Contact</a></li>
                    <li><a href="#" id="footer-status-link">Status</a></li>
                    <li><a href="https://discord.gg/varpud" target="_blank">Discord</a></li>
                    <li><a href="https://discord.gg/varpud" target="_blank">Features</a></li>
                    <li><a href="https://discord.gg/varpud" target="_blank">Terms</a></li>
                </ul>
            </div>

            <div class="footer-section newsletter">
                <h3>Subscribe to our emails</h3>
                <p>Subscribe to our emails for the latest offers, news and promotions</p>
                <div class="newsletter-form">
                    <input type="email" placeholder="Email" class="newsletter-input">
                    <button class="newsletter-btn">Sign up</button>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-country">
                <label for="country-select">Country/region</label>
                <select id="country-select" class="country-selector">
                    <option value="us">United States (USD $)</option>
                    <option value="eu">Europe (EUR )</option>
                    <option value="uk">United Kingdom (GBP )</option>
                </select>
            </div>

            <div class="payment-methods">
                <img src="https://imgur.com/kxG4AUt.png" alt="Visa" class="payment-icon">
                <img src="https://imgur.com/UZFJNzW.png" alt="Mastercard" class="payment-icon">
                <img src="https://imgur.com/NUj4vtj.png" alt="PayPal" class="payment-icon">
                <img src="https://imgur.com/pDACTZJ.png" alt="Bitcoin" class="payment-icon">
                <img src="https://imgur.com/9FmcCx6.png" alt="Ethereum" class="payment-icon">
                <img src="https://imgur.com/R0MYZ1u.png" alt="Litecoin" class="payment-icon">
                <img src="https://imgur.com/S8vn0CR.png" alt="Google Pay" class="payment-icon">
            </div>

            <div class="footer-copyright">
                <p>&copy; 2025, Varp Powered by VARP</p>
            </div>
        </div>
    </footer>

    <!-- Status Modal -->
    <div id="statusModal" class="status-modal">
        <div class="status-modal-content">
            <div class="status-modal-header">
                <h2>Product Status</h2>
                <button class="status-modal-close" onclick="closeStatusModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
                         <!-- Main Content Container -->
             <div style="padding: 1.5rem; max-width: 1200px; margin: 0 auto;">
                 <!-- Filter Bar -->
                 <div class="status-filter-bar">
                     <button class="status-filter-btn active">ALL</button>
                     <button class="status-filter-btn">POPULAR</button>
                     <button class="status-filter-btn">F</button>
                     <button class="status-filter-btn">P</button>
                     <button class="status-filter-btn">T</button>
                     <button class="status-filter-btn">B</button>
                     <button class="status-filter-btn">A</button>
                     <button class="status-filter-btn">R</button>
                 </div>

                 <!-- Status Legend -->
                 <div class="status-legend">
                     <div class="legend-item">
                         <div class="status-dot undetected"></div>
                         <span>UNDETECTED</span>
                     </div>
                     <div class="legend-item">
                         <div class="status-dot risk"></div>
                         <span>USE AT OWN RISK</span>
                     </div>
                     <div class="legend-item">
                         <div class="status-dot testing"></div>
                         <span>TESTING</span>
                     </div>
                     <div class="legend-item">
                         <div class="status-dot updating"></div>
                         <span>UPDATING</span>
                     </div>
                     <div class="legend-item">
                         <div class="status-dot offline"></div>
                         <span>OFFLINE</span>
                     </div>
                 </div>

                 <!-- Products Container -->
                 <div class="status-products-container">
                <!-- Fortnite Category -->
                <div class="status-game-category">
                    <h3 class="status-game-title">Fortnite</h3>
                    
                                         <div class="status-product-row">
                         <div class="status-product-name">Fortnite Private</div>
                         <div class="status-pricing-options">
                             <span class="status-price-btn">$4.99 DAY</span>
                             <span class="status-price-btn">$19.99 WEEK</span>
                             <span class="status-price-btn">$49.99 MONTH</span>
                         </div>
                         <div class="status-supported-platforms">
                             <span class="supported-label">SUPPORTED ON:</span>
                             <span class="supported-os">Windows 10 & Windows 11</span>
                         </div>
                         <div class="status-indicator undetected">
                            <div class="status-dot undetected"></div>
                            UNDETECTED
                        </div>
                         <button class="status-purchase-btn" data-sellhub-product="0366eff4-2695-4a32-aad3-7cced0226064">Purchase Now</button>
                     </div>


                </div>

                <!-- Spoofer Category -->
                <div class="status-game-category">
                    <h3 class="status-game-title">Spoofers</h3>
                    
                                         <div class="status-product-row">
                         <div class="status-product-name">Permanent Spoofer</div>
                         <div class="status-pricing-options">
                             <span class="status-price-btn">$9.99 ONE-TIME</span>
                             <span class="status-price-btn">$24.99 UNLIMITED USAGE</span>
                         </div>
                         <div class="status-supported-platforms">
                             <span class="supported-label">SUPPORTED ON:</span>
                             <span class="supported-os">Windows 10 & Windows 11</span>
                         </div>
                         <div class="status-indicator undetected">
                             <div class="status-dot undetected"></div>
                             UNDETECTED
                         </div>
                         <button class="status-purchase-btn" data-sellhub-product="2147ec88-bf88-4ec3-895b-dc0fc939261a">Purchase Now</button>
                     </div>

                                         <div class="status-product-row">
                         <div class="status-product-name">Temporary Spoofer</div>
                         <div class="status-pricing-options">
                             <span class="status-price-btn">$3.99 DAY</span>
                             <span class="status-price-btn">$14.99 WEEK</span>
                             <span class="status-price-btn">$39.99 MONTH</span>
                         </div>
                         <div class="status-supported-platforms">
                             <span class="supported-label">SUPPORTED ON:</span>
                             <span class="supported-os">Windows 10 & Windows 11</span>
                         </div>
                         <div class="status-indicator undetected">
                             <div class="status-dot undetected"></div>
                             UNDETECTED
                         </div>
                         <button class="status-purchase-btn" data-sellhub-product="43046014-f51a-4f50-bde4-cd01cc4723b3">Purchase Now</button>
                     </div>
                </div>

                <!-- Call of Duty Category -->
                <div class="status-game-category">
                    <h3 class="status-game-title">Call of Duty</h3>
                    
                                         <div class="status-product-row">
                         <div class="status-product-name">BO6 External</div>
                         <div class="status-pricing-options">
                             <span class="status-price-btn">$3.99 DAY</span>
                             <span class="status-price-btn">$19.99 WEEK</span>
                             <span class="status-price-btn">$29.99 MONTH</span>
                         </div>
                         <div class="status-supported-platforms">
                             <span class="supported-label">SUPPORTED ON:</span>
                             <span class="supported-os">Windows 10 & Windows 11</span>
                         </div>
                         <div class="status-indicator undetected">
                             <div class="status-dot undetected"></div>
                             UNDETECTED
                         </div>
                         <button class="status-purchase-btn" data-sellhub-product="1c148195-afb0-42c0-84ef-ebac33356202">Purchase Now</button>
                     </div>
                </div>

                <!-- Apex Legends Category -->
                <div class="status-game-category">
                    <h3 class="status-game-title">Apex Legends</h3>
                    
                                         <div class="status-product-row">
                         <div class="status-product-name">Apex External</div>
                         <div class="status-pricing-options">
                            <span class="status-price-btn">$3.99 DAY</span>
                            <span class="status-price-btn">$19.99 WEEK</span>
                            <span class="status-price-btn">$29.99 MONTH</span>
                         </div>
                         <div class="status-supported-platforms">
                             <span class="supported-label">SUPPORTED ON:</span>
                             <span class="supported-os">Windows 10 & Windows 11</span>
                         </div>
                         <div class="status-indicator undetected">
                             <div class="status-dot undetected"></div>
                             UNDETECTED
                         </div>
                         <button class="status-purchase-btn" data-sellhub-product="05ab61e9-db0c-4842-a3fe-756e7b180fb9">Purchase Now</button>
                     </div>
                </div>

                <!-- Rust Category -->
                <div class="status-game-category">
                    <h3 class="status-game-title">Rust</h3>
                    
                                         <div class="status-product-row">
                         <div class="status-product-name">Rust External</div>
                         <div class="status-pricing-options">
                            <span class="status-price-btn">$3.99 DAY</span>
                            <span class="status-price-btn">$19.99 WEEK</span>
                            <span class="status-price-btn">$29.99 MONTH</span>
                         </div>
                         <div class="status-supported-platforms">
                             <span class="supported-label">SUPPORTED ON:</span>
                             <span class="supported-os">Windows 10 & Windows 11</span>
                         </div>
                         <div class="status-indicator undetected">
                             <div class="status-dot undetected"></div>
                             UNDETECTED
                         </div>
                         <button class="status-purchase-btn" data-sellhub-product="your-rust-product-id">Purchase Now</button>
                     </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Community Updates Modal -->
    <div id="communityModal" class="status-modal">
        <div class="status-modal-content">
            <div class="status-modal-header">
                <h2>Community Updates</h2>
                <button class="status-modal-close" onclick="closeCommunityModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div style="padding: 1.5rem; max-width: 1200px; margin: 0 auto;">
                <!-- Latest Updates -->
                <div class="community-updates-container">
                    <!-- Update 1 -->
                    <div class="community-update-card">
                        <div class="update-header">
                            <h3 class="update-title">New Version of Varp Private</h3>
                            <div class="update-meta">
                                <span class="update-author">perm.cc</span>
                                <span></span>
                                <span class="update-date">Aug 28, 2025</span>
                            </div>
                        </div>
                        <div class="update-content">
                            <p class="update-description">
                                We're excited to announce the release of the latest version of Varp Private! This update includes significant improvements to detection evasion, enhanced performance optimization, and new features requested by our community. The new version provides better stability and more reliable protection against anti-cheat systems.
                            </p>
                            <div class="update-image">
                                <img src="https://media.discordapp.net/attachments/1407015980143480863/1407502271922704495/image.png?ex=68b18ae3&is=68b03963&hm=4a02790adf6b5b38c7b50827683c9f6a3bef47b983c35aa4a3783a3d32dc074b&=&format=webp&quality=lossless&width=1554&height=874" alt="Varp Private Update" style="width: 100%; max-width: 800px; border-radius: 8px; margin: 1rem 0;">
                            </div>
                        </div>
                    </div>

                    <!-- Update 2 -->
                    <div class="community-update-card">
                        <div class="update-header">
                            <h3 class="update-title">Website Update</h3>
                            <div class="update-meta">
                                <span class="update-author">perm.cc</span>
                                <span></span>
                                <span class="update-date">Aug 28, 2025</span>
                            </div>
                        </div>
                        <div class="update-content">
                            <p class="update-description">
                                We've added a forum and made some visual changes to our website... We're planning to make changes to a few of our products soon, so stay tuned...
                            </p>
                        </div>
                    </div>

                    <!-- Update 3 -->
                    <div class="community-update-card">
                        <div class="update-header">
                            <h3 class="update-title">New Loader Released</h3>
                            <div class="update-meta">
                                <span class="update-author">perm.cc</span>
                                <span></span>
                                <span class="update-date">Aug 11, 2025</span>
                            </div>
                        </div>
                        <div class="update-content">
                            <p class="update-description">
                                We are releasing a new Multi-Loader, download possible via Discord using a License Key, single product Loaders will be unushed and the Multi-Loader will automatically refresh to the new version, you won't need to download new Loaders!
                            </p>
                        </div>
                    </div>

                    <!-- Update 4 -->
                    <div class="community-update-card">
                        <div class="update-header">
                            <h3 class="update-title">Discount Code!</h3>
                            <div class="update-meta">
                                <span class="update-author">synmlynarza__</span>
                                <span></span>
                                <span class="update-date">5 days ago</span>
                            </div>
                        </div>
                        <div class="update-content">
                            <p class="update-description">
                               
We're dropping a new discount for our active users! VARP30, Active until August 20, 2025
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         </div>

     <!-- Common Issues Modal -->
     <div id="issuesModal" class="status-modal">
         <div class="status-modal-content">
             <div class="status-modal-header">
                 <h2>Common Issues & Solutions</h2>
                 <button class="status-modal-close" onclick="closeIssuesModal()">
                     <i class="fas fa-times"></i>
                 </button>
             </div>
             
             <div style="padding: 1.5rem; max-width: 1200px; margin: 0 auto;">
                 <div class="issues-container">
                     <!-- Error Fixes Section -->
                     <div class="issue-section">
                         <div class="issue-section-header" onclick="toggleSection('error-fixes')">
                             <div class="issue-section-title">
                                 <i class="fas fa-exclamation-triangle"></i>
                                 <h3>Error Fixes</h3>
                                 <span class="issue-meta">4 min read  Updated July 7th, 2025</span>
                             </div>
                             <i class="fas fa-chevron-down section-icon" id="error-fixes-icon"></i>
                         </div>
                         <div class="issue-section-content" id="error-fixes-content">
                             <div class="issue-description">
                                 <h4>All Current Loader Errors</h4>
                                 <p>Fix any issues with the following error codes. Each solution is tested and verified to resolve the specific problems.</p>
                             </div>
                             
                             <div class="issue-subsection">
                                 <h5>Common Error Solutions</h5>
                                 <p>These are the most frequently encountered loader errors and their proven solutions. Follow each step carefully for best results.</p>
                                 
                                 <div class="error-item">
                                     <div class="error-title">Unknown Error: Restart pc & try reinjecting</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">This Process Must Be Opened To Inject: Open Riva Tuner as the loader guide states during injection!</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">An Unknown Error Has Occured While Injecting: Disable UAC (If Rust: Disable Control Flow Guard)</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">Error Not Handled Upon Login: Use VPN To Login/Inject</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">Failed To Allocate Mem: Close Overlay application and loader and reinject or Restart PC and reinject</div>
                                 </div>
                             </div>
                         </div>
                     </div>

                     <!-- Driver Fixes Section -->
                     <div class="issue-section">
                         <div class="issue-section-header" onclick="toggleSection('driver-fixes')">
                             <div class="issue-section-title">
                                 <i class="fas fa-cog"></i>
                                 <h3>Driver Fixes</h3>
                                 <span class="issue-meta">5 min read  Updated July 7th, 2025</span>
                             </div>
                             <i class="fas fa-chevron-down section-icon" id="driver-fixes-icon"></i>
                         </div>
                         <div class="issue-section-content" id="driver-fixes-content">
                             <div class="issue-description">
                                 <h4>All Current Driver Errors</h4>
                                 <p>Fix any issues with the following error codes. Each solution addresses specific driver and injection problems with proven methods.</p>
                             </div>
                             
                             <div class="issue-subsection">
                                 <h5>Driver Error Solutions</h5>
                                 <p>These are the most critical driver and injection errors that can prevent proper cheat functionality. Follow each solution carefully for optimal results.</p>
                                 
                                 <div class="error-item">
                                     <div class="error-title">0x58000000: Corrupted or Incompatible Windows Version, Reinstall Windows to fix</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">0xC000004D: Failure to get mouse settings. Usually caused by users mouse, or GHUB Drivers</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">0xC000000D / 0xC000001D: Conflict between AntiVirus software, Windows Updates, or Specific Applications</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">0xC0000019: GPU Spoofing Error, update NVIDIA drivers, or disable GPU Spoofing</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">Failed to LoadDriver [#98765]: Either has FACEIT/Vanguard/External Anti-Cheat installed or opened. Or needs to simply downgrade to a compatible Windows Version.</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">SYSTEM_SERVICE_EXCEPTION BSOD: Fully disable CPU Virtualization in BIOS</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">MEMORY_MANAGEMENT BSOD: Fully windows protection features using the files here</div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <div class="error-title">KERNEL_EXPAND_STACK_ACTIVE BSOD: Can be fixed by disabling Windows protection features using DefenderRemover.exe (Option Y) Download here</div>
                                 </div>
                             </div>
                         </div>
                     </div>

                     <!-- Setup Guide Section -->
                     <div class="issue-section">
                         <div class="issue-section-header" onclick="toggleSection('setup-guide')">
                             <div class="issue-section-title">
                                 <i class="fas fa-book"></i>
                                 <h3>Setup Guide</h3>
                                 <span class="issue-meta">3 min read  Updated July 7th, 2025</span>
                             </div>
                             <i class="fas fa-chevron-down section-icon" id="setup-guide-icon"></i>
                         </div>
                         <div class="issue-section-content" id="setup-guide-content">
                             <div class="issue-description">
                                 <h4>How To Inject Our Cheats</h4>
                                 <p>Follow these essential steps to successfully inject our cheats. Each step is crucial for proper functionality.</p>
                             </div>
                             
                             <div class="issue-subsection">
                                 <h5>Injection Process</h5>
                                 <p>Injecting our cheats is very simple. You must follow the few steps provided below to ensure successful injection and optimal performance.</p>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">1</div>
                                     <div class="step-content">Disable Virtualization Based Security & Kernel DMA Security & TPM In BIOS</div>
                                 </div>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">2</div>
                                     <div class="step-content">Rust/Apex Must Disable Control Flow Guard Before Disabling Windows Defender!</div>
                                 </div>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">3</div>
                                     <div class="step-content">Disable Windows Defender Using Defender Control</div>
                                 </div>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">4</div>
                                     <div class="step-content">Install C++ Redistributables + DirectX Runtimes</div>
                                 </div>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">5</div>
                                     <div class="step-content">After Everything Is Disabled, Open Riva Tuner As Administrator</div>
                                 </div>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">6</div>
                                     <div class="step-content">Open Loader As Administrator, Login & Inject</div>
                                 </div>
                                 
                                 <div class="setup-step">
                                     <div class="step-number">7</div>
                                     <div class="step-content">After successful injection, Open your selected game and enjoy!</div>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <!-- Installation Guide Modal -->
     <div id="installationModal" class="status-modal">
         <div class="status-modal-content">
             <div class="status-modal-header">
                 <h2>Fortnite Private - Installation Guide</h2>
                 <button class="status-modal-close" onclick="closeInstallationModal()">
                     <i class="fas fa-times"></i>
                 </button>
             </div>
             
             <div style="padding: 1.5rem; max-width: 1200px; margin: 0 auto;">
                 <div class="installation-container">
                     <!-- Installation Steps -->
                     <div class="installation-section">
                         <div class="installation-header">
                             <h3><i class="fas fa-download"></i> Installation Steps</h3>
                             <p>Follow these steps carefully to properly install and run Fortnite Private</p>
                         </div>
                         
                         <div class="installation-steps">
                             <div class="installation-step">
                                 <div class="step-number">1</div>
                                 <div class="step-content">
                                     <h4>Disable Windows Defender</h4>
                                     <p>Disable Windows Defender in Windows Settings or use sordum</p>
                                 </div>
                             </div>
                             
                             <div class="installation-step">
                                 <div class="step-number">2</div>
                                 <div class="step-content">
                                     <h4>Download & Initialize Software</h4>
                                     <p>Download Software, Open it & Paste your License</p>
                                 </div>
                             </div>
                             
                             <div class="installation-step">
                                 <div class="step-number">3</div>
                                 <div class="step-content">
                                     <h4>Launch Fortnite</h4>
                                     <p>After it said "Initialized", open Fortnite and press Ok in lobby.</p>
                                 </div>
                             </div>
                             
                             <div class="installation-step">
                                 <div class="step-number">4</div>
                                 <div class="step-content">
                                     <h4>Enjoy Your Gameplay!</h4>
                                     <p>Done, Enjoy Your Gameplay!</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                     
                     <!-- Common Errors -->
                     <div class="installation-section">
                         <div class="installation-header">
                             <h3><i class="fas fa-exclamation-triangle"></i> Common Errors & Solutions</h3>
                             <p>If you encounter any of these errors, follow the solutions below</p>
                         </div>
                         
                         <div class="error-solutions">
                             <div class="error-solution">
                                 <div class="error-icon">
                                     <i class="fas fa-times-circle"></i>
                                 </div>
                                 <div class="error-content">
                                     <h4>Software is closing after pasting License</h4>
                                     <p><strong>Solution:</strong> It means that the Driver cannot get Loaded, make sure Defender & HVCI (Memory Integrity is disabled in Windows Settings). Optionally, disable Secure Boot.</p>
                                 </div>
                             </div>
                             
                             <div class="error-solution">
                                 <div class="error-icon">
                                     <i class="fas fa-times-circle"></i>
                                 </div>
                                 <div class="error-content">
                                     <h4>Couldn't Load Kernel Module</h4>
                                     <p><strong>Solution:</strong> Make sure Defender & HVCI (Memory Integrity is disabled in Windows Settings). Optionally, disable Secure Boot.</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                     
                     <!-- Important Notes -->
                     <div class="installation-section">
                         <div class="installation-header">
                             <h3><i class="fas fa-info-circle"></i> Important Notes</h3>
                         </div>
                         
                         <div class="important-notes">
                             <div class="note-item">
                                 <i class="fas fa-check-circle"></i>
                                 <span>Make sure Microsoft Vulnerable Driver Blocklist is Disabled</span>
                             </div>
                             <div class="note-item">
                                 <i class="fas fa-check-circle"></i>
                                 <span>Disable any Antivirus Software Temporarily</span>
                             </div>
                             <div class="note-item">
                                 <i class="fas fa-check-circle"></i>
                                 <span>Do not Inject any External Cheats through the game</span>
                             </div>
                             <div class="note-item">
                                 <i class="fas fa-check-circle"></i>
                                 <span>Make sure HVCI (Memory Integrity) is Disabled</span>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <!-- Welcome to Varp Forum Modal -->
     <div id="welcomeModal" class="status-modal">
         <div class="status-modal-content">
             <div class="status-modal-header">
                 <h2>Welcome to Varp Forum!</h2>
                 <button class="status-modal-close" onclick="closeWelcomeModal()">
                     <i class="fas fa-times"></i>
                 </button>
             </div>
             
             <div style="padding: 1.5rem; max-width: 1200px; margin: 0 auto;">
                 <div class="welcome-container">
                     <!-- Service Information -->
                     <div class="welcome-section">
                         <div class="welcome-header">
                             <h3><i class="fas fa-info-circle"></i> How Our Service Works</h3>
                             <p>Everything you need to know about Varp services and support</p>
                         </div>
                         
                         <div class="service-info">
                             <div class="service-card">
                                 <div class="service-icon">
                                     <i class="fas fa-download"></i>
                                 </div>
                                 <div class="service-content">
                                     <h4>1. Loaders & Updates</h4>
                                     <p>All loaders are combined into one multi-loader. You don't have to download new loaders after updating; the loader will do it for you. This is a more convenient version... All updates are updated within a maximum of 16 hours when the game is updated, thats why Varp is quickly choice!</p>
                                 </div>
                             </div>
                             
                             <div class="service-card">
                                 <div class="service-icon">
                                     <i class="fas fa-key"></i>
                                 </div>
                                 <div class="service-content">
                                     <h4>2. Gaining access to the Loader</h4>
                                     <p>If you don't have Loader, you can get the latest version in the #loaders channel on our discord, just confirm your license key!</p>
                                 </div>
                             </div>
                             
                             <div class="service-card">
                                 <div class="service-icon">
                                     <i class="fas fa-headset"></i>
                                 </div>
                                 <div class="service-content">
                                     <h4>3. Support Assistance and Response Time</h4>
                                     <p>Our support team responds within a maximum of 12 hours. We're 100% here to help you with any issue. Remember to pay attention to the product status and read the guides carefully to save both your time and ours.</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                     
                     <!-- Terms of Service -->
                     <div class="welcome-section">
                         <div class="welcome-header">
                             <h3><i class="fas fa-gavel"></i> Terms of Service</h3>
                             <p>Please read and follow these terms carefully</p>
                         </div>
                         
                         <div class="terms-container">
                             <div class="term-item">
                                 <div class="term-number">1</div>
                                 <div class="term-content">
                                     <h4>Discord Guidelines</h4>
                                     <p>Follow all discord community guidelines and TOS. <a href="https://discord.com/guidelines" target="_blank">https://discord.com/guidelines</a> <a href="https://discord.com/terms" target="_blank">https://discord.com/terms</a></p>
                                 </div>
                             </div>
                             
                             <div class="term-item">
                                 <div class="term-number">2</div>
                                 <div class="term-content">
                                     <h4>Spam / Promotion & NSFW</h4>
                                     <p>Spamming in our members' dms, spam on chat channels, tickets, promoting ourselves, sending nsfw content, insults, false rumors are punished. Timeout/Perm depends on the offense.</p>
                                 </div>
                             </div>
                             
                             <div class="term-item">
                                 <div class="term-number">3</div>
                                 <div class="term-content">
                                     <h4>Tickets</h4>
                                     <p>Referring to point 2, spamming / pinging on tickets will be severely punished with timeouts or bans.</p>
                                 </div>
                             </div>
                             
                             <div class="term-item">
                                 <div class="term-number">4</div>
                                 <div class="term-content">
                                     <h4>Attempts to manipulate our programs</h4>
                                     <p>Any attempts at cracking / debugging etc. will be punished with a permanent ban from the server, Loaders.</p>
                                 </div>
                             </div>
                             
                             <div class="term-item">
                                 <div class="term-number">5</div>
                                 <div class="term-content">
                                     <h4>Refunds</h4>
                                     <p>No refunds given. if you didn't read the requirements of the product and how does it work, its not our problem. If the situation is exceptional and something really doesn't work for you, you have an extraordinary problem, ping the administration and wait. If we notice our mistake and precisely determine the situation, we will be able to refund.</p>
                                 </div>
                             </div>
                             
                             <div class="term-item">
                                 <div class="term-number">6</div>
                                 <div class="term-content">
                                     <h4>Keysharing</h4>
                                     <p>Any attempts to keyshare or resell keys will result in a license and user ban.</p>
                                 </div>
                             </div>
                             
                             <div class="term-item">
                                 <div class="term-number">7</div>
                                 <div class="term-content">
                                     <h4>Losing key / HWID Reset</h4>
                                     <p>If you lost your key, it's not our problem, it's your fault. Your task after purchase is to save the key. If you need hwid reset and you lost the key, you won't get it back either. HWID Reset - 1x per week.</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <!-- Edit Modal for New Topics -->
     <div id="editModal" class="edit-modal">
         <div class="edit-modal-content">
             <div class="edit-modal-header">
                 <h3>Edit Topic</h3>
                 <button class="edit-modal-close" onclick="closeEditModal()">
                     <i class="fas fa-times"></i>
                 </button>
             </div>
             <div class="edit-form">
                 <div class="form-group">
                     <label>Title:</label>
                     <input type="text" id="editTitle" class="edit-input">
                 </div>
                 <div class="form-group">
                     <label>Content:</label>
                     <textarea id="editContent" class="edit-textarea"></textarea>
                 </div>
                 <div class="form-group">
                     <label>Add Screenshot:</label>
                     <input type="file" id="editScreenshot" accept="image/*" class="edit-file">
                     <div class="file-preview" id="editFilePreview"></div>
                 </div>
                 <div class="edit-actions">
                     <button class="btn btn-primary" onclick="saveEdit()">Save Changes</button>
                     <button class="btn btn-outline" onclick="closeEditModal()">Cancel</button>
                 </div>
             </div>
         </div>
     </div>

     <!-- Discord Login Modal -->
     <div class="modal" id="authModal">
         <div class="modal-content">
             <button class="modal-close" id="modalClose">
                 <i class="fas fa-times"></i>
             </button>

             <h2 class="modal-title">Welcome to Varp</h2>

             <!-- Discord Login Button -->
             <button type="button" class="btn discord-btn" id="discordLoginBtn" style="width: 100%; margin-bottom: 1rem;">
                 <i class="fab fa-discord"></i>
                 <span class="btn-text">Continue with Discord</span>
                 <div class="loading hidden"></div>
             </button>
         </div>
     </div>

     <!-- Customer Panel Modal -->
     <div class="modal" id="customerPanelModal">
         <div class="modal-content" style="max-width: 800px;">
             <button class="modal-close" id="customerPanelClose">
                 <i class="fas fa-times"></i>
             </button>
             
             <h2 class="modal-title">Customer Panel</h2>
             
             <div id="customerPanelContent">
                 <div style="text-align: center; padding: 2rem;">
                     <i class="fas fa-user-circle" style="font-size: 4rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                     <h3>Welcome to your Customer Panel</h3>
                     <p style="color: var(--text-secondary); margin-bottom: 2rem;">Manage your purchases, licenses, and account settings.</p>
                     
                     <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
                         <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 10px; border: 1px solid var(--border-color);">
                             <i class="fas fa-shopping-bag" style="font-size: 2rem; color: var(--primary-color); margin-bottom: 0.5rem;"></i>
                             <h4>My Purchases</h4>
                             <p style="color: var(--text-secondary); font-size: 0.9rem;">View your order history</p>
                         </div>
                         
                         <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 10px; border: 1px solid var(--border-color);">
                             <i class="fas fa-key" style="font-size: 2rem; color: var(--success-color); margin-bottom: 0.5rem;"></i>
                             <h4>License Keys</h4>
                             <p style="color: var(--text-secondary); font-size: 0.9rem;">Manage your licenses</p>
                         </div>
                         
                         <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 10px; border: 1px solid var(--border-color);">
                             <i class="fas fa-headset" style="font-size: 2rem; color: var(--warning-color); margin-bottom: 0.5rem;"></i>
                             <h4>Support</h4>
                             <p style="color: var(--text-secondary); font-size: 0.9rem;">Get help and support</p>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBqXqXqXqXqXqXqXqXqXqXqXqXqXqXqXqXq",
            authDomain: "varp-software.firebaseapp.com",
            projectId: "varp-software",
            storageBucket: "varp-software.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdefghijklmnop"
        };

        // Discord OAuth Configuration (dodaj po Firebase config)
        const DISCORD_CONFIG = {
            clientId: '1402672827768901743', // Zamie na swoje Discord Client ID
            redirectUri: 'https://varp.gay/forum',
            scope: 'identify email',
            responseType: 'code'
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // DOM Elements
        const header = document.getElementById('header');
        const loginBtn = document.getElementById('loginBtn');
        const authModal = document.getElementById('authModal');
        const modalClose = document.getElementById('modalClose');
        const searchInput = document.getElementById('searchInput');
        const userPanel = document.getElementById('userPanel');
        const loginButtons = document.getElementById('loginButtons');
        const userDropdownBtn = document.getElementById('userDropdownBtn');
        const userDropdown = document.getElementById('userDropdown');
        const logoutBtn = document.getElementById('logoutBtn');
        const customerPanelBtn = document.getElementById('customerPanelBtn');
        const customerPanelModal = document.getElementById('customerPanelModal');
        const customerPanelClose = document.getElementById('customerPanelClose');
        const newTopicBtn = document.getElementById('newTopicBtn');
        const userAvatar = document.getElementById('userAvatar');
        const username = document.getElementById('username');

        // State
        let currentUser = null;

        // Modal controls
        loginBtn.addEventListener('click', () => {
            authModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        modalClose.addEventListener('click', closeAuthModal);
        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) closeAuthModal();
        });

        function closeAuthModal() {
            authModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Customer Panel Modal
        customerPanelBtn.addEventListener('click', () => {
            if (!currentUser) {
                alert('Please login to access Customer Panel!');
                authModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                return;
            }
            
            userDropdown.classList.remove('active');
            window.location.href = '/customer-panel';
        });

        customerPanelClose.addEventListener('click', closeCustomerPanel);
        customerPanelModal.addEventListener('click', (e) => {
            if (e.target === customerPanelModal) closeCustomerPanel();
        });

        function closeCustomerPanel() {
            customerPanelModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // User dropdown
        userDropdownBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            userDropdown.classList.toggle('active');
        });

        document.addEventListener('click', () => {
            userDropdown.classList.remove('active');
        });

        // Firebase Auth State Observer
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                updateUIForLoggedInUser(user);
            } else {
                currentUser = null;
                updateUIForLoggedOutUser();
            }
        });

        function updateUIForLoggedInUser(user) {
            loginButtons.classList.add('hidden');
            userPanel.classList.remove('hidden');
            
            const username = user.displayName || user.email.split('@')[0];
            document.getElementById('username').textContent = username;
            document.getElementById('userAvatar').textContent = username.charAt(0).toUpperCase();
            
            closeAuthModal();
        }

        function updateUIForLoggedOutUser() {
            loginButtons.classList.remove('hidden');
            userPanel.classList.add('hidden');
        }



        // Discord Login Handler
        document.getElementById('discordLoginBtn').addEventListener('click', async () => {
            try {
                const discordBtn = document.getElementById('discordLoginBtn');
                const btnText = discordBtn.querySelector('.btn-text');
                const loading = discordBtn.querySelector('.loading');

                btnText.classList.add('hidden');
                loading.classList.remove('hidden');
                discordBtn.disabled = true;

                // Generate state ONCE and use it
                const state = generateRandomState();
                localStorage.setItem('discord_oauth_state', state);

                // Build URL with the same state
                const params = new URLSearchParams({
                    client_id: DISCORD_CONFIG.clientId,
                    redirect_uri: DISCORD_CONFIG.redirectUri,
                    response_type: DISCORD_CONFIG.responseType,
                    scope: DISCORD_CONFIG.scope,
                    state: state  // Use the same state we stored
                });

                const authURL = `https://discord.com/api/oauth2/authorize?${params.toString()}`;
                window.location.href = authURL;

            } catch (error) {
                console.error('Discord login error:', error);
                showNotification('Failed to initiate Discord login', 'error');
            }
        });

        function generateRandomState() {
            return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        }

        async function handleDiscordCallback() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');
            const state = urlParams.get('state');
            const error = urlParams.get('error');

            // Clear URL parameters immediately
            if (code || error || state) {
                const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
                window.history.replaceState({}, document.title, newUrl);
            }

            if (error) {
                console.log(' Discord login error:', error);
                showNotification('Discord login cancelled or failed', 'error');
                return;
            }

            if (!code) return;

            // Verify state
            const storedState = localStorage.getItem('discord_oauth_state');
            if (state !== storedState) {
                console.error(' OAuth state mismatch');
                showNotification('Security error during Discord login', 'error');
                localStorage.removeItem('discord_oauth_state');
                return;
            }

            try {
                console.log(' Processing Discord callback...');

                // Get access token from Discord
                const tokenData = await getDiscordToken(code);

                if (!tokenData.access_token) {
                    throw new Error('No access token received from Discord');
                }

                // Get Discord user info
                const discordUser = await getDiscordUser(tokenData.access_token);

                // Create user session with token
                await createDiscordUserSession(discordUser, tokenData.access_token);

                showNotification('Successfully logged in with Discord!', 'success');
                closeAuthModal();

            } catch (error) {
                console.error(' Discord callback error:', error);
                showNotification('Failed to complete Discord login: ' + error.message, 'error');
            } finally {
                localStorage.removeItem('discord_oauth_state');
            }
        }

        // Get Discord access token
        async function getDiscordToken(code) {
            try {
                const response = await fetch('https://discord.com/api/oauth2/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: new URLSearchParams({
                        client_id: DISCORD_CONFIG.clientId,
                        client_secret: 'o_k10f2JmSRh-TgKWQGZAxKipMQ4EFZg', // Przenie na backend!
                        grant_type: 'authorization_code',
                        code: code,
                        redirect_uri: DISCORD_CONFIG.redirectUri
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Failed to exchange code for token: ${response.status} - ${errorText}`);
                }

                const tokenData = await response.json();
                console.log(' Discord token obtained successfully');

                return tokenData;
            } catch (error) {
                console.error(' Error getting Discord token:', error);
                throw error;
            }
        }

        // Get Discord user data
        async function getDiscordUser(accessToken) {
            const response = await fetch('https://discord.com/api/users/@me', {
                headers: {
                    'Authorization': `Bearer ${accessToken}`
                }
            });

            if (!response.ok) {
                throw new Error('Failed to fetch Discord user');
            }

            return await response.json();
        }

        // Weryfikacja sesji Discord
        async function verifyDiscordSession(userData) {
            try {
                // Sprawd czy sesja nie wygasa
                const now = Date.now();
                const sessionAge = now - userData.loginTime;

                if (sessionAge > userData.expiresIn) {
                    console.log(' Discord session expired');
                    clearDiscordSession();
                    return false;
                }

                // Opcjonalnie: weryfikuj token z Discord API
                if (userData.accessToken) {
                    try {
                        const response = await fetch('https://discord.com/api/users/@me', {
                            headers: {
                                'Authorization': `Bearer ${userData.accessToken}`
                            }
                        });

                        if (!response.ok) {
                            console.log(' Discord token invalid or expired');
                            clearDiscordSession();
                            return false;
                        }

                        console.log(' Discord session verified successfully');
                        return true;
                    } catch (tokenError) {
                        console.warn(' Could not verify Discord token:', tokenError);
                        // Jeli nie moemy zweryfikowa tokena, ale sesja jest wiea, pozwl na kontynuacj
                        return sessionAge < (24 * 60 * 60 * 1000); // 24 godziny bez weryfikacji
                    }
                }

                return true;
            } catch (error) {
                console.error(' Error verifying Discord session:', error);
                return false;
            }
        }

        // Wyczy sesj Discord
        function clearDiscordSession() {
            localStorage.removeItem('discord_user');
            localStorage.removeItem('user_authenticated');
            localStorage.removeItem('auth_provider');
            currentUser = null;
            updateUIForLoggedOutUser();
            console.log(' Discord session cleared');
        }

        // Create Discord user session and update UI
        async function createDiscordUserSession(discordUser, accessToken) {
            // Create user data object z tokenem i dat wyganicia
            const userData = {
                id: discordUser.id,
                username: discordUser.username,
                discriminator: discordUser.discriminator,
                email: discordUser.email,
                avatar: discordUser.avatar ?
                    `https://cdn.discordapp.com/avatars/${discordUser.id}/${discordUser.avatar}.png?size=128` :
                    `https://cdn.discordapp.com/embed/avatars/${discordUser.discriminator % 5}.png`,
                globalName: discordUser.global_name || discordUser.username,
                // Nowe pola dla sesji
                accessToken: accessToken,
                loginTime: Date.now(),
                expiresIn: 7 * 24 * 60 * 60 * 1000, // 7 dni w milisekundach
                provider: 'discord'
            };

            // Zapisz w localStorage z dodatkow flag
            localStorage.setItem('discord_user', JSON.stringify(userData));
            localStorage.setItem('user_authenticated', 'true');
            localStorage.setItem('auth_provider', 'discord');

            // Zapisz do Firestore z rozszerzonym logowaniem
            try {
                await db.collection('users').doc(discordUser.id).set({
                    discordId: discordUser.id,
                    username: discordUser.username,
                    globalName: discordUser.global_name || discordUser.username,
                    email: discordUser.email,
                    avatar: userData.avatar,
                    lastLogin: firebase.firestore.FieldValue.serverTimestamp(),
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    loginMethod: 'discord',
                    sessionActive: true
                }, { merge: true });

                console.log(' Discord user saved to Firestore successfully');
            } catch (error) {
                console.error(' Error saving Discord user to Firestore:', error);
            }

            // Update UI
            currentUser = userData;
            updateUIForDiscordUser(userData);

            console.log(' Discord session created successfully:', userData.username);
        }

        // Update UI for Discord user
        function updateUIForDiscordUser(userData) {
            loginButtons.classList.add('hidden');
            userPanel.classList.remove('hidden');

            // Set username (use global_name if available, fallback to username)
            const displayName = userData.globalName || userData.username;
            document.getElementById('username').textContent = displayName;

            // Set avatar
            const avatarElement = document.getElementById('userAvatar');
            if (userData.avatar) {
                // Replace text avatar with image
                avatarElement.innerHTML = `<img src="${userData.avatar}" alt="Avatar" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            } else {
                // Fallback to text avatar
                avatarElement.textContent = displayName.charAt(0).toUpperCase();
            }
        }

        // Inicjalizacja sesji uytkownika
        async function initializeUserSession() {
            try {
                // Sprawd czy uytkownik jest uwierzytelniony
                const isAuthenticated = localStorage.getItem('user_authenticated');
                const authProvider = localStorage.getItem('auth_provider');

                if (!isAuthenticated) {
                    console.log(' No user session found');
                    return;
                }

                if (authProvider === 'discord') {
                    const discordUserData = localStorage.getItem('discord_user');

                    if (discordUserData) {
                        try {
                            const userData = JSON.parse(discordUserData);
                            console.log(' Found Discord session for:', userData.username);

                            // Weryfikuj sesj
                            const isValid = await verifyDiscordSession(userData);

                            if (isValid) {
                                currentUser = userData;
                                updateUIForDiscordUser(userData);
                                console.log(' Discord session restored successfully');
                            } else {
                                console.log(' Discord session validation failed');
                            }
                        } catch (parseError) {
                            console.error(' Error parsing Discord user data:', parseError);
                            clearDiscordSession();
                        }
                    }
                } else if (authProvider === 'firebase') {
                    // Handle Firebase auth restoration (existing logic)
                    console.log(' Checking Firebase auth state...');
                }

            } catch (error) {
                console.error(' Error initializing user session:', error);
                clearDiscordSession();
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--dark-bg);
                border: 2px solid var(--primary-color);
                border-radius: 10px;
                padding: 1rem 1.5rem;
                color: white;
                z-index: 10001;
                max-width: 300px;
                box-shadow: 0 10px 30px rgba(74, 144, 226, 0.3);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            if (type === 'success') {
                notification.style.borderColor = 'var(--success-color)';
            } else if (type === 'error') {
                notification.style.borderColor = 'var(--error-color)';
            }
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto remove
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Logout
        logoutBtn.addEventListener('click', async () => {
            try {
                const authProvider = localStorage.getItem('auth_provider');

                if (authProvider === 'discord') {
                    // Discord logout
                    clearDiscordSession();
                    showNotification('Logged out successfully', 'success');
                } else if (authProvider === 'firebase') {
                    // Firebase logout
                    await auth.signOut();
                } else {
                    // Generic logout
                    currentUser = null;
                    updateUIForLoggedOutUser();
                    localStorage.clear(); // Clear all auth data
                }

                userDropdown.classList.remove('active');

            } catch (error) {
                console.error(' Logout error:', error);
                showNotification('Error during logout', 'error');
            }
        });

                 // New topic button functionality is now handled in the enhanced createNewTopic function

        // Header scroll effect
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            // Implement search logic here
            console.log('Searching for:', searchTerm);
        });

                 // Footer status link
         const footerStatusLink = document.getElementById('footer-status-link');
         if (footerStatusLink) {
             footerStatusLink.addEventListener('click', function(e) {
                 e.preventDefault();
                 window.location.href = 'https://varp.gay/status';
             });
         }

                   // Status Modal Functions
          function openStatusModal() {
              const modal = document.getElementById('statusModal');
              modal.classList.add('active');
              document.body.style.overflow = 'hidden';
              
              // Add page transition effect
              setTimeout(() => {
                  modal.style.transform = 'translateX(0)';
              }, 10);
          }

          function closeStatusModal() {
              const modal = document.getElementById('statusModal');
              modal.style.transform = 'translateX(100%)';
              
              setTimeout(() => {
                  modal.classList.remove('active');
                  document.body.style.overflow = 'auto';
              }, 400);
          }

                   // Close modal when clicking outside (disabled for full page look)
          // document.getElementById('statusModal').addEventListener('click', function(e) {
          //     if (e.target === this) {
          //         closeStatusModal();
          //     }
          // });

                                 // Close modal with ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeStatusModal();
                    closeCommunityModal();
                    closeIssuesModal();
                    closeInstallationModal();
                    closeWelcomeModal();
                }
            });

            // Installation Modal Functions
            function openInstallationModal() {
                const modal = document.getElementById('installationModal');
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Add page transition effect
                setTimeout(() => {
                    modal.style.transform = 'translateX(0)';
                }, 10);
            }

            function closeInstallationModal() {
                const modal = document.getElementById('installationModal');
                modal.style.transform = 'translateX(100%)';
                
                setTimeout(() => {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }, 400);
            }

            // Welcome Modal Functions
            function openWelcomeModal() {
                const modal = document.getElementById('welcomeModal');
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Add page transition effect
                setTimeout(() => {
                    modal.style.transform = 'translateX(0)';
                }, 10);
            }

            function closeWelcomeModal() {
                const modal = document.getElementById('welcomeModal');
                modal.style.transform = 'translateX(100%)';
                
                setTimeout(() => {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }, 400);
            }

           // Issues Modal Functions
           function openIssuesModal() {
               const modal = document.getElementById('issuesModal');
               modal.classList.add('active');
               document.body.style.overflow = 'hidden';
               
               // Add page transition effect
               setTimeout(() => {
                   modal.style.transform = 'translateX(0)';
               }, 10);
           }

           function closeIssuesModal() {
               const modal = document.getElementById('issuesModal');
               modal.style.transform = 'translateX(100%)';
               
               setTimeout(() => {
                   modal.classList.remove('active');
                   document.body.style.overflow = 'auto';
               }, 400);
           }

           // Toggle section function
           function toggleSection(sectionId) {
               const content = document.getElementById(sectionId + '-content');
               const icon = document.getElementById(sectionId + '-icon');
               const header = content.previousElementSibling;
               
               if (content.classList.contains('active')) {
                   content.classList.remove('active');
                   icon.classList.remove('active');
                   header.classList.remove('active');
               } else {
                   content.classList.add('active');
                   icon.classList.add('active');
                   header.classList.add('active');
               }
           }

          // Community Modal Functions
          function openCommunityModal() {
              const modal = document.getElementById('communityModal');
              modal.classList.add('active');
              document.body.style.overflow = 'hidden';
              
              // Add page transition effect
              setTimeout(() => {
                  modal.style.transform = 'translateX(0)';
              }, 10);
          }

          function closeCommunityModal() {
              const modal = document.getElementById('communityModal');
              modal.style.transform = 'translateX(100%)';
              
              setTimeout(() => {
                  modal.classList.remove('active');
                  document.body.style.overflow = 'auto';
              }, 400);
          }

         // Status filter functionality
         document.querySelectorAll('.status-filter-btn').forEach(btn => {
             btn.addEventListener('click', () => {
                 document.querySelectorAll('.status-filter-btn').forEach(b => b.classList.remove('active'));
                 btn.classList.add('active');
                 
                 const filter = btn.textContent.toLowerCase();
                 console.log('Status filter:', filter);
                 // Add filter logic here if needed
             });
         });

                   // Purchase button functionality
          document.querySelectorAll('.status-purchase-btn').forEach(btn => {
              btn.addEventListener('click', () => {
                  const productId = btn.getAttribute('data-sellhub-product');
                  if (productId) {
                      console.log('Opening SellHub for product:', productId);
                      // This will be handled by SellHub embed
                  }
              });
          });

          // Admin Controls Functions
          function addAdminControls() {
              // Add delete buttons to existing topics
              document.querySelectorAll('.forum-topic').forEach(topic => {
                  const adminControls = document.createElement('div');
                  adminControls.className = 'admin-controls';
                  adminControls.innerHTML = `
                      <button class="admin-btn delete-btn" onclick="deleteTopic(this)">
                          <i class="fas fa-trash"></i>
                      </button>
                      <button class="admin-btn edit-btn" onclick="editTopic(this)">
                          <i class="fas fa-edit"></i>
                      </button>
                  `;
                  topic.appendChild(adminControls);
              });
          }

          function deleteTopic(btn) {
              if (confirm('Czy na pewno chcesz usun ten post?')) {
                  const topic = btn.closest('.forum-topic');
                  topic.style.animation = 'fadeOut 0.3s ease';
                  setTimeout(() => {
                      topic.remove();
                  }, 300);
              }
          }

          function editTopic(btn) {
              const topic = btn.closest('.forum-topic');
              const title = topic.querySelector('.topic-title').textContent;
              const excerpt = topic.querySelector('.topic-excerpt').textContent;
              
              // Create edit modal
              const editModal = document.createElement('div');
              editModal.className = 'edit-modal active';
              editModal.innerHTML = `
                  <div class="edit-modal-content">
                      <div class="edit-modal-header">
                          <h3>Edytuj Post</h3>
                          <button class="edit-modal-close" onclick="closeEditModal()">
                              <i class="fas fa-times"></i>
                          </button>
                      </div>
                      <div class="edit-form">
                          <div class="form-group">
                              <label>Tytu:</label>
                              <input type="text" id="editTitle" value="${title}" class="edit-input">
                          </div>
                          <div class="form-group">
                              <label>Tre:</label>
                              <textarea id="editContent" class="edit-textarea">${excerpt}</textarea>
                          </div>
                          <div class="form-group">
                              <label>Dodaj Screenshot:</label>
                              <input type="file" id="editScreenshot" accept="image/*" class="edit-file">
                              <div class="file-preview" id="filePreview"></div>
                          </div>
                          <div class="edit-actions">
                              <button class="btn btn-primary" onclick="saveEdit('${title}')">Zapisz</button>
                              <button class="btn btn-outline" onclick="closeEditModal()">Anuluj</button>
                          </div>
                      </div>
                  </div>
              `;
              document.body.appendChild(editModal);
              
              // File preview
              document.getElementById('editScreenshot').addEventListener('change', function(e) {
                  const file = e.target.files[0];
                  if (file) {
                      const reader = new FileReader();
                      reader.onload = function(e) {
                          document.getElementById('filePreview').innerHTML = `
                              <img src="${e.target.result}" alt="Preview" style="max-width: 200px; border-radius: 8px;">
                          `;
                      };
                      reader.readAsDataURL(file);
                  }
              });
          }

          function saveEdit(oldTitle) {
              const newTitle = document.getElementById('editTitle').value;
              const newContent = document.getElementById('editContent').value;
              const screenshot = document.getElementById('editScreenshot').files[0];
              
              // Find and update the topic
              const topics = document.querySelectorAll('.forum-topic');
              topics.forEach(topic => {
                  const titleElement = topic.querySelector('.topic-title');
                  if (titleElement.textContent === oldTitle) {
                      titleElement.textContent = newTitle;
                      topic.querySelector('.topic-excerpt').textContent = newContent;
                      
                      // Add screenshot if uploaded
                      if (screenshot) {
                          const reader = new FileReader();
                          reader.onload = function(e) {
                              const screenshotDiv = document.createElement('div');
                              screenshotDiv.className = 'topic-screenshot';
                              screenshotDiv.innerHTML = `
                                  <img src="${e.target.result}" alt="Screenshot" style="max-width: 100%; border-radius: 8px; margin-top: 1rem;">
                              `;
                              topic.appendChild(screenshotDiv);
                          };
                          reader.readAsDataURL(screenshot);
                      }
                  }
              });
              
              closeEditModal();
          }

          function closeEditModal() {
              const modal = document.querySelector('.edit-modal');
              if (modal) {
                  modal.remove();
              }
          }

          // Enhanced new topic creation for perm.cc
          newTopicBtn.addEventListener('click', () => {
              if (!newTopicBtn.disabled) {
                  createNewTopic();
              }
          });

          function createNewTopic() {
              const newTopicModal = document.createElement('div');
              newTopicModal.className = 'edit-modal active';
              newTopicModal.innerHTML = `
                  <div class="edit-modal-content">
                      <div class="edit-modal-header">
                          <h3>Utwrz Nowy Post</h3>
                          <button class="edit-modal-close" onclick="closeEditModal()">
                              <i class="fas fa-times"></i>
                          </button>
                      </div>
                      <div class="edit-form">
                          <div class="form-group">
                              <label>Tytu:</label>
                              <input type="text" id="newTitle" placeholder="Wprowad tytu posta" class="edit-input">
                          </div>
                          <div class="form-group">
                              <label>Tre:</label>
                              <textarea id="newContent" placeholder="Wprowad tre posta" class="edit-textarea"></textarea>
                          </div>
                          <div class="form-group">
                              <label>Dodaj Screenshot:</label>
                              <input type="file" id="newScreenshot" accept="image/*" class="edit-file">
                              <div class="file-preview" id="newFilePreview"></div>
                          </div>
                          <div class="edit-actions">
                              <button class="btn btn-primary" onclick="saveNewTopic()">Utwrz Post</button>
                              <button class="btn btn-outline" onclick="closeEditModal()">Anuluj</button>
                          </div>
                      </div>
                  </div>
              `;
              document.body.appendChild(newTopicModal);
              
              // File preview for new topic
              document.getElementById('newScreenshot').addEventListener('change', function(e) {
                  const file = e.target.files[0];
                  if (file) {
                      const reader = new FileReader();
                      reader.onload = function(e) {
                          document.getElementById('newFilePreview').innerHTML = `
                              <img src="${e.target.result}" alt="Preview" style="max-width: 200px; border-radius: 8px;">
                          `;
                      };
                      reader.readAsDataURL(file);
                  }
              });
          }

          function saveNewTopic() {
              const title = document.getElementById('newTitle').value;
              const content = document.getElementById('newContent').value;
              const screenshot = document.getElementById('newScreenshot').files[0];
              
              if (!title || !content) {
                  alert('Prosz wypeni wszystkie pola!');
                  return;
              }
              
              // Create new topic element
              const newTopic = document.createElement('div');
              newTopic.className = 'forum-topic';
              newTopic.innerHTML = `
                  <div class="topic-header">
                      <div>
                          <div class="topic-title">${title}</div>
                          <div class="topic-meta">
                              <span class="topic-author">perm.cc</span>
                              <span></span>
                              <span>teraz</span>
                          </div>
                      </div>
                      <div class="topic-stats">
                          <span><i class="fas fa-comment"></i> 0</span>
                          <span><i class="fas fa-eye"></i> 0</span>
                      </div>
                  </div>
                  <div class="topic-excerpt">${content}</div>
                  <div class="admin-controls">
                      <button class="admin-btn delete-btn" onclick="deleteTopic(this)">
                          <i class="fas fa-trash"></i>
                      </button>
                      <button class="admin-btn edit-btn" onclick="editTopic(this)">
                          <i class="fas fa-edit"></i>
                      </button>
                  </div>
              `;
              
              // Add screenshot if uploaded
              if (screenshot) {
                  const reader = new FileReader();
                  reader.onload = function(e) {
                      const screenshotDiv = document.createElement('div');
                      screenshotDiv.className = 'topic-screenshot';
                      screenshotDiv.innerHTML = `
                          <img src="${e.target.result}" alt="Screenshot" style="max-width: 100%; border-radius: 8px; margin-top: 1rem;">
                      `;
                      newTopic.appendChild(screenshotDiv);
                  };
                  reader.readAsDataURL(screenshot);
              }
              
              // Add to the first category (General Discussion)
              const firstCategory = document.querySelector('.forum-category .forum-topics');
              firstCategory.insertBefore(newTopic, firstCategory.firstChild);
              
              closeEditModal();
          }

          // Check authentication state for admin functionality
          auth.onAuthStateChanged((user) => {
              if (user) {
                  // User is signed in
                  loginButtons.classList.add('hidden');
                  userPanel.classList.remove('hidden');
                  
                  // Set user info
                  const displayName = user.displayName || user.email.split('@')[0];
                  username.textContent = displayName;
                  userAvatar.textContent = displayName.charAt(0).toUpperCase();
                  
                  // Check if user is perm.sys or perm.cc
                  if (user.email === 'perm.sys@varp.com' || displayName === 'perm.sys' || 
                      user.email === 'fortniteprivate@op.pl' || displayName === 'perm.cc') {
                      newTopicBtn.disabled = false;
                      newTopicBtn.textContent = 'Create New Topic';
                      
                      // Add admin controls for perm.cc
                      if (user.email === 'fortniteprivate@op.pl' || displayName === 'perm.cc') {
                          addAdminControls();
                      }
                  } else {
                      newTopicBtn.disabled = true;
                      newTopicBtn.textContent = 'Only authorized users can create topics';
                  }
              } else {
                  // User is signed out

              }
          });

          // Initialize everything when page loads
          document.addEventListener('DOMContentLoaded', async () => {
              console.log(' Loading Varp forum...');

              // First check Discord session
              await initializeUserSession();

              // Then handle Discord callback (if exists)
              await handleDiscordCallback();

              console.log(' Varp forum loaded successfully!');
          });

          // Keyboard shortcuts
          document.addEventListener('keydown', (e) => {
              // ESC to close modals
              if (e.key === 'Escape') {
                  if (authModal.classList.contains('active')) {
                      closeAuthModal();
                  }
                  if (customerPanelModal.classList.contains('active')) {
                      closeCustomerPanel();
                  }
              }
          });
     </script>
</body>
</html>
