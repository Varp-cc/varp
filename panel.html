<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self' https:;
    script-src 'self' 'unsafe-inline' https://www.gstatic.com https://cdnjs.cloudflare.com;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
    font-src 'self' https://fonts.gstatic.com;
    connect-src 'self' https://*.firebaseapp.com https://*.googleapis.com;
    frame-ancestors 'none';
    
">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="X-Content-Type-Options" content="nosniff">

    <title>VARP - Reseller Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Geologica:wght@100..900&family=Libertinus+Math&display=swap" rel="stylesheet">
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Users Grid */
.users-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 24px;
    margin-top: 32px;
}

.user-card {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border: 1px solid rgba(102, 126, 234, 0.15);
    border-radius: 20px;
    padding: 28px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2),
        0 6px 12px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(102, 126, 234, 0.1);
}

.user-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.user-card:hover::before {
    transform: scaleX(1);
}

.user-card:hover {
    transform: translateY(-6px);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3),
        0 12px 24px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(102, 126, 234, 0.3),
        0 8px 32px rgba(102, 126, 234, 0.2);
    border-color: rgba(102, 126, 234, 0.3);
}

.user-card-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
}

.user-card-avatar {
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 20px;
    color: white;
    position: relative;
}

.user-online-indicator {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 16px;
    height: 16px;
    background: #22c55e;
    border: 3px solid #1a1a33;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

.user-offline-indicator {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 16px;
    height: 16px;
    background: #64748b;
    border: 3px solid #1a1a33;
    border-radius: 50%;
}

.user-card-info h3 {
    font-size: 18px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 4px;
}

.user-card-info p {
    font-size: 14px;
    color: #64748b;
    font-family: 'Courier New', monospace;
}

.user-card-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 20px;
}

.user-stat {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 16px;
    text-align: center;
}

.user-stat-value {
    font-size: 20px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 4px;
}

.user-stat-label {
    font-size: 12px;
    color: #64748b;
    text-transform: uppercase;
    font-weight: 600;
}

.user-card-details {
    margin-bottom: 20px;
}

.user-detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.user-detail-row:last-child {
    border-bottom: none;
}

.user-detail-label {
    font-size: 13px;
    color: #64748b;
    font-weight: 500;
}

.user-detail-value {
    font-size: 13px;
    color: #ffffff;
    font-weight: 600;
}

.user-card-actions {
    display: flex;
    gap: 12px;
}

.user-action-btn {
    flex: 1;
    padding: 12px 16px;
    border: none;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.user-action-btn.balance {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
}

.user-action-btn.balance:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(34, 197, 94, 0.3);
}

.user-action-btn.delete {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #ef4444;
}

.user-action-btn.delete:hover {
    background: rgba(239, 68, 68, 0.2);
    transform: translateY(-2px);
}

.user-action-btn.view {
    background: rgba(102, 126, 234, 0.1);
    border: 1px solid rgba(102, 126, 234, 0.3);
    color: #667eea;
}

.user-action-btn.view:hover {
    background: rgba(102, 126, 234, 0.2);
    transform: translateY(-2px);
}


/* Napraw wszystkie select elementy */
select {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    border-radius: 8px !important;
    color: #ffffff !important;
    font-size: 14px !important;
    padding: 12px 16px !important;
    outline: none !important;
    cursor: pointer !important;
    width: 100% !important;
}

select:focus {
    border-color: #667eea !important;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2) !important;
}

/* Opcje w select */
select option {
    background: #1a1d29 !important;
    color: #ffffff !important;
    padding: 8px !important;
}

select option:hover {
    background: #667eea !important;
    color: #ffffff !important;
}

select option:checked {
    background: #667eea !important;
    color: #ffffff !important;
}

/* Specjalnie dla plan select√≥w */
#planUserSelect,
#planTypeSelect, 
#planProductSelect {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    border-radius: 8px !important;
    color: #ffffff !important;
    font-size: 14px !important;
    padding: 12px 16px !important;
}

#planUserSelect option,
#planTypeSelect option,
#planProductSelect option {
    background: #1a1d29 !important;
    color: #ffffff !important;
}

.loading-users {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: #64748b;
    text-align: center;
}

.loading-users .spinner {
    width: 48px;
    height: 48px;
    margin-bottom: 20px;
}
        body {
           font-family: 'Geologica', sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1d29 25%, #0f1419 50%, #1e2139 75%, #0a0e1a 100%);
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
                -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
        }
        
        body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    z-index: -1;
}
s
        /* Loading Screen */
        .loading-screen, .auth-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: linear-gradient(135deg, #0B0E11 0%, #1a1d29 50%, #16192a 100%);
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid rgba(102, 126, 234, 0.2);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Auth Screen */
        .auth-card {
            background: linear-gradient(145deg, #1a1d29 0%, #16192a 100%);
            padding: 48px;
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.4);
            width: 100%;
            max-width: 440px;
            backdrop-filter: blur(20px);
            text-align: center;
        }

        .auth-logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .auth-logo {
            width: 50px;
            height: 50px;
            background: url('https://media.discordapp.net/attachments/1320478095249248307/1320497026944729128/gdgdgfg.png?ex=687570b0&is=68741f30&hm=c6619c3b8122c87bfef27432da5d38ac8cae68aa201cbc6abd9c6d64d1c71390&') no-repeat center;
            background-size: cover;
        }

        .auth-brand-name {
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -0.02em;
        }

        .auth-subtitle {
            color: #64748b;
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 32px;
        }

        .form-group {
            margin-bottom: 24px;
            text-align: left;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #e2e8f0;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            color: #ffffff;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .hidden {
            display: none !important;
        }

        .error {
            color: #ef4444;
            font-size: 13px;
            margin-top: 6px;
            font-weight: 500;
        }

        /* Main App */
        .app-container {
            display: flex;
            height: 100vh;
            max-height: 100vh;
        }

      /* Enhanced Sidebar */
.sidebar {
    width: 240px;
    min-width: 240px;
    background: linear-gradient(180deg, 
        #1e1e3a 0%, 
        #1a1a33 30%, 
        #151528 70%, 
        #0f0f1f 100%
    );
    border-right: 1px solid rgba(102, 126, 234, 0.2);
    display: flex;
    flex-direction: column;
    box-shadow: 
        inset -3px 0 6px rgba(0, 0, 0, 0.3), 
        4px 0 12px rgba(0, 0, 0, 0.4),
        inset 1px 0 0 rgba(102, 126, 234, 0.1);
    position: relative;
    overflow: hidden;
}

.sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.5) 50%, 
        transparent 100%
    );
}

.sidebar-header {
    padding: 24px 20px;
    border-bottom: 1px solid rgba(102, 126, 234, 0.15);
    position: relative;
    background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.05) 0%, 
        transparent 50%
    );
}

.logo-container {
    display: flex;
    align-items: center;
    gap: 16px;
    position: relative;
    z-index: 2;
}

.logo-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}



.brand-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.logo-icon {
    width: 40px;
    height: 40px;
    background: url('https://media.discordapp.net/attachments/1320478095249248307/1320497026944729128/gdgdgfg.png?ex=687570b0&is=68741f30&hm=c6619c3b8122c87bfef27432da5d38ac8cae68aa201cbc6abd9c6d64d1c71390&') no-repeat center;
    background-size: cover;
    border-radius: 10px;
    position: relative;
    z-index: 2;
    border: 2px solid rgba(102, 126, 234, 0.3);
    box-shadow: 
        0 0 20px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
}



.brand-name {
    font-size: 24px;
    font-weight: 700;
    color: #ffffff;
    letter-spacing: -0.02em;
    text-shadow: 
        0 0 10px rgba(102, 126, 234, 0.5),
        0 2px 4px rgba(0, 0, 0, 0.3);
    position: relative;
}

/* Nowa animacja paska pod VARP */
.brand-name::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    transform: scaleX(0);
    transform-origin: left;
    animation: brandPulse 4s ease-in-out infinite;
}


@keyframes brandPulse {
    0%, 70%, 100% { 
        transform: scaleX(0);
        opacity: 0.5;
    }
    35% { 
        transform: scaleX(1);
        opacity: 1;
    }

}

.brand-subtitle {
    font-size: 11px;
    color: #94a3b8;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.8;
}

/* Nowa dekoracja pod header */
.sidebar-decoration {
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.1) 0%, 
        rgba(102, 126, 234, 0.6) 20%,
        rgba(118, 75, 162, 0.6) 80%,
        rgba(118, 75, 162, 0.1) 100%
    );
    opacity: 0.8;
}

/* Enhanced Navigation */
.nav-section {
    padding: 16px 0;
    flex: 1;
    position: relative;
}

.nav-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 20px;
    right: 20px;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.2) 50%, 
        transparent 100%
    );
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 20px;
    margin: 2px 8px;
    color: #94a3b8;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
    font-size: 14px;
    position: relative;
    border-radius: 10px;
    overflow: hidden;
}

.nav-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    transform: scaleY(0);
    transition: transform 0.3s ease;
    border-radius: 0 2px 2px 0;
}

.nav-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.1) 0%, 
        rgba(118, 75, 162, 0.1) 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 10px;
}

.nav-item:hover {
    color: #e2e8f0;
    transform: translateX(6px);
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.15) 0%, 
        rgba(102, 126, 234, 0.05) 100%
    );
    box-shadow: 
        0 4px 12px rgba(102, 126, 234, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.nav-item:hover::before {
    transform: scaleY(1);
}

.nav-item:hover::after {
    opacity: 1;
}

.nav-item.active {
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.25) 0%, 
        rgba(102, 126, 234, 0.1) 100%
    );
    color: #ffffff;
    border-left: 3px solid #667eea;
    box-shadow: 
        0 6px 16px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateX(4px);
}

.nav-item.active::before {
    transform: scaleY(1);
}

.nav-icon {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    position: relative;
    z-index: 2;
    transition: transform 0.3s ease;
}

.nav-item:hover .nav-icon {
    transform: scale(1.1);
}

.nav-item.active .nav-icon {
    transform: scale(1.15);
    filter: drop-shadow(0 0 8px rgba(102, 126, 234, 0.5));
}

/* Enhanced Footer */
.sidebar-footer {
    margin-top: auto;
    padding: 20px;
    border-top: 1px solid rgba(102, 126, 234, 0.15);
    background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.03) 0%, 
        transparent 50%
    );
    position: relative;
}

.sidebar-footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 20px;
    right: 20px;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.3) 50%, 
        transparent 100%
    );
}

.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 255, 255, 0.03) 100%
    );
    border-radius: 16px;
    margin-bottom: 16px;
    position: relative;
    border: 1px solid rgba(102, 126, 234, 0.2);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 4px 8px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(102, 126, 234, 0.1);
    overflow: hidden;
}

.user-info::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 20%;
    right: 20%;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.5) 50%, 
        transparent 100%
    );
}

.user-avatar {
    width: 38px;
    height: 38px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 16px;
    position: relative;
    box-shadow: 
        0 4px 12px rgba(102, 126, 234, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
}


.user-avatar:hover {
    transform: scale(1.05);
    box-shadow: 
        0 6px 16px rgba(102, 126, 234, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.online-status {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 14px;
    height: 14px;
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    border: 2px solid #1e1e2e;
    border-radius: 50%;
    box-shadow: 
        0 0 8px rgba(34, 197, 94, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    animation: statusPulse 2s ease-in-out infinite;
}


@keyframes statusPulse {
    0%, 100% { 
        transform: scale(1);
        opacity: 1;
    }
    50% { 
        transform: scale(1.1);
        opacity: 0.8;
    }

}

.user-details {
    flex: 1;
    min-width: 0;
}

.user-details .user-name {
    font-size: 15px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 2px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}


.user-details .user-email {
    font-size: 11px;
    color: #94a3b8;
    font-weight: 500;
    opacity: 0.9;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-details .user-plan {
    font-size: 10px;
    color: #667eea;
    font-weight: 600;
    margin-top: 3px;
    background: rgba(102, 126, 234, 0.15);
    padding: 2px 6px;
    border-radius: 4px;
    display: inline-block;
    border: 1px solid rgba(102, 126, 234, 0.3);
}

.logout-btn {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.15) 0%, 
        rgba(220, 38, 38, 0.1) 100%
    );
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 10px;
    color: #ef4444;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
    overflow: hidden;
}

.logout-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(239, 68, 68, 0.2), 
        transparent
    );
    transition: left 0.5s ease;
}

.logout-btn:hover::before {
    left: 100%;
}

.logout-btn:hover {
    background: linear-gradient(135deg, 
        rgba(239, 68, 68, 0.25) 0%, 
        rgba(220, 38, 38, 0.15) 100%
    );
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    border-color: rgba(239, 68, 68, 0.5);
}

        /* Main Content */
        .main-content {
            flex: 1;
            background: linear-gradient(135deg, #0f1419 0%, #1a1d29 50%, #0a0e1a 100%);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        .content-section {
            display: none;
            height: 100vh;
            max-height: 100vh;
            overflow: hidden;
        }

        .content-section.active {
            display: flex;
            flex-direction: column;
        }

        /* Dashboard Styles */
        .dashboard-container {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
            max-height: calc(100vh - 48px);
        }

        .dashboard-header {
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dashboard-subtitle {
            color: #64748b;
            font-size: 16px;
        }

        .last-update {
            text-align: right;
            font-size: 14px;
            color: #64748b;
        }

        .last-update-time {
            font-weight: 600;
            color: #22c55e;
        }

        /* Dashboard Tabs */
        .dashboard-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            background: rgba(255, 255, 255, 0.05);
            padding: 4px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .dashboard-tab {
            flex: 1;
            padding: 12px 16px;
            text-align: center;
            background: transparent;
            border: none;
            color: #64748b;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .dashboard-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .dashboard-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.08);
            color: #e2e8f0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
            border: 1px solid rgba(102, 126, 234, 0.15);
            border-radius: 20px;
            padding: 28px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2),
                0 6px 12px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(102, 126, 234, 0.1);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card:hover {
            transform: translateY(-6px);
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                inset 0 -1px 0 rgba(0, 0, 0, 0.3),
                0 12px 24px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(102, 126, 234, 0.3),
                0 8px 32px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .stat-label {
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }

        .status-indicator {
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-online {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .status-offline {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
        }

        /* Server Status Grid */
        .server-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .server-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }

        .server-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .server-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .server-name {
            font-weight: 600;
            color: #ffffff;
            font-size: 14px;
        }

        .ping-indicator {
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
        }

        .ping-excellent {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .ping-good {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
        }

        .ping-poor {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        /* User Details Card */
        .user-details-card {
            background: linear-gradient(145deg, #1e1e2e 0%, #181825 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .user-detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .user-detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #64748b;
            font-weight: 500;
            font-size: 14px;
        }

        .detail-value {
            color: #ffffff;
            font-weight: 600;
            font-size: 14px;
            font-family: 'Courier New', monospace;
        }

        /* Activity Timeline */
        .activity-timeline {
            background: linear-gradient(145deg, #1e1e2e 0%, #181825 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 0;
            border-left: 2px solid rgba(255, 255, 255, 0.1);
            margin-left: 12px;
            padding-left: 24px;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #667eea;
        }

        .timeline-time {
            color: #64748b;
            font-size: 12px;
            font-weight: 500;
            min-width: 60px;
        }

        .timeline-content {
            color: #e2e8f0;
            font-size: 14px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 32px;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .action-btn:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .action-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .action-text {
            font-weight: 600;
            color: #ffffff;
        }

        /* Products Layout */
.products-layout {
    display: flex;
    height: 100vh;
    max-height: 100vh;
}

.products-sidebar {
    width: 320px;
    min-width: 320px;
    background: linear-gradient(180deg, #1e1e3a 0%, #1a1a33 30%, #151528 70%, #0f0f1f 100%);
    border-right: 1px solid rgba(102, 126, 234, 0.2);
    display: flex;
    flex-direction: column;
    box-shadow: 
        inset -3px 0 6px rgba(0, 0, 0, 0.3), 
        4px 0 12px rgba(0, 0, 0, 0.4),
        inset 1px 0 0 rgba(102, 126, 234, 0.1);
    position: relative;
    overflow: hidden;
}

.products-sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.5) 50%, 
        transparent 100%
    );
}


.products-header {
    padding: 24px 20px;
    border-bottom: 1px solid rgba(102, 126, 234, 0.15);
    position: relative;
    background: linear-gradient(135deg, 
        rgba(102, 126, 234, 0.05) 0%, 
        transparent 50%
    );
}

.products-header::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.1) 0%, 
        rgba(102, 126, 234, 0.6) 20%,
        rgba(118, 75, 162, 0.6) 80%,
        rgba(118, 75, 162, 0.1) 100%
    );
    opacity: 0.8;
}

.products-title {
    font-size: 24px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
}

.products-filter {
    display: flex;
    align-items: center;
    gap: 12px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    border: 1px solid rgba(102, 126, 234, 0.2);
    border-radius: 12px;
    padding: 12px 16px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.products-filter::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
    transition: left 0.6s ease;
}

.products-filter:hover::before {
    left: 100%;
}

.products-filter:hover {
    background: linear-gradient(145deg, rgba(102, 126, 234, 0.15) 0%, rgba(102, 126, 234, 0.08) 100%);
    border-color: rgba(102, 126, 234, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
}

.products-filter svg {
    color: #667eea;
    filter: drop-shadow(0 0 4px rgba(102, 126, 234, 0.5));
    transition: transform 0.3s ease;
}

.products-filter:hover svg {
    transform: scale(1.1);
}


.products-list {
    flex: 1;
    padding: 0;
    overflow-y: auto;
    position: relative;
}

.products-list::before {
    content: '';
    position: absolute;
    top: 0;
    left: 20px;
    right: 20px;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.2) 50%, 
        transparent 100%
    );
}

.product-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 18px 20px;
    margin: 3px 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
}

.product-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(180deg, #22c55e 0%, #16a34a 100%);
    transform: scaleY(0);
    transition: transform 0.3s ease;
    border-radius: 0 2px 2px 0;
}

.product-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.1) 0%, 
        rgba(118, 75, 162, 0.1) 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 12px;
}

.product-item:hover {
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.15) 0%, 
        rgba(102, 126, 234, 0.05) 100%
    );
    transform: translateX(8px);
    box-shadow: 
        0 6px 16px rgba(102, 126, 234, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border-bottom-color: rgba(102, 126, 234, 0.2);
}

.product-item:hover::before {
    transform: scaleY(1);
}

.product-item:hover::after {
    opacity: 1;
}

 .product-item.active {
    background: linear-gradient(90deg, 
        rgba(102, 126, 234, 0.25) 0%, 
        rgba(102, 126, 234, 0.1) 100%
    );
    border-left: 4px solid #22c55e;
    box-shadow: 
        0 8px 20px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateX(6px);
}

.product-item.active::before {
    transform: scaleY(1);
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
}

.product-status-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    flex-shrink: 0;
    position: relative;
}

.product-status-dot.available {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    box-shadow: 
        0 0 12px rgba(34, 197, 94, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    animation: pulse 2s infinite;
}

.product-status-dot.unavailable {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    box-shadow: 
        0 0 12px rgba(245, 158, 11, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

@keyframes pulse {
    0%, 100% { 
        transform: scale(1);
        opacity: 1;
    }
    50% { 
        transform: scale(1.1);
        opacity: 0.8;
    }
}

.product-info h4 {
    font-size: 16px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 4px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    transition: color 0.3s ease;
}

.product-item:hover .product-info h4 {
    color: #e2e8f0;
}

.product-info p {
    font-size: 12px;
    color: #94a3b8;
    font-weight: 500;
    opacity: 0.9;
    transition: color 0.3s ease;
}

.product-item:hover .product-info p {
    color: #cbd5e1;
}

.product-item.active .product-info h4 {
    color: #ffffff;
    text-shadow: 0 0 8px rgba(102, 126, 234, 0.5);
}

.product-item.active .product-info p {
    color: #e2e8f0;
}
        /* Product Details */
.product-details {
    flex: 1;
    background: linear-gradient(135deg, #0f1419 0%, #1a1d29 50%, #0a0e1a 100%);
    display: flex;
    flex-direction: column;
    min-width: 0;
    overflow: hidden;
    min-height: 100vh;
    position: relative;
}

.product-details::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(102, 126, 234, 0.3) 50%, 
        transparent 100%
    );
}

.product-header {
    padding: 24px 28px;
    border-bottom: 1px solid rgba(102, 126, 234, 0.15);
    background: linear-gradient(145deg, #252544 0%, #1f1f38 100%);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2),
        0 4px 8px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
}

.product-header::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
    opacity: 0.8;
}
      .product-main-info {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 12px;
}

.product-icon {
    width: 72px;
    height: 72px;
    border-radius: 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    box-shadow: 
        0 12px 32px rgba(102, 126, 234, 0.4),
        inset 0 2px 0 rgba(255, 255, 255, 0.2),
        0 0 20px rgba(102, 126, 234, 0.3);
    position: relative;
    overflow: hidden;
}

.product-icon::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    animation: shine 3s infinite;
}

     @keyframes shine {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
}

.product-title {
    font-size: 28px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 6px;
    background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.product-description {
    color: #94a3b8;
    font-size: 15px;
    font-weight: 500;
}


        .product-status-badge {
            margin-left: auto;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .product-status-badge.available {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }



.product-status-badge.available {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.1) 100%);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.4);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2);
    padding: 10px 20px; /* ZWIƒòKSZ z 8px 16px */
    font-size: 15px; /* ZWIƒòKSZ z 13px */
}


        .product-body {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            max-height: calc(100vh - 140px);
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 32px;
        }

        .variants-section {
            margin-bottom: 0;
        }

        .payment-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px;
            height: fit-content;
            position: sticky;
            top: 0;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .payment-method {
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .payment-method:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .payment-method.selected {
            background: rgba(102, 126, 234, 0.15);
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .payment-method-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }

        .payment-method-info {
            flex: 1;
        }

        .payment-method .method-name {
            font-weight: 600;
            color: #ffffff;
            font-size: 15px;
            margin-bottom: 4px;
        }

        .payment-method .method-fee {
            font-size: 12px;
            color: #64748b;
        }

        .purchase-btn {
            width: 100%;
            padding: 18px 28px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 6px 12px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        }

        .purchase-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.8s ease-in-out;
            transform: skewX(-20deg);
        }

        .purchase-btn:hover::before {
            left: 100%;
        }

        .purchase-btn:hover {
            transform: translateY(-3px);
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
            box-shadow: 
                0 12px 24px rgba(102, 126, 234, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(0, 0, 0, 0.3),
                0 0 20px rgba(124, 58, 237, 0.4);
        }

        .purchase-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .purchase-btn:disabled::before {
            display: none;
        }

        .purchase-btn-icon {
            transition: transform 0.3s ease;
        }

        .purchase-btn:hover .purchase-btn-icon {
            transform: scale(1.1);
        }

        .balance-info {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            margin-bottom: 24px;
        }

        .balance-amount {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }

        .balance-label {
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
        }

        .total-section {
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            padding-top: 16px;
            margin-bottom: 24px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            color: #e2e8f0;
        }

        .total-row.final {
            font-size: 18px;
            font-weight: 700;
            color: #ffffff;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            padding-top: 12px;
            margin-top: 12px;
        }

        .purchase-btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .purchase-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }

        .purchase-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Orders Table */
        .orders-container {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
            max-height: calc(100vh - 48px);
        }

        .section-header {
            margin-bottom: 32px;
        }

.section-title {
    font-size: 20px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 20px;
    padding-left: 16px; /* ZMIE≈É z 28px na 16px */
    padding-top: 24px;
    position: relative;
}
        .section-title-main {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            color: #64748b;
            font-size: 16px;
        }

        .table-container {
            background: linear-gradient(145deg, #1e1e2e 0%, #181825 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            overflow: hidden;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }



/* Bundle Styles */
.bundles-section {
    margin-top: 32px;
}

.bundles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); /* jeszcze mniejsze dla 3 packs */
    gap: 8px;
    margin-top: 16px;
}

.bundle-item {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 8px;
    border-radius: 8px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 4px 8px rgba(0, 0, 0, 0.2);
}

.bundle-item.beginner {
    border-color: rgba(63, 86, 148, 0.4); /* #3F5694 */
    background: linear-gradient(145deg, #2a2e44 0%, #22263a 100%);
    box-shadow: 
        inset 0 1px 0 rgba(63, 86, 148, 0.1),
        0 4px 12px rgba(63, 86, 148, 0.2);
}

.bundle-item.popular {
    border-color: rgba(65, 63, 133, 0.4); /* #413F85 */
    background: linear-gradient(145deg, #2e2d44 0%, #26253a 100%);
    box-shadow: 
        inset 0 1px 0 rgba(65, 63, 133, 0.1),
        0 4px 12px rgba(65, 63, 133, 0.2);
}

.bundle-item.limited {
    border-color: rgba(65, 47, 97, 0.4); /* #412F61 */
    background: linear-gradient(145deg, #2e2844 0%, #26223a 100%);
    box-shadow: 
        inset 0 1px 0 rgba(65, 47, 97, 0.1),
        0 4px 12px rgba(65, 47, 97, 0.2);
}

.bundle-item:hover {
    transform: translateY(-2px);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 8px 16px rgba(0, 0, 0, 0.3);
}

.bundle-item.beginner:hover {
    box-shadow: 
        inset 0 1px 0 rgba(63, 86, 148, 0.2),
        0 8px 20px rgba(63, 86, 148, 0.3);
}

.bundle-item.popular:hover {
    box-shadow: 
        inset 0 1px 0 rgba(65, 63, 133, 0.2),
        0 8px 20px rgba(65, 63, 133, 0.3);
}

.bundle-item.limited:hover {
    box-shadow: 
        inset 0 1px 0 rgba(65, 47, 97, 0.2),
        0 8px 20px rgba(65, 47, 97, 0.3);
}

.bundle-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 6px;
}

.bundle-tag {
    background: linear-gradient(135deg, #FFB6C1 0%, #FF91A4 100%);
    color: #2a1f2a;
    padding: 2px 5px;
    font-size: 7px;
    border-radius: 5px;
    font-weight: 700;
    text-transform: uppercase;
    box-shadow: 0 2px 4px rgba(255, 182, 193, 0.3);
}

.bundle-tag.beginner {
    background: linear-gradient(135deg, #3F5694 0%, #2d4070 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(63, 86, 148, 0.3);
}

.bundle-tag.popular {
    background: linear-gradient(135deg, #413F85 0%, #2d2b61 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(65, 63, 133, 0.3);
}

.bundle-tag.limited {
    background: linear-gradient(135deg, #412F61 0%, #2d2144 100%);
    color: white;
    box-shadow: 0 2px 4px rgba(65, 47, 97, 0.3);
}

.bundle-info h4 {
    font-size: 10px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 1px;
}

.bundle-info p {
    font-size: 8px;
    color: #64748b;
}

.bundle-products {
    margin: 6px 0;
}

.bundle-product {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1px 0;
    font-size: 8px;
    color: #e2e8f0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.bundle-product:last-child {
    border-bottom: none;
}

.bundle-product-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 6px;
}

.bundle-product-price {
    text-decoration: line-through;
    color: #64748b;
    font-size: 8px;
}

.bundle-pricing {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 6px 0;
    padding-top: 6px;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.bundle-discount {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
    border-radius: 5px;
    padding: 2px 5px;
    font-size: 8px;
    font-weight: 700;
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3);
}

.bundle-prices {
    text-align: right;
}

.bundle-original-price {
    font-size: 9px;
    color: #64748b;
    text-decoration: line-through;
    line-height: 1;
}

.bundle-final-price {
    font-size: 11px;
    font-weight: 700;
    color: #ffffff;
    line-height: 1;
}

.bundle-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 6px;
}

.bundle-quantity-control {
    display: flex;
    align-items: center;
    gap: 6px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 6px;
    padding: 3px 6px;
}

.bundle-quantity-btn {
    width: 20px;
    height: 20px;
    border: none;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 3px;
    cursor: pointer;
    font-weight: 700;
    font-size: 12px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
}

.bundle-quantity-btn:hover {
    background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(102, 126, 234, 0.4);
}

.bundle-quantity-display {
    min-width: 14px;
    text-align: center;
    font-weight: 700;
    color: #ffffff;
    font-size: 10px;
    background: rgba(102, 126, 234, 0.2);
    padding: 3px 5px;
    border-radius: 3px;
    border: 1px solid rgba(102, 126, 234, 0.3);
}

.time-remaining {
    color: #C4B5FD;
    font-size: 8px;
    font-weight: 600;
    text-align: center;
    background: rgba(196, 181, 253, 0.1);
    padding: 2px 4px;
    border-radius: 3px;
    border: 1px solid rgba(196, 181, 253, 0.2);
}

@media (max-width: 768px) {
    .bundles-grid {
        grid-template-columns: 1fr;
        gap: 6px;
    }
}

@media (min-width: 769px) and (max-width: 1200px) {
    .bundles-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 6px;
    }
}

@media (min-width: 1201px) {
    .bundles-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
    }
}


.section-title::before {
    content: '';
    position: absolute;
    left: 0;
    top: 72%; /* ZMIE≈É z 50% na 55% - ni≈ºej */
    transform: translateY(-50%);
    width: 4px;
    height: 35px; /* ZWIƒòKSZ z 28px na 35px - d≈Çu≈ºsza */
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    border-radius: 2px;
    box-shadow: 0 0 8px rgba(102, 126, 234, 0.4);
}

.variant-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 28px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    margin: 16px 28px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.variant-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
    transition: left 0.6s ease;
}

.variant-item:hover::before {
    left: 100%;
}


.variant-item:hover {
    background: linear-gradient(145deg, rgba(102, 126, 234, 0.15) 0%, rgba(102, 126, 234, 0.08) 100%);
    border-color: rgba(102, 126, 234, 0.3);
    transform: translateY(-4px);
    box-shadow: 
        0 12px 32px rgba(102, 126, 234, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.variant-info {
    flex: 1;
    z-index: 2;
    position: relative;
}

.variant-name {
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 8px;
    font-size: 18px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.variant-price-container {
    display: flex;
    align-items: center;
    gap: 12px;
}

.original-price {
    text-decoration: line-through;
    color: #64748b;
    font-size: 14px;
    margin-right: 4px;
    opacity: 0.8;
}

.variant-controls {
    z-index: 2;
    position: relative;
}


.discounted-price, .variant-price {
    color: #22c55e;
    font-weight: 700;
    font-size: 16px;
    text-shadow: 0 0 8px rgba(34, 197, 94, 0.3);
}

.quantity-control {
    display: flex;
    align-items: center;
    gap: 16px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    padding: 8px 12px;
    backdrop-filter: blur(10px);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 4px 8px rgba(0, 0, 0, 0.2);
}


.quantity-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 700;
    font-size: 20px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 
        0 4px 12px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
}


.quantity-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.quantity-btn:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 
        0 8px 20px rgba(102, 126, 234, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}


.quantity-btn:hover::before {
    opacity: 1;
}

.quantity-btn:active {
    transform: translateY(0) scale(0.95);
}


.quantity-display {
    min-width: 40px;
    text-align: center;
    font-weight: 700;
    color: #ffffff;
    font-size: 18px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(102, 126, 234, 0.1) 100%);
    padding: 10px 16px;
    border-radius: 10px;
    border: 1px solid rgba(102, 126, 234, 0.3);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 2px 4px rgba(0, 0, 0, 0.2);
}

        .table th {
            background: rgba(255, 255, 255, 0.05);
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: #e2e8f0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .table td {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: #ffffff;
        }

        .table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .order-id {
            font-family: 'Courier New', monospace;
            background: rgba(102, 126, 234, 0.1);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .order-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-completed {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
        }

        /* Keys Table */
        .key-value {
            font-family: 'Courier New', monospace;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .reset-btn {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: translateY(-1px);
        }

/* Znajd≈∫ w CSS sekcjƒô .empty-state i zmie≈Ñ na: */

.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    min-height: 400px; /* DODAJ tƒô liniƒô */
    text-align: center;
    color: #64748b;
    padding: 40px 20px; /* DODAJ padding */
}




        .empty-icon {
            width: 64px;
            height: 64px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-size: 24px;
        }

        .empty-state h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #e2e8f0;
        }

        .empty-state p {
            font-size: 14px;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.5);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.7);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            
            .server-grid {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }
            
            .product-body {
                grid-template-columns: 1fr 350px;
                gap: 24px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
                min-width: 200px;
            }
            
            .products-sidebar {
                width: 280px;
                min-width: 280px;
            }
            
            .dashboard-tabs {
                flex-direction: column;
            }
            
            .product-body {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .payment-section {
                position: static;
            }
        }


        /* Animacja b≈Çƒôdu balansu */
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
    20%, 40%, 60%, 80% { transform: translateX(4px); }
}

@keyframes colorPulse {
    0% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    50% { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
    100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
}

.purchase-btn.error {
    animation: shake 0.6s ease-in-out, colorPulse 1.2s ease-in-out;
}

.purchase-btn.insufficient-balance {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    cursor: not-allowed;
}



/* Modal niewystarczajƒÖcego balansu */
.balance-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.3s ease;
    backdrop-filter: blur(5px);
}

.balance-modal.show {
    opacity: 1;
}

.balance-modal-content {
    background: linear-gradient(145deg, #1a1d29 0%, #16192a 100%);
    border-radius: 20px;
    padding: 32px;
    max-width: 400px;
    width: 90%;
    border: 1px solid rgba(239, 68, 68, 0.3);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.balance-modal.show .balance-modal-content {
    transform: scale(1);
}

.balance-modal-header h3 {
    color: #ef4444;
    margin-bottom: 16px;
    font-size: 20px;
    text-align: center;
}

.balance-modal-body {
    text-align: center;
    margin-bottom: 24px;
    color: #e2e8f0;
    line-height: 1.6;
}

.balance-modal-actions {
    display: flex;
    gap: 12px;
}

.modal-btn {
    flex: 1;
    padding: 12px 20px;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.modal-btn.add-funds {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
}

.modal-btn.add-funds:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(34, 197, 94, 0.3);
}

.modal-btn.close {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e2e8f0;
}

.modal-btn.close:hover {
    background: rgba(255, 255, 255, 0.2);
}




/* Modal administratora */
.admin-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.3s ease;
    backdrop-filter: blur(8px);
}

.admin-modal.show {
    opacity: 1;
}

.admin-modal-content {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border-radius: 20px;
    padding: 32px;
    max-width: 450px;
    width: 90%;
    border: 1px solid rgba(102, 126, 234, 0.3);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.admin-modal.show .admin-modal-content {
    transform: scale(1);
}

.admin-modal-header {
    text-align: center;
    margin-bottom: 24px;
}

.admin-modal-header h3 {
    color: #667eea;
    margin-bottom: 12px;
    font-size: 22px;
}

.admin-modal-header p {
    color: #e2e8f0;
    margin-bottom: 8px;
}

.balance-input-group {
    margin-bottom: 20px;
}

.balance-input-group label {
    display: block;
    color: #e2e8f0;
    font-weight: 600;
    margin-bottom: 8px;
}

.balance-input-group input {
    width: 100%;
    padding: 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    color: #ffffff;
    font-size: 16px;
    font-weight: 600;
    text-align: center;
}

.balance-input-group input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.balance-actions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 20px;
}

.balance-action-btn {
    padding: 14px 16px;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.balance-action-btn.add {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
}

.balance-action-btn.add:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(34, 197, 94, 0.4);
}

.balance-action-btn.subtract {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
}

.balance-action-btn.subtract:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
}

.admin-modal-footer {
    text-align: center;
}


/* Balance Content Styles */
.payment-methods-section,
.amount-selection-section {
    margin-bottom: 32px;
}

.payment-methods-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
}

.payment-method-card {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border: 2px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 24px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.payment-method-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.payment-method-card:hover::before,
.payment-method-card.selected::before {
    transform: scaleX(1);
}

.payment-method-card:hover,
.payment-method-card.selected {
    border-color: #667eea;
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
}

.payment-method-card .payment-method-icon {
    margin-bottom: 16px;
}

.payment-method-card .method-name {
    font-size: 18px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 4px;
}

.payment-method-card .method-subtitle {
    font-size: 14px;
    color: #64748b;
    margin-bottom: 8px;
}

.payment-method-card .method-fee {
    font-size: 12px;
    font-weight: 600;
    color: #22c55e;
    background: rgba(34, 197, 94, 0.1);
    padding: 4px 8px;
    border-radius: 6px;
    display: inline-block;
}

.custom-amount-input {
    margin-bottom: 24px;
}

.custom-amount-input label {
    display: block;
    color: #e2e8f0;
    font-weight: 600;
    margin-bottom: 8px;
}

.custom-amount-input input {
    width: 100%;
    max-width: 300px;
    padding: 16px 20px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    color: #ffffff;
    font-size: 18px;
    font-weight: 600;
    text-align: center;
}

.custom-amount-input input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.preset-amounts {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
}

.preset-amount-card {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border: 2px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.preset-amount-card.popular {
    border-color: #f59e0b;
    background: linear-gradient(145deg, #451a03 0%, #78350f 100%);
}

.preset-amount-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
}

.preset-amount-card.selected {
    border-color: #667eea;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
}

.preset-amount-value {
    font-size: 32px;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 8px;
}

.discount-tag {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 8px;
    transform: rotate(-5deg);
}

.discount-tag.popular {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
}

.preset-amount-subtitle {
    color: #64748b;
    font-size: 14px;
}

.popular-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    padding: 6px 16px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    transform: rotate(15deg);
}

.balance-calculation-summary {
    background: linear-gradient(145deg, #1e1e2e 0%, #181825 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 24px;
}

.calculation-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    color: #e2e8f0;
}

.calculation-row.total {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 12px;
    margin-top: 12px;
    font-size: 18px;
    font-weight: 700;
    color: #ffffff;
}

.balance-purchase-btn {
    width: 100%;
    padding: 18px 24px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.balance-purchase-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
}

.balance-purchase-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

/* Payment Instructions Modal */
.payment-instructions-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.3s ease;
    backdrop-filter: blur(8px);
}

.payment-instructions-modal.show {
    opacity: 1;
}

.payment-instructions-content {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border-radius: 20px;
    padding: 32px;
    max-width: 500px;
    width: 90%;
    border: 1px solid rgba(102, 126, 234, 0.3);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.payment-instructions-modal.show .payment-instructions-content {
    transform: scale(1);
}

.payment-instructions-header {
    text-align: center;
    margin-bottom: 24px;
}

.payment-instructions-header h3 {
    color: #667eea;
    font-size: 24px;
    margin-bottom: 8px;
}

.payment-amount {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
    padding: 12px 24px;
    border-radius: 12px;
    font-size: 24px;
    font-weight: 700;
    display: inline-block;
}

.payment-details {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
}

.payment-detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.payment-detail-item:last-child {
    margin-bottom: 0;
}

.payment-detail-label {
    color: #64748b;
    font-weight: 500;
}

.payment-detail-value {
    color: #ffffff;
    font-family: 'Courier New', monospace;
    font-weight: 600;
    background: rgba(102, 126, 234, 0.1);
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.payment-detail-value:hover {
    background: rgba(102, 126, 234, 0.2);
}

.discord-section {
    text-align: center;
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.discord-btn {
    background: #5865f2;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
}

.discord-btn:hover {
    background: #4752c4;
    transform: translateY(-2px);
}

.close-instructions-btn {
    width: 100%;
    padding: 12px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    color: #e2e8f0;
    cursor: pointer;
    margin-top: 16px;
}


/* Custom Input Card */
.custom-input-card {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%) !important;
    border: 2px solid rgba(102, 126, 234, 0.3) !important;
    cursor: default !important;
    display: flex;
    align-items: center;
    justify-content: center;
}

.custom-input-card:hover {
    transform: none !important;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3) !important;
}

.custom-amount-input-inline {
    width: 100%;
    text-align: center;
}

.custom-amount-input-inline label {
    display: block;
    color: #e2e8f0;
    font-weight: 600;
    margin-bottom: 12px;
    font-size: 16px;
}

.custom-amount-input-inline input {
    width: 100%;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 8px;
    color: #ffffff;
    font-size: 24px;
    font-weight: 700;
    text-align: center;
}

.custom-amount-input-inline input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.custom-amount-input-inline input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

/* Proste tagi rabatowe */
.discount-tag-simple {
    background: #22c55e;
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 8px;
}

/* Ukryj stare elementy */
.discount-tag {
    display: none !important;
}

.popular-badge {
    display: none !important;
}

/* Usu≈Ñ stare style custom-amount-input */
.custom-amount-input {
    display: none !important;
}






/* HWID Reset Cards - Compact */
.hwid-reset-card {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
    transition: all 0.3s ease;
}

.hwid-reset-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    border-color: rgba(102, 126, 234, 0.3);
}

.hwid-reset-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.hwid-reset-avatar {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.hwid-reset-info h4 {
    color: #ffffff;
    font-size: 14px;
    font-weight: 600;
    margin: 0 0 2px 0;
}

.hwid-reset-info p {
    color: #64748b;
    font-size: 12px;
    margin: 0;
}

.hwid-reset-details {
    margin-bottom: 12px;
}

.hwid-reset-detail {
    display: flex;
    justify-content: space-between;
    padding: 4px 0;
    font-size: 12px;
}

.hwid-reset-detail-label {
    color: #64748b;
}

.hwid-reset-detail-value {
    color: #ffffff;
    font-weight: 500;
}

.hwid-reset-actions {
    display: flex;
    gap: 8px;
}

.hwid-action-btn {
    flex: 1;
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.hwid-action-btn.accept {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
}

.hwid-action-btn.accept:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(34, 197, 94, 0.3);
}

.hwid-action-btn.decline {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #ef4444;
}

.hwid-action-btn.decline:hover {
    background: rgba(239, 68, 68, 0.2);
    transform: translateY(-1px);
}




/* Addon Styles */
.addon-card {
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border: 1px solid rgba(102, 126, 234, 0.15);
    border-radius: 20px;
       padding: 24px; /* zostaw 24px */
    min-height: 400px; /* ZMIE≈É z 320px na 400px */
    max-height: none; /* USU≈É max-height */
    display: flex;
    flex-direction: column; 
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2),
        0 6px 12px rgba(0, 0, 0, 0.3);
}

.addon-card:hover {
    transform: translateY(-4px);
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3),
        0 12px 24px rgba(0, 0, 0, 0.4),
        0 8px 32px rgba(102, 126, 234, 0.2);
}

.addon-header {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 20px;
    flex-shrink: 0;
}

.addon-icon {
    width: 48px; /* ZMIE≈É z 64px na 48px */
    height: 48px; /* ZMIE≈É z 64px na 48px */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
}

.addon-info h3 {
    font-weight: 700;
    color: #ffffff;
    font-size: 20px; /* ZMIE≈É z 24px na 20px */
    margin-bottom: 6px;
}

.addon-info {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.addon-info p {
    flex: 1;
    margin-bottom: 16px;
}

.addon-price {
  font-size: 24px;
    font-weight: 700;
    color: #22c55e;
    margin-top: 8px;
}

.product-selector {
    margin-bottom: 24px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.08);
        margin: 20px 0;
    flex-shrink: 0;
}

.product-selector label {
    display: block;
    color: #e2e8f0;
    font-weight: 600;
    margin-bottom: 8px;
}

.product-selector select {
    width: 100%;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 8px;
    color: #ffffff;
    font-size: 16px;
    margin-bottom: 12px;
}

.addon-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 12px;
    margin-bottom: 32px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 12px;
}

.feature-item {
    color: #e2e8f0;
    font-size: 14px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
}

.feature-item::before {
    content: '';
    width: 16px;
    height: 16px;
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    border-radius: 50%;
    flex-shrink: 0;
}

.addon-purchase-btn {
    width: 100%;
    padding: 18px 28px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        margin-top: auto;
    flex-shrink: 0;
}

.addons-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 32px; /* ZWIƒòKSZ z 24px na 32px */
    max-width: 1400px; /* ZWIƒòKSZ z 1200px na 1400px */
    margin: 0 auto;
}

.addon-purchase-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.5);
}

.addon-purchase-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}


/* Plan Price Styles */
.variant-price-container {
    display: flex;
    align-items: center; /* ZMIE≈É z flex-direction: column na align-items: center */
    gap: 8px; /* ZWIƒòKSZ gap z 4px na 8px */
}

.original-price {
    text-decoration: line-through;
    color: #64748b;
    font-size: 12px;
    margin-right: 4px; /* DODAJ margin-right */
}

.discounted-price {
    color: #22c55e;
    font-weight: 700;
    font-size: 14px;
    /* USU≈É margin-top je≈õli istnieje */
}

.plan-badge {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    display: none; /* DODAJ Tƒò LINIƒò */
    margin-top: 4px;
}

.user-plan {
    background: rgba(102, 126, 234, 0.15);
    border: 1px solid rgba(102, 126, 234, 0.3);
    border-radius: 4px;
    padding: 2px 6px;
    text-align: center;
}


/* DODAJ NA KO≈ÉCU SEKCJI ADDON STYLES: */
@media (max-width: 1024px) {
    div[style*="grid-template-columns: repeat(2, 1fr)"] {
        grid-template-columns: 1fr;
    }
}



/* Purchase Section */
/* Purchase Section */
.purchase-section {
    margin: 32px 28px 28px 28px;
    background: linear-gradient(145deg, #252544 0%, #1a1a33 100%);
    border: 1px solid rgba(102, 126, 234, 0.15);
    border-radius: 20px;
    padding: 28px;
    box-shadow: 
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 8px 24px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(102, 126, 234, 0.1);
    position: relative;
    overflow: hidden;
}

.purchase-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
    opacity: 0.8;
}

.purchase-info-grid {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 28px;
    align-items: center;
}

.purchase-info-left {
    width: 280px;
    display: flex;
    gap: 40px;
    align-items: center;
}

.purchase-info-right {
    flex: 1; /* Zajmij resztƒô miejsca */
    display: flex;
    justify-content: flex-end;
}

.purchase-info-item {
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 0;
}

.purchase-info-label {
    font-size: 12px;
    font-weight: 700;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 1px;
}


.purchase-info-value {
    font-size: 20px;
    font-weight: 700;
    color: #ffffff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
}
.purchase-info-right {
    display: flex;
    justify-content: flex-end;
}


.purchase-info-right .purchase-btn {
    width: 100%;
    padding: 20px 32px;
    min-height: 60px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #ffffff;
    border: none;
    border-radius: 16px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 
        0 8px 24px rgba(102, 126, 234, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

.purchase-info-right .purchase-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
    transform: skewX(-20deg);
}

.purchase-info-right .purchase-btn:hover::before {
    left: 100%;
}



.purchase-info-right .purchase-btn:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 
        0 16px 40px rgba(102, 126, 234, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
}

.purchase-info-right .purchase-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    background: rgba(255, 255, 255, 0.1);
}

.purchase-info-right .purchase-btn:active:not(:disabled) {
    transform: translateY(-1px);
}



/* Enhanced Payment Instructions */
.payment-instructions-content.enhanced {
    max-width: 550px;
    width: 90%;
}

.payment-details.enhanced {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 24px;
    margin: 20px 0;
}

.crypto-payment-row {
    display: flex;
    align-items: center;
    margin-bottom: 16px;
    gap: 16px;
}

.crypto-payment-row:last-child {
    margin-bottom: 0;
}

.crypto-label {
    color: #94a3b8;
    font-weight: 600;
    font-size: 13px;
    min-width: 100px;
    text-align: right;
    flex-shrink: 0;
}

.crypto-address-box {
    flex: 1;
    font-family: 'Courier New', monospace;
    font-size: 11px;
    line-height: 1.3;
    color: #ffffff;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(102, 126, 234, 0.05) 100%);
    border: 1px solid rgba(102, 126, 234, 0.2);
    border-radius: 8px;
    padding: 12px 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    word-break: break-all;
    position: relative;
    overflow: hidden;
}

.crypto-address-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s ease;
}

.crypto-address-box:hover::before {
    left: 100%;
}

.crypto-address-box:hover {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.25) 0%, rgba(102, 126, 234, 0.1) 100%);
    border-color: rgba(102, 126, 234, 0.4);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.crypto-address-box:active {
    transform: translateY(0);
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.1) 100%);
    border-color: rgba(34, 197, 94, 0.4);
}

/* Smaller Discord section */
.discord-section {
    text-align: center;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.discord-btn {
    background: #5865f2;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    font-size: 13px;
}

.discord-btn:hover {
    background: #4752c4;
    transform: translateY(-2px);
}

.close-instructions-btn {
    width: 100%;
    padding: 10px;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 8px;
    color: #e2e8f0;
    cursor: pointer;
    margin-top: 16px;
    font-size: 13px;
    transition: all 0.3s ease;
}

.close-instructions-btn:hover {
    background: rgba(255, 255, 255, 0.12);
}

/* Responsive */
@media (max-width: 768px) {
    .purchase-info-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    
    .purchase-info-left {
        justify-content: space-between;
        gap: 16px;
    }
    
    .purchase-info-right {
        justify-content: center;
    }
}


/* Copy Button Styles */
.copy-key-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.copy-key-btn:hover {
    background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
}

.copy-key-btn:active {
    transform: translateY(0);
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
}

.key-value-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.key-value {
    font-family: 'Courier New', monospace;
    background: rgba(255, 255, 255, 0.05);
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
}

    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">Initializing VARP</h2>
            <p style="color: #64748b; font-size: 15px;">Connecting to Firebase...</p>
        </div>
    </div>

    <!-- Auth Screen -->
    <div id="authScreen" class="auth-screen hidden">
        <div class="auth-card">
            <div class="auth-logo-container">
                <div class="auth-logo"></div>
                <div class="auth-brand-name">VARP</div>
            </div>
            <p class="auth-subtitle">Reseller Panel</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="email" placeholder="your@email.com" required>
                    <div id="emailError" class="error" style="display: none;"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    <div id="passwordError" class="error" style="display: none;"></div>
                </div>
                
                <button type="submit" class="btn" id="authBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10,17V14H3V10H10V7L15,12L10,17Z" />
                    </svg>
                    Sign In
                </button>
                
                <div id="authMessage" class="error" style="display: none;"></div>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="app-container hidden">
        <!-- Sidebar -->
        <div class="sidebar">
<div class="sidebar-header">
    <div class="logo-container">
        <div class="logo-wrapper">
            <div class="logo-icon"></div>
            <div class="logo-glow"></div>
        </div>
        <div class="brand-info">
            <div class="brand-name">VARP</div>
            <div class="brand-subtitle">Reseller Panel</div>
        </div>
    </div>
    <div class="sidebar-decoration"></div>
</div>
            
            <div class="nav-section">
                <div class="nav-item active" id="dashboardNav">
                    <div class="nav-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
                        </svg>
                    </div>
                    Dashboard
                </div>

                <div class="nav-item" id="balanceNav">
                    <div class="nav-icon">
                         <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                             <path d="M17.8 21.2L15 18.2L16.2 17L17.8 18.6L21.4 15L22.6 16.4L17.8 21.2M13 10H10V17H12.1C12.2 16.2 12.6 15.4 13 14.7V10M16 10V12.3C16.6 12.1 17.3 12 18 12C18.3 12 18.7 12 19 12.1V10H16M12.1 19H2V22H13.5C12.8 21.2 12.3 20.1 12.1 19M21 6L11.5 1L2 6V8H21V6M7 17V10H4V17H7Z"/>
                      </svg>
                    </div>
                    Balance
                </div>

                
                <div class="nav-item" id="productsNav">
                    <div class="nav-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18M16,11L18.78,6H6.14L8.5,11H16Z"/>
                        </svg>
                    </div>
                    Products
                </div>
                
                <div class="nav-item" id="ordersNav">
                    <div class="nav-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C11.8 2 11.6 2.1 11.4 2.2L3.5 6.6C3.2 6.8 3 7.1 3 7.5V16.5C3 16.9 3.2 17.2 3.5 17.4L11.4 21.8C11.6 21.9 11.8 22 12 22S12.4 21.9 12.6 21.8L13.5 21.3C13.2 20.7 13.1 20 13 19.3V12.6L19 9.2V13C19.7 13 20.4 13.1 21 13.3V7.5C21 7.1 20.8 6.8 20.5 6.6L12.6 2.2C12.4 2.1 12.2 2 12 2M12 4.2L18 7.5L16 8.6L10.1 5.2L12 4.2M8.1 6.3L14 9.8L12 10.9L6 7.5L8.1 6.3M5 9.2L11 12.6V19.3L5 15.9V9.2M21.3 15.8L17.7 19.4L16.1 17.8L15 19L17.8 22L22.6 17.2L21.3 15.8Z"/>
                        </svg>
                    </div>
                    Orders
                </div>
                
                <div class="nav-item" id="keysNav">
                    <div class="nav-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22,18V22H18V19H15V16H12L9.74,13.74C9.19,13.91 8.61,14 8,14A6,6 0 0,1 2,8A6,6 0 0,1 8,2A6,6 0 0,1 14,8C14,8.61 13.91,9.19 13.74,9.74L22,18M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5ZD"/>
                        </svg>
                    </div>
                    Keys
                </div>
                

<div class="nav-item" id="addonsNav">
    <div class="nav-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4C2.89,5 2,5.89 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20C2,21.11 2.89,22 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17C18.11,22 19,21.11 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z"/>
        </svg>
    </div>
    Addons
</div>
                <div class="nav-item" id="settingsNav">
                    <div class="nav-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                        </svg>
                    </div>
                    Settings
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">
                        V
                        <div class="online-status"></div>
                    </div>
<div class="user-details">
    <div class="user-name" id="userName">Loading...</div>
    <div class="user-email" id="userEmailDisplay">...</div>
</div>
</div>

<div class="user-plan" id="userPlanDisplay" style="width: 100%; font-size: 12px; color: #667eea; font-weight: 600; margin-bottom: 16px; padding: 6px 10px; background: rgba(102, 126, 234, 0.15); border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 6px; text-align: center;">Loading...</div>

<button class="logout-btn" id="logoutBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z" />
                    </svg>
                    Logout
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Content -->
            <div id="dashboardContent" class="content-section active">
                <div class="dashboard-container">
                    <div class="dashboard-header">
                        <div>
                            <h1 class="dashboard-title">Dashboard</h1>
                            <p class="dashboard-subtitle">Overview of your reseller activity and system status</p>
                        </div>
                        <div class="last-update">
                            <div>Last Update</div>
                            <div class="last-update-time">15.07.2025 09:00PM</div>
                        </div>
                    </div>

                    <!-- Dashboard Tabs -->
                    <div class="dashboard-tabs">
                        <button class="dashboard-tab active" onclick="showDashboardTab('overview')">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22,18V22H18V19H15V16H12L9.74,13.74C9.19,13.91 8.61,14 8,14A6,6 0 0,1 2,8A6,6 0 0,1 8,2A6,6 0 0,1 14,8C14,8.61 13.91,9.19 13.74,9.74L22,18M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5Z"/>
                            </svg>
                            Balance & Keys
                        </button>
                        <button class="dashboard-tab" onclick="showDashboardTab('servers')">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M4,1H20A1,1 0 0,1 21,2V6A1,1 0 0,1 20,7H4A1,1 0 0,1 3,6V2A1,1 0 0,1 4,1M4,9H20A1,1 0 0,1 21,10V14A1,1 0 0,1 20,15H4A1,1 0 0,1 3,14V10A1,1 0 0,1 4,9M4,17H20A1,1 0 0,1 21,18V22A1,1 0 0,1 20,23H4A1,1 0 0,1 3,22V18A1,1 0 0,1 4,17M5,2V6H7V2H5M5,10V14H7V10H5M5,18V22H7V18H5Z"/>
                            </svg>
                            System Status
                        </button>
                        <button class="dashboard-tab" onclick="showDashboardTab('profile')">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                            </svg>
                            User Profile
                        </button>
                    </div>

                    <!-- Tab Contents -->
                    <div id="overviewTab" class="tab-content active">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Active</div>
                                </div>
                                <div class="stat-value" id="balanceDisplay">$0.00</div>
                                <div class="stat-label">Current Balance</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M22,18V22H18V19H15V16H12L9.74,13.74C9.19,13.91 8.61,14 8,14A6,6 0 0,1 2,8A6,6 0 0,1 8,2A6,6 0 0,1 14,8C14,8.61 13.91,9.19 13.74,9.74L22,18M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5ZD"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Ready</div>
                                </div>
                                <div class="stat-value" id="keysGenerated">0</div>
                                <div class="stat-label">Keys Generated</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                                        <svg width="27" height="27" viewBox="0 0 24 24" fill="white">
                                            <path d="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18M16,11L18.78,6H6.14L8.5,11H16Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">3 Online</div>
                                </div>
                                <div class="stat-value">3</div>
                                <div class="stat-label">Products Available</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                                        <svg width="27" height="27" viewBox="0 0 24 24" fill="white">
                                            <path d="M12 2C11.8 2 11.6 2.1 11.4 2.2L3.5 6.6C3.2 6.8 3 7.1 3 7.5V16.5C3 16.9 3.2 17.2 3.5 17.4L11.4 21.8C11.6 21.9 11.8 22 12 22S12.4 21.9 12.6 21.8L13.5 21.3C13.2 20.7 13.1 20 13 19.3V12.6L19 9.2V13C19.7 13 20.4 13.1 21 13.3V7.5C21 7.1 20.8 6.8 20.5 6.6L12.6 2.2C12.4 2.1 12.2 2 12 2M12 4.2L18 7.5L16 8.6L10.1 5.2L12 4.2M8.1 6.3L14 9.8L12 10.9L6 7.5L8.1 6.3M5 9.2L11 12.6V19.3L5 15.9V9.2M21.3 15.8L17.7 19.4L16.1 17.8L15 19L17.8 22L22.6 17.2L21.3 15.8Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Processed</div>
                                </div>
                                <div class="stat-value" id="totalOrders">0</div>
                                <div class="stat-label">Total Orders</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M4,1H20A1,1 0 0,1 21,2V6A1,1 0 0,1 20,7H4A1,1 0 0,1 3,6V2A1,1 0 0,1 4,1M4,9H20A1,1 0 0,1 21,10V14A1,1 0 0,1 20,15H4A1,1 0 0,1 3,14V10A1,1 0 0,1 4,9M4,17H20A1,1 0 0,1 21,18V22A1,1 0 0,1 20,23H4A1,1 0 0,1 3,22V18A1,1 0 0,1 4,17M5,2V6H7V2H5M5,10V14H7V10H5M5,18V22H7V18H5Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Online</div>
                                </div>
                                <div class="stat-value">99.9%</div>
                                <div class="stat-label">Server Uptime</div>
                            </div>

                        </div>

                        <div class="quick-actions">
                            <div class="action-btn" onclick="showContent('productsContent')">
                                <div class="action-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                        <path d="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18M16,11L18.78,6H6.14L8.5,11H16Z"/>
                                    </svg>
                                </div>
                                <div class="action-text">Browse Products</div>
                            </div>
                            
                            <div class="action-btn" onclick="showContent('ordersContent')">
                                <div class="action-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                        <path d="M12 2C11.8 2 11.6 2.1 11.4 2.2L3.5 6.6C3.2 6.8 3 7.1 3 7.5V16.5C3 16.9 3.2 17.2 3.5 17.4L11.4 21.8C11.6 21.9 11.8 22 12 22S12.4 21.9 12.6 21.8L13.5 21.3C13.2 20.7 13.1 20 13 19.3V12.6L19 9.2V13C19.7 13 20.4 13.1 21 13.3V7.5C21 7.1 20.8 6.8 20.5 6.6L12.6 2.2C12.4 2.1 12.2 2 12 2M12 4.2L18 7.5L16 8.6L10.1 5.2L12 4.2M8.1 6.3L14 9.8L12 10.9L6 7.5L8.1 6.3M5 9.2L11 12.6V19.3L5 15.9V9.2M21.3 15.8L17.7 19.4L16.1 17.8L15 19L17.8 22L22.6 17.2L21.3 15.8Z"/>
                                    </svg>
                                </div>
                                <div class="action-text">View Orders</div>
                            </div>
                            
                            <div class="action-btn" onclick="showContent('keysContent')">
                                <div class="action-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                        <path d="M22,18V22H18V19H15V16H12L9.74,13.74C9.19,13.91 8.61,14 8,14A6,6 0 0,1 2,8A6,6 0 0,1 8,2A6,6 0 0,1 14,8C14,8.61 13.91,9.19 13.74,9.74L22,18M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5ZD"/>
                                    </svg>
                                </div>
                                <div class="action-text">Manage Keys</div>
                            </div>
                            
                            <div class="action-btn" onclick="addFunds()">
                                <div class="action-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                        <path d="M17.8 21.2L15 18.2L16.2 17L17.8 18.6L21.4 15L22.6 16.4L17.8 21.2M13 10H10V17H12.1C12.2 16.2 12.6 15.4 13 14.7V10M16 10V12.3C16.6 12.1 17.3 12 18 12C18.3 12 18.7 12 19 12.1V10H16M12.1 19H2V22H13.5C12.8 21.2 12.3 20.1 12.1 19M21 6L11.5 1L2 6V8H21V6M7 17V10H4V17H7Z"/>
                                    </svg>
                                </div>
                                <div class="action-text">Add Funds</div>
                            </div>
                        </div>
                    </div>

                    <div id="serversTab" class="tab-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.9 16,12.4 16,13V16C16,17 15.4,17.6 14.5,17.6H9.5C8.6,17.6 8,17 8,16V13C8,12.4 8.6,11.9 9.2,11.5V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,10V11.5H13.5V10C13.5,8.7 12.8,8.2 12,8.2Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Secure</div>
                                </div>
                                <div class="stat-value">100%</div>
                                <div class="stat-label">Security Status</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Connected</div>
                                </div>
                                <div class="stat-value">Active</div>
                                <div class="stat-label">Firebase Status</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18M16,11L18.78,6H6.14L8.5,11H16Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">All Online</div>
                                </div>
                                <div class="stat-value">3/3</div>
                                <div class="stat-label">Products Online</div>
                            </div>
                        </div>

                        <h3 class="section-title">Server Infrastructure</h3>
                        <div class="server-grid">
                            <div class="server-item">
                                <div class="server-info">
                                    <div class="status-indicator status-online"></div>
                                    <div class="server-name">US-East</div>
                                </div>
                                <div class="ping-indicator ping-excellent">12ms</div>
                            </div>
                            <div class="server-item">
                                <div class="server-info">
                                    <div class="status-indicator status-online"></div>
                                    <div class="server-name">EU-West</div>
                                </div>
                                <div class="ping-indicator ping-excellent">8ms</div>
                            </div>
                            <div class="server-item">
                                <div class="server-info">
                                    <div class="status-indicator status-online"></div>
                                    <div class="server-name">Asia-Pacific</div>
                                </div>
                                <div class="ping-indicator ping-good">45ms</div>
                            </div>
                            <div class="server-item">
                                <div class="server-info">
                                    <div class="status-indicator status-online"></div>
                                    <div class="server-name">CDN Global</div>
                                </div>
                                <div class="ping-indicator ping-excellent">5ms</div>
                            </div>
                            <div class="server-item">
                                <div class="server-info">
                                    <div class="status-indicator status-online"></div>
                                    <div class="server-name">Database</div>
                                </div>
                                <div class="ping-indicator ping-excellent">2ms</div>
                            </div>
                            <div class="server-item">
                                <div class="server-info">
                                    <div class="status-indicator status-online"></div>
                                    <div class="server-name">Auth Service</div>
                                </div>
                                <div class="ping-indicator ping-excellent">1ms</div>
                            </div>
                        </div>

                        <h3 class="section-title">Recent Updates</h3>
                        <div class="activity-timeline">
                            <div class="timeline-item">
                                <div class="timeline-time">15.07.2025</div>
                                <div class="timeline-content">Added a lot of shits</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">15.07.2025</div>
                                <div class="timeline-content">Added API Functions & Administrator Panel</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">15.07.2025</div>
                                <div class="timeline-content">Added Bundles & Pricning Calculations</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">15.07.2025</div>
                                <div class="timeline-content">Added Keys & Balance & Orders Section</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">12.07.2025</div>
                                <div class="timeline-content">Created Reseller Panel</div>
                            </div>
                        </div>
                    </div>

                    <div id="profileTab" class="tab-content">
                        <div class="user-details-card">
                            <h3 class="section-title">Account Information</h3>
                            <div class="user-detail-item">
                                <div class="detail-label">Display Name</div>
                                <div class="detail-value" id="profileName">?</div>
                            </div>
                            <div class="user-detail-item">
                                <div class="detail-label">Email Address</div>
                                <div class="detail-value" id="profileEmail">user@example.com</div>
                            </div>
<div class="user-detail-item">
    <div class="detail-label">User UUID</div>
    <div class="detail-value" id="profileUUID">?</div>
</div>
<div class="user-detail-item">
    <div class="detail-label">Account Type</div>
    <div class="detail-value" id="profileAccountType">Loading...</div>
</div>
<div class="user-detail-item">
    <div class="detail-label">Member Since</div>
    <div class="detail-value" id="profileMemberSince">?</div>
</div>
                            <div class="user-detail-item">
                                <div class="detail-label">Last Login</div>
                                <div class="detail-value" id="lastLogin">Just now</div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M12 20C16.4 20 20 16.4 20 12S16.4 4 12 4 4 7.6 4 12 7.6 20 12 20M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2M12.5 12.8L7.7 15.6L7 14.2L11 11.9V7H12.5V12.8Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Active</div>
                                </div>
<div class="stat-value" id="daysActive">0</div>
<div class="stat-label">Days Active</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Verified</div>
                                </div>
                                <div class="stat-value">98.7%</div>
                                <div class="stat-label">Trust Score</div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-header">
                                    <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <path d="M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z"/>
                                        </svg>
                                    </div>
                                    <div class="status-indicator status-online">Excellent</div>
                                </div>
                                <div class="stat-value">4.9/5</div>
                                <div class="stat-label">Rating</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Products Content -->
            <div id="productsContent" class="content-section">
                <div class="products-layout">
                    <div class="products-sidebar">
                        <div class="products-header">
                            <h2 class="products-title">Products</h2>
                            <div class="products-filter">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                                <select>
                                    <option>All Products</option>
                                    <option>Available</option>
                                    <option>Unavailable</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="products-list" id="productsList">
                            <!-- Products will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="product-details">
                        <div id="productDetailsContent">
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,7H22V9H19V12H17V9H14V7H17V4H19V7M12,2A3,3 0 0,1 15,5V6H20A1,1 0 0,1 21,7V19A1,1 0 0,1 20,20H4A1,1 0 0,1 3,19V7A1,1 0 0,1 4,6H9V5A3,3 0 0,1 12,2M12,4A1,1 0 0,0 11,5V6H13V5A1,1 0 0,0 12,4Z"/>
                                    </svg>
                                </div>
                                <h3>Select a Product</h3>
                                <p>Click on a product from the list to view details and purchase options</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Orders Content -->
            <div id="ordersContent" class="content-section">
                <div class="orders-container">
                    <div class="section-header">
                        <h1 class="section-title-main">Orders</h1>
                        <p class="section-subtitle">Your purchase history and transaction details</p>
                    </div>

                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Product</th>
                                    <th>Type</th>
                                    <th>Keys</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody">
                                <!-- Orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Keys Content -->
            <div id="keysContent" class="content-section">
                <div class="orders-container">
                    <div class="section-header">
                        <h1 class="section-title-main">License Keys</h1>
                        <p class="section-subtitle">Manage your purchased license keys and HWID resets</p>
                    </div>

                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>Product</th>
                                    <th>Type</th>
                                    <th>Purchase Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="keysTableBody">
                                <!-- Keys will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
         <!-- Settings Content -->
            <div id="settingsContent" class="content-section">
                <div class="empty-state">
                    <div class="empty-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                        </svg>
                    </div>
                    <h3>Settings</h3>
                    <p>Account configuration and preferences</p>
                </div>
            </div>

            <!-- Addons Content -->
<div id="addonsContent" class="content-section">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Premium Addons</h1>
                <p class="dashboard-subtitle">Enhance your experience with our professional addons</p>
            </div>
            <div class="last-update">
                <div>Current Balance</div>
                <div class="last-update-time" id="addonsBalanceDisplay">$0.00</div>
            </div>
        </div>

        <!-- Addons Grid -->
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; max-width: 1200px; margin: 0 auto;">
            
            <!-- API Discord Bot -->
            <div class="addon-card">
                <div class="addon-header">
                    <div class="addon-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                            <path d="M22 14H21C21 10.13 17.87 7 14 7H13V5.73C13.6 5.39 14 4.74 14 4C14 2.9 13.11 2 12 2S10 2.9 10 4C10 4.74 10.4 5.39 11 5.73V7H10C6.13 7 3 10.13 3 14H2C1.45 14 1 14.45 1 15V18C1 18.55 1.45 19 2 19H3V20C3 21.11 3.9 22 5 22H19C20.11 22 21 21.11 21 20V19H22C22.55 19 23 18.55 23 18V15C23 14.45 22.55 14 22 14M21 17H19V20H5V17H3V16H5V14C5 11.24 7.24 9 10 9H14C16.76 9 19 11.24 19 14V16H21V17M8.5 13.5L10.86 15.86L9.68 17.04L8.5 15.86L7.32 17.04L6.14 15.86L8.5 13.5M15.5 13.5L17.86 15.86L16.68 17.04L15.5 15.86L14.32 17.04L13.14 15.86L15.5 13.5Z"/>
                        </svg>
                    </div>
                    <div class="addon-info">
                        <h3>API Discord Bot</h3>
                        <p>You & Your staff will be able to manage Keys from Discord bot, configurated with our API licensing system.</p>
                        <div class="addon-price">$49.99</div>
                    </div>
                </div>

                <button class="addon-purchase-btn" onclick="purchaseAddon('discord-bot', 49.99)">
                    Purchase Discord Bot
                </button>
            </div>

            <!-- Rebrand + Panel Plan -->
            <div class="addon-card">
                <div class="addon-header">
                    <div class="addon-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                            <path d="M4,6L8,10V7H16A2,2 0 0,1 18,9A2,2 0 0,1 16,11H8A4,4 0 0,0 4,15A4,4 0 0,0 8,19H16V22L20,18L16,14V17H8A2,2 0 0,1 6,15A2,2 0 0,1 8,13H16A4,4 0 0,0 20,9A4,4 0 0,0 16,5H8V2L4,6Z"/>
                        </svg>
                    </div>
                    <div class="addon-info">
                        <h3>Rebrand + Panel Plan</h3>
                        <p>With our <strong>Cheapest Varp Plans</strong> you can <strong>easily achieve success</strong> and create your own server and start earning <strong>+$2500/month</strong> from your sales!</p>
                    </div>
                </div>
                
                <div class="product-selector">
                    <label>Select Product:</label>
                    <select id="rebrandProductSelect" onchange="updateRebrandPrice()">
                        <option value="">Choose Product</option>
                        <option value="fortnite" data-price="299.99">Rebrand - Fortnite Private - $299.99</option>
                        <option value="perm-spoofer" data-price="249.99">Rebrand - Permanent Spoofer - $249.99</option>
                        <option value="temp-spoofer" data-price="299.99">Rebrand - Temporary Spoofer - $299.99</option>
                    </select>
                    <div class="addon-price" id="rebrandPrice">Select Product</div>
                </div>
    
                
                <button class="addon-purchase-btn" id="rebrandPurchaseBtn" onclick="purchaseRebrand()" disabled>
                    Select Variant!
                </button>
            </div>

            <!-- Only Panel Plan -->
            <div class="addon-card">
                <div class="addon-header">
                    <div class="addon-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                            <path d="M12.67 13.67C12.2 14.13 11.63 14.5 11 14.73V23H8V21H5V18H8V14.72C6.26 14.1 5 12.46 5 10.5C5 8 7 6 9.5 6C9.54 6 9.57 6 9.6 6C9.13 6.95 8.92 8 9.03 9.08C8.44 9.28 8 9.84 8 10.5C8 11.33 8.67 12 9.5 12C9.73 12 9.95 11.94 10.15 11.85C10.79 12.69 11.67 13.32 12.67 13.67M20.73 19.44L17.97 20.6L17.19 18.76L14.43 19.93L13.26 17.16L16.03 16L14.76 13C12.91 13.08 11.11 12.05 10.35 10.25C9.39 7.96 10.47 5.32 12.76 4.35C13 4.25 13.26 4.18 13.5 4.12C12.84 2.87 11.5 2 10 2C7.79 2 6 3.79 6 6C6 6.08 6 6.16 6 6.24C5.7 6.5 5.4 6.82 5.15 7.15C5.06 6.78 5 6.4 5 6C5 3.24 7.24 1 10 1S15 3.24 15 6C15 7.42 14.4 8.67 13.45 9.57C13.87 10 14.5 10.13 15.08 9.88C15.85 9.56 16.2 8.68 15.88 7.92C15.85 7.83 15.8 7.74 15.74 7.66C15.9 7.13 16 6.58 16 6C16 5.37 15.9 4.76 15.72 4.19C17 4.55 18.1 5.44 18.65 6.76C19.41 8.56 18.89 10.57 17.5 11.81L20.73 19.44M13 8.6C13.37 8.19 13.65 7.71 13.82 7.18C13.28 7.45 12.97 8 13 8.6Z"/>
                        </svg>
                    </div>
                    <div class="addon-info">
                        <h3>Only Panel Plan</h3>
                        <p>With our <strong>Cheapest Varp Plans</strong> you can <strong>easily achieve success</strong> and create your own server and start earning <strong>+$2500/month</strong> from your sales!</p>
                    </div>
                </div>
                
                <div class="product-selector">
                    <label>Select Product:</label>
                    <select id="panelProductSelect" onchange="updatePanelPrice()">
                        <option value="">Choose Product</option>
                        <option value="fortnite" data-price="249.99">Fortnite Private - $249.99</option>
                        <option value="perm-spoofer" data-price="199.99">Permanent Spoofer - $199.99</option>
                        <option value="temp-spoofer" data-price="249.99">Temporary Spoofer - $249.99</option>
                    </select>
                    <div class="addon-price" id="panelPrice">Select Product</div>
                </div>

                
                <button class="addon-purchase-btn" id="panelPurchaseBtn" onclick="purchasePanel()" disabled>
                    Select Variant!
                </button>
            </div>

            <!-- Custom Loader -->
            <div class="addon-card">
                <div class="addon-header">
                    <div class="addon-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                            <path d="M16,9H19L14,16M10,9H14L12,17M5,9H8L10,16M15,4H17L19,7H16M11,4H13L14,7H10M7,4H9L8,7H5M6,2L2,8L12,22L22,8L18,2H6Z"/>
                        </svg>
                    </div>
                    <div class="addon-info">
                        <h3>Resell Premium</h3>
                        <p>-50% Discount on All keys!</p>
                        <div class="addon-price">$39.99</div>
                    </div>
                </div>

                
                <button class="addon-purchase-btn" onclick="purchaseAddon('custom-loader', 74.99)">
                    Purchase Custom Loader
                </button>
            </div>

        </div>
    </div>
</div>


            <!-- Balance Content -->
            <div id="balanceContent" class="content-section">
                <div class="dashboard-container">
                    <div class="dashboard-header">
                        <div>
                            <h1 class="dashboard-title">Add Balance</h1>
                            <p class="dashboard-subtitle">Choose payment method and amount to add to your account</p>
                        </div>
                        <div class="last-update">
                            <div>Current Balance</div>
                            <div class="last-update-time" id="currentBalanceDisplay">$0.00</div>
                        </div>
                    </div>

                    <!-- Payment Methods Selection -->
                    <div class="payment-methods-section">
                        <h3 class="section-title">Payment Method</h3>
                        <div class="payment-methods-grid">
                            <div class="payment-method-card" data-method="paypal" onclick="selectBalancePaymentMethod('paypal')">
                                <div class="payment-method-icon">
                                    <svg width="27" height="27" viewBox="0 0 24 24" fill="#0070ba">
                                        <path d="M7.016 19.198h-4.2a.562.562 0 0 1-.555-.65L5.093.584A.692.692 0 0 1 5.776 0h7.222c3.417 0 5.904 2.488 5.846 5.5-.006.25-.027.5-.066.747A6.794 6.794 0 0 1 12.071 12H8.743a.69.69 0 0 0-.682.583l-.325 2.056-.013.083-.692 4.39-.015.087zM19.79 6.142c-.01.087-.01.175-.023.261a7.76 7.76 0 0 1-7.695 6.598H9.007l-.283 1.795-.013.083-.692 4.39-.134.843-.014.088H6.86l-.497 3.15a.562.562 0 0 0 .555.65h3.612c.34 0 .63-.249.683-.585l.952-6.031a.692.692 0 0 1 .683-.584h2.126a6.793 6.793 0 0 0 6.707-5.752c.306-1.95-.466-3.744-1.89-4.906z"/>
                                    </svg>
                                </div>
                                <div class="payment-method-info">
                                    <div class="method-name">PayPal</div>
                                    <div class="method-subtitle">Friends & Family</div>
                                    <div class="method-fee">0% Fees</div>
                                </div>
                            </div>

                            <div class="payment-method-card" data-method="stripe" onclick="selectBalancePaymentMethod('stripe')">
                                <div class="payment-method-icon">
                                    <svg width="26" height="26" viewBox="0 0 24 24" fill="#635bff">
                                        <path d="M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.594-7.305h.003z"/>
                                    </svg>
                                </div>
                                <div class="payment-method-info">
                                    <div class="method-name">Credit / Debit Card</div>
                                    <div class="method-subtitle">Stripe Payment</div>
                                    <div class="method-fee">0% Fees</div>
                                </div>
                            </div>

                            <div class="payment-method-card" data-method="crypto" onclick="selectBalancePaymentMethod('crypto')">
                                <div class="payment-method-icon">
                                    <svg width="30" height="30" viewBox="0 0 24 24" fill="#f7931a">
                                        <path d="M23.638 14.904c-1.602 6.43-8.113 10.34-14.542 8.736C2.67 22.05-1.244 15.525.362 9.105 1.962 2.67 8.475-1.243 14.9.358c6.43 1.605 10.342 8.115 8.738 14.548v-.002zm-6.35-4.613c.24-1.59-.974-2.45-2.64-3.03l.54-2.153-1.315-.33-.525 2.107c-.345-.087-.705-.167-1.064-.25l.526-2.127-1.32-.33-.54 2.165c-.285-.067-.565-.132-.84-.2l-1.815-.45-.35 1.407s.975.225.955.236c.535.136.63.486.615.766l-1.477 5.92c-.075.166-.24.406-.614.314.015.02-.96-.24-.96-.24l-.66 1.51 1.71.426.93.242-.54 2.19 1.32.327.54-2.17c.36.1.705.19 1.05.273l-.51 2.154 1.32.33.545-2.19c2.24.427 3.93.257 4.64-1.774.57-1.637-.03-2.58-1.217-3.196.854-.193 1.5-.76 1.68-1.93h.01zm-3.01 4.22c-.404 1.64-3.157.75-4.05.53l.72-2.9c.896.23 3.757.67 3.33 2.37zm.41-4.24c-.37 1.49-2.662.735-3.405.55l.654-2.64c.744.18 3.137.524 2.75 2.084v.006z"/>
                                    </svg>
                                </div>
                                <div class="payment-method-info">
                                    <div class="method-name">Cryptocurrency</div>
                                    <div class="method-subtitle">BTC / LTC / SOL</div>
                                    <div class="method-fee">5% Fees</div>
                                </div>
                            </div>
                        </div>
                    </div>

                        

                     
<!-- Preset Amounts -->
<div class="preset-amounts">
    <div class="preset-amount-card custom-input-card">
        <div class="custom-amount-input-inline">
            <label>Custom Amount</label>
            <input type="number" id="customBalanceAmount" placeholder="0.00" min="1" step="0.01" onchange="updateBalanceCalculation()">
        </div>
    </div>

    <div class="preset-amount-card popular" onclick="selectPresetAmount(50, 10)">
        <div class="preset-amount-value">$50</div>
        <div class="discount-tag-simple">-10%</div>
        <div class="preset-amount-subtitle">Most popular</div>
    </div>

    <div class="preset-amount-card" onclick="selectPresetAmount(100, 20)">
        <div class="preset-amount-value">$100</div>
        <div class="discount-tag-simple">-20%</div>
        <div class="preset-amount-subtitle">Best value</div>
    </div>
</div>
                

                    <!-- Calculation Summary -->
                    <div class="balance-calculation-summary">
                        <div class="calculation-row">
                            <span>Balance to Add:</span>
                            <span id="balanceToAdd">$0.00</span>
                        </div>
                        <div class="calculation-row">
                            <span>Discount:</span>
                            <span id="discountAmount">-$0.00</span>
                        </div>
                        <div class="calculation-row">
                            <span>Payment Method Fee:</span>
                            <span id="paymentFee">$0.00</span>
                        </div>
                        <div class="calculation-row total">
                            <span>Total to Pay:</span>
                            <span id="totalToPay">$0.00</span>
                        </div>
                    </div>

                    <!-- Purchase Button -->
                    <button class="balance-purchase-btn" id="balancePurchaseBtn" onclick="proceedToBalancePayment()" disabled>
                        Select Payment Method & Amount
                    </button>
                </div>
            </div>
        </div>
    </div>

       <!-- Admin Panel -->
<div id="adminPanel" class="app-container hidden">
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <div class="logo-icon"></div>
                <div class="brand-name">VARP ADMIN</div>
            </div>
        </div>
        
        <div class="nav-section">
            <div class="nav-item active" id="adminUsersNav">
                <div class="nav-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M10,4A4,4 0 0,1 14,8C14,8.91 13.69,9.75 13.18,10.43C12.32,10.75 11.55,11.26 10.91,11.9L10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4M2,20V18C2,15.88 5.31,14.14 9.5,14C9.18,14.78 9,15.62 9,16.5C9,17.79 9.38,19 10,20H2Z"/>
                    </svg>
                </div>
                Users Management
            </div>

                <div class="nav-item" id="adminLicensesNav">
        <div class="nav-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22,18V22H18V19H15V16H12L9.74,13.74C9.19,13.91 8.61,14 8,14A6,6 0 0,1 2,8A6,6 0 0,1 8,2A6,6 0 0,1 14,8C14,8.61 13.91,9.19 13.74,9.74L22,18M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5ZD"/>
            </svg>
        </div>
        Global Licenses
    </div>
        

    <div class="nav-item" id="adminHwidNav">
    <div class="nav-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
        </svg>
    </div>
    HWID Resets
</div>

<div class="nav-item" id="adminPlansNav">
    <div class="nav-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21.14 17.67V17.22C21.14 16 20.2 15 19 15S16.86 16 16.86 17.22V17.67C16.34 17.67 16 18 16 18.56V22.11C16 22.65 16.34 23 16.86 23H21.14C21.66 23 22 22.65 22 22.11V18.55C22 18 21.66 17.67 21.14 17.67M20.29 17.67H17.72V17.22C17.72 16.5 18.31 15.89 19 15.89C19.69 15.89 20.29 16.5 20.29 17.22V17.67M11 5V11H5V13H11V19H13V13H19V11H13V5H11Z"/>
        </svg>
    </div>
    Plans Management
</div>



            <div class="nav-item" id="adminStatusNav">
                <div class="nav-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
                    </svg>
                </div>
                System Status
            </div>
        </div>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">A</div>
                <div class="user-details">
                    <div class="user-name">Administrator</div>
                    <div class="user-email">varp.administrator@op.pl</div>
                </div>
            </div>
            
            <button class="logout-btn" onclick="logout()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16,17V14H9V10H16V7L21,12L16,17M14,2A2,2 0 0,1 16,4V6H14V4H5V20H14V18H16V20A2,2 0 0,1 14,22H5A2,2 0 0,1 3,20V4A2,2 0 0,1 5,2H14Z" />
                </svg>
                Logout
            </button>
        </div>
    </div>
    
    <div class="main-content">
 <!-- Users Management -->
<div id="adminUsersContent" class="content-section active">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Users Management</h1>
                <p class="dashboard-subtitle">Manage user accounts and balances</p>
            </div>
            <div class="last-update">
                <div>Total Users</div>
                <div class="last-update-time" id="totalUsersDisplay">0</div>
            </div>
        </div>

        <div id="usersGrid" class="users-grid">
            <!-- User cards will be populated here -->
        </div>
    </div>
</div>

<div id="adminLicensesContent" class="content-section">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Global Licenses</h1>
                <p class="dashboard-subtitle">Manage license keys inventory across all products</p>
            </div>
            <div class="last-update">
                <div>Total Keys</div>
                <div class="last-update-time" id="totalKeysInStore">0</div>
            </div>
        </div>

        <!-- License Statistics -->
        <div id="licenseStatsGrid" class="stats-grid">
            <!-- Stats will be populated by JavaScript -->
        </div>

        <!-- Add Licenses Section -->
        <div style="background: linear-gradient(145deg, #252544 0%, #1a1a33 100%); border-radius: 20px; padding: 32px; margin-top: 32px; border: 1px solid rgba(102, 126, 234, 0.15);">
            <h3 class="section-title">Add New Licenses</h3>
            
            <!-- Product Selection -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px;">
                <div>
                    <label style="display: block; color: #e2e8f0; font-weight: 600; margin-bottom: 8px;">Product:</label>
                    <select id="licenseProductSelect" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: white;" onchange="updateVariantOptions()">
                        <option value="">Select Product</option>
                        <option value="Fortnite Private">Fortnite Private</option>
                        <option value="Permanent Spoofer">Permanent Spoofer</option>
                        <option value="Temporary Spoofer">Temporary Spoofer</option>
                    </select>
                </div>
                <div>
                    <label style="display: block; color: #e2e8f0; font-weight: 600; margin-bottom: 8px;">Variant:</label>
                    <select id="licenseVariantSelect" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: white;" disabled>
                        <option value="">Select Variant</option>
                    </select>
                </div>
            </div>

            <!-- License Input -->
            <div style="margin-bottom: 24px;">
                <label style="display: block; color: #e2e8f0; font-weight: 600; margin-bottom: 8px;">License Keys (one per line):</label>
                <textarea id="licenseKeysInput" placeholder="Enter license keys, one per line:&#10;KEY1-ABC2-DEF3-GHI4&#10;KEY5-JKL6-MNO7-PQR8&#10;KEY9-STU0-VWX1-YZ23" style="width: 100%; height: 200px; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: white; font-family: 'Courier New', monospace; resize: vertical;"></textarea>
            </div>

            <!-- Add Button -->
            <button onclick="addLicensesToStore()" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; padding: 16px 32px; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                </svg>
                Add Licenses to Store
            </button>
        </div>
    </div>
</div>



       <!-- System Status -->

<div id="adminHwidContent" class="content-section">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">HWID Resets</h1>
                <p class="dashboard-subtitle">Manage hardware ID reset requests</p>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; height: calc(100vh - 200px);">
            <!-- Pending Requests -->
            <div style="background: linear-gradient(145deg, #252544 0%, #1a1a33 100%); border-radius: 20px; padding: 24px; border: 1px solid rgba(102, 126, 234, 0.15); overflow: hidden; display: flex; flex-direction: column;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #ffffff; font-size: 18px; font-weight: 700; margin: 0;">
                        Pending Requests
                    </h3>
                    <div style="background: rgba(245, 158, 11, 0.2); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; padding: 4px 12px;">
                        <span style="color: #f59e0b; font-weight: 600; font-size: 14px;" id="pendingHwidCount">0</span>
                    </div>
                </div>
                <div id="pendingRequestsGrid" style="overflow-y: auto; flex: 1;">
                    <!-- Pending requests will be populated here -->
                </div>
            </div>

            <!-- History -->
            <div style="background: linear-gradient(145deg, #252544 0%, #1a1a33 100%); border-radius: 20px; padding: 24px; border: 1px solid rgba(102, 126, 234, 0.15); overflow: hidden; display: flex; flex-direction: column;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #ffffff; font-size: 18px; font-weight: 700; margin: 0;">
                        Reset History
                    </h3>
                    <div style="background: rgba(102, 126, 234, 0.2); border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 8px; padding: 4px 12px;">
                        <span style="color: #667eea; font-weight: 600; font-size: 14px;" id="historyHwidCount">0</span>
                    </div>
                </div>
                <div id="historyRequestsGrid" style="overflow-y: auto; flex: 1;">
                    <!-- History will be populated here -->
                </div>
            </div>
        </div>
    </div>
</div>


<div id="adminPlansContent" class="content-section">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Plans Management</h1>
                <p class="dashboard-subtitle">Manage user subscription plans and pricing</p>
            </div>
        </div>

        <!-- Plans Management Interface -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; height: calc(100vh - 200px);">
            
            <!-- User Plans Assignment -->
            <div style="background: linear-gradient(145deg, #252544 0%, #1a1a33 100%); border-radius: 20px; padding: 24px; border: 1px solid rgba(102, 126, 234, 0.15); overflow: hidden; display: flex; flex-direction: column;">
                <h3 style="color: #ffffff; font-size: 18px; font-weight: 700; margin-bottom: 20px;">
                    Assign User Plans
                </h3>
                
                <!-- User Selection -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #e2e8f0; font-weight: 600; margin-bottom: 8px;">Select User:</label>
                    <select id="planUserSelect" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: white;">
                        <option value="">Choose User</option>
                    </select>
                </div>
                
                <!-- Plan Selection -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #e2e8f0; font-weight: 600; margin-bottom: 8px;">Plan Type:</label>
                    <select id="planTypeSelect" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: white;">
                        <option value="">Select Plan</option>
                        <option value="reseller">Reseller (-40%)</option>
                        <option value="reseller_premium">Reseller Premium (-50%)</option>
                        <option value="panel_access">Panel Access + Resell (-100%)</option>
                    </select>
                </div>
                
                <!-- Product Selection -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #e2e8f0; font-weight: 600; margin-bottom: 8px;">Product Access:</label>
                    <select id="planProductSelect" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: white;">
                        <option value="every_product">Every Product</option>
                        <option value="Fortnite Private">Fortnite Private</option>
                        <option value="Permanent Spoofer">Permanent Spoofer</option>
                        <option value="Temporary Spoofer">Temporary Spoofer</option>
                    </select>
                </div>
                
                <!-- Assign Button -->
                <button onclick="assignUserPlan()" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; padding: 16px 32px; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-bottom: 20px;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                    </svg>
                    Assign Plan
                </button>
                
                <!-- Current User Plan Display -->
                <div id="currentUserPlan" style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 16px; margin-top: auto;">
                    <h4 style="color: #ffffff; margin-bottom: 8px;">Current Plan:</h4>
                    <p id="currentPlanText" style="color: #64748b; margin: 0;">Select user to view plan</p>
                </div>
            </div>
            
            <!-- Users with Plans List -->
            <div style="background: linear-gradient(145deg, #252544 0%, #1a1a33 100%); border-radius: 20px; padding: 24px; border: 1px solid rgba(102, 126, 234, 0.15); overflow: hidden; display: flex; flex-direction: column;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: #ffffff; font-size: 18px; font-weight: 700; margin: 0;">
                        Active Plans
                    </h3>
                    <div style="background: rgba(102, 126, 234, 0.2); border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 8px; padding: 4px 12px;">
                        <span style="color: #667eea; font-weight: 600; font-size: 14px;" id="totalPlansCount">0</span>
                    </div>
                </div>
                <div id="userPlansList" style="overflow-y: auto; flex: 1;">
                    <!-- Plans will be populated here -->
                </div>
            </div>
        </div>
    </div>
</div>


<div id="adminStatusContent" class="content-section">
    <div class="dashboard-container">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">System Status</h1>
                <p class="dashboard-subtitle">Monitor system health and statistics</p>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                            <path d="M16,4C18.11,4 20,5.89 20,8C20,10.11 18.11,12 16,12C13.89,12 12,10.11 12,8C12,5.89 13.89,4 16,4M16,14C20.42,14 24,15.79 24,18V20H8V18C8,15.79 11.58,14 16,14Z"/>
                        </svg>
                    </div>
                    <div class="status-indicator status-online">Active</div>
                </div>
                <div class="stat-value" id="totalUsersCount">0</div>
                <div class="stat-label">Total Users</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                            <path d="M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2Z"/>
                        </svg>
                    </div>
                    <div class="status-indicator status-online">Online</div>
                </div>
                <div class="stat-value" id="onlineUsersCount">0</div>
                <div class="stat-label">Online Users</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                            <path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/>
                        </svg>
                    </div>
                    <div class="status-indicator status-online">Tracking</div>
                </div>
                <div class="stat-value" id="totalSystemBalance">$0.00</div>
                <div class="stat-label">Total Balance</div>
            </div>
        </div>
    </div>
</div>

    <!-- Firebase SDK v9 -->
    <script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
import { getFirestore, collection, getDocs, doc, updateDoc, deleteDoc, setDoc, getDoc, onSnapshot, query, where } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

const _0x1a2b = ['YUl6YVN5QlNRTmRISCIsImF1dGhEb21haW4=', 'cHJvamVjdElk'];
function decodeConfig() {
    return {
        apiKey: atob(_0x1a2b[0]),
        authDomain: atob(_0x1a2b[1]),
        // ... reszta konfiguracji
    };
}

document.body.style.visibility = 'hidden';

// Po weryfikacji poka≈º zawarto≈õƒá
setTimeout(() => {
    if (isLegitimateUser()) {
        document.body.style.visibility = 'visible';
    }
}, 1000);

function isLegitimateUser() {
    // Sprawd≈∫ r√≥≈ºne parametry
    return window.screen.width > 0 && 
           window.screen.height > 0 && 
           navigator.plugins.length > 0;
}


(function() {
    // Sprawd≈∫ czy strona jest ≈Çadowana w iframe (potencjalne narzƒôdzie scrapujƒÖce)
    if (window.top !== window.self) {
        window.top.location = window.self.location;
    }
    
    // Sprawd≈∫ User-Agent
    const suspiciousAgents = ['wget', 'curl', 'bot', 'scraper', 'spider'];
    const userAgent = navigator.userAgent.toLowerCase();
    
    if (suspiciousAgents.some(agent => userAgent.includes(agent))) {
        document.body.innerHTML = '<h1>Access Denied</h1>';
        return;
    }
})();

(function() {
    // Sprawd≈∫ czy strona jest ≈Çadowana bezpo≈õrednio
    if (document.referrer && !document.referrer.includes(window.location.hostname)) {
        // Potencjalne narzƒôdzie zewnƒôtrzne
        window.location.href = 'about:blank';
    }
    
})();

async function loadProductsSecurely() {
    try {
        // Zamiast mieƒá produkty w kodzie, pobieraj z Firebase
        const productsRef = collection(db, 'products');
        const snapshot = await getDocs(productsRef);
        
        const products = [];
        snapshot.forEach(doc => {
            products.push({ id: doc.id, ...doc.data() });
        });
        
        return products;
    } catch (error) {
        console.error('Error loading products:', error);
        return [];
    }
}

// Dodaj na poczƒÖtku <script>
(function() {
    let devtools = {
        open: false,
        orientation: null
    };
    
    setInterval(function() {
        if (window.outerHeight - window.innerHeight > 200 || 
            window.outerWidth - window.innerWidth > 200) {
            if (!devtools.open) {
                devtools.open = true;
                // Przekieruj lub ukryj zawarto≈õƒá
                document.body.innerHTML = '<h1>Developer tools detected!</h1>';
            }
        } else {
            devtools.open = false;
        }
    }, 500);
})();




        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBSQNdHH9XAfHyHwWI8iFS2CdsTjv0NMoo",
            authDomain: "authentication-website-c7ab3.firebaseapp.com",
            projectId: "authentication-website-c7ab3",
            storageBucket: "authentication-website-c7ab3.firebasestorage.app",
            messagingSenderId: "380309135971",
            appId: "1:380309135971:web:6e5d75a22f06ff310dce56",
            measurementId: "G-SSKDR565XT"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        // Global variables
let currentUser = null;
let selectedProduct = null;
let selectedPaymentMethod = 'crypto';
let cart = {};
let userBalance = 0;
let currentDashboardTab = 'overview';

// <<<--- DODAJ TU NOWE ZMIENNE --->>>
// Balance Management Variables
let selectedBalancePaymentMethod = null;
let selectedBalanceAmount = 0;
let selectedDiscount = 0;



async function initializeLicenseStore() {
    try {
        // Sprawd≈∫ czy magazyn ju≈º istnieje
        const storeRef = doc(db, 'licenseStore', 'products');
        const storeSnap = await getDoc(storeRef);
        
        if (!storeSnap.exists()) {
            // Utw√≥rz magazyn licencji
            const licenseStore = {
            
                
            };
            
            await setDoc(storeRef, licenseStore);
            console.log('License store initialized');
        }
    } catch (error) {
        console.error('Error initializing license store:', error);
    }
}

// Dodaj po funkcjach Firebase
async function allocateLicense(productName, variantName, userEmail) {
    try {
        const storeRef = doc(db, 'licenseStore', 'products');
        const storeSnap = await getDoc(storeRef);
        
        if (!storeSnap.exists()) {
            throw new Error('License store not found');
        }
        
        const storeData = storeSnap.data();
        const productLicenses = storeData[productName]?.[variantName];
        
        if (!productLicenses || productLicenses.length === 0) {
            throw new Error('No licenses available for this product');
        }
        
        // Pobierz pierwszy dostƒôpny klucz
        const allocatedLicense = productLicenses.shift();
        
        // Zaktualizuj magazyn
        await updateDoc(storeRef, {
            [`${productName}.${variantName}`]: productLicenses
        });
        
        // Zapisz przydzielonƒÖ licencjƒô do u≈ºytkownika
        const userRef = doc(db, 'users', userEmail);
        const userSnap = await getDoc(userRef);
        const userData = userSnap.data();
        
const newKey = {
    key: allocatedLicense,
    product: `${productName} - ${variantName}`,
    generatedAt: new Date(),
    expires: calculateExpiration(variantName),
    hwidResetStatus: 'not_requested' // DODAJ Tƒò LINIƒò
};
        
        const updatedKeys = [...(userData.generatedKeys || []), newKey];
        
await updateDoc(userRef, {
    generatedKeys: updatedKeys,
    totalKeys: updatedKeys.length,
    lastKeyGenerated: new Date() // <<<--- DODAJ Tƒò LINIƒò
});

        return allocatedLicense;
        
    } catch (error) {
        console.error('Error allocating license:', error);
        throw error;
    }
}

function calculateExpiration(variantName) {
    if (variantName.includes('Lifetime')) return 'Never';
    if (variantName.includes('1 Day')) {
        const date = new Date();
        date.setDate(date.getDate() + 1);
        return date;
    }
    if (variantName.includes('7 Days')) {
        const date = new Date();
        date.setDate(date.getDate() + 7);
        return date;
    }
    if (variantName.includes('30 Days')) {
        const date = new Date();
        date.setDate(date.getDate() + 30);
        return date;
    }
    return 'Never';
}



        function isAdmin(email) {
            return email === 'varp.administrator@op.pl';
        }

        const defaultBalance = 0;
        
        // Sample data
        const products = [
            {
                id: 1,
                name: "Fortnite Private",
                description: "External & Ready For Tournaments",
                status: "available",
                icon: "üéÆ",
                variants: [
                    { name: "1 Day License", price: 5.99, duration: "1 day" },
                    { name: "7 Days License", price: 19.99, duration: "7 days" },
                    { name: "30 Days License", price: 49.99, duration: "30 days" },
                    { name: "Lifetime License", price: 79.99, duration: "Lifetime" }
                ]
            },
            {
                id: 2,
                name: "Permanent Spoofer",
                description: "Permanent Hardware ID Changer.",
                status: "available",
                icon: "üõ°Ô∏è",
                variants: [
                    { name: "One Time Usage", price: 9.99, duration: "Single Use" },
                    { name: "Lifetime Usage", price: 24.99, duration: "Lifetime" }
                ]
            },
            {
                id: 3,
                name: "Temporary Spoofer",
                description: "Temporary Hardware ID Changer.",
                status: "available",
                icon: "‚è∞",
                variants: [
                    { name: "1 Day License", price: 3.99, duration: "1 day" },
                    { name: "7 Days License", price: 14.99, duration: "7 days" },
                    { name: "30 Days License", price: 29.99, duration: "30 days" },
                    { name: "Lifetime License", price: 59.99, duration: "Lifetime" }
                ]
            }
        ];

const bundles = [
    {
        id: 'beginner-1',
        name: 'Beginner Pack',
        type: 'beginner',
        description: 'For beginners',
        products: [
            { name: 'Fortnite Private - 1 Day (7x)', originalPrice: 41.93 } // 7 √ó 5.99
        ],
        bundlePrice: 37.74,
        discount: 10,
        tag: 'BEGINNER'
    },
    {
        id: 'popular-1',
        name: 'Fortnite Bundle',
        type: 'popular',
        description: 'Perfect for extended gaming',
        products: [
            { name: 'Fortnite Private - 1 Day (15x)', originalPrice: 89.85 } // 15 √ó 5.99
        ],
        bundlePrice: 71.88,
        discount: 20,
        tag: 'POPULAR'
    },
    {
        id: 'limited-1',
        name: 'Spoofer Bundle',
        type: 'limited',
        description: 'Ultimate spoofer package',
        products: [
            { name: 'Permanent Spoofer - One Time (10x)', originalPrice: 99.90 } // 10 √ó 9.99
        ],
        bundlePrice: 74.93,
        discount: 25,
        tag: 'LIMITED',
        timeLeft: '2 days left'
    }
];



        // DOM elements
        const loadingScreen = document.getElementById('loadingScreen');
        const authScreen = document.getElementById('authScreen');
        const mainApp = document.getElementById('mainApp');
        const loginForm = document.getElementById('loginForm');
        const authBtn = document.getElementById('authBtn');
        const userName = document.getElementById('userName');
        const userEmailDisplay = document.getElementById('userEmailDisplay');
        const userAvatar = document.getElementById('userAvatar');
        const productsList = document.getElementById('productsList');
        const productDetailsContent = document.getElementById('productDetailsContent');

    
onAuthStateChanged(auth, async (user) => {
    console.log('Auth state changed:', user);
    loadingScreen.classList.add('hidden');

    if (user) {
        console.log('User logged in:', user.email);
        currentUser = user;
        authScreen.classList.add('hidden');

        if (isAdmin(user.email)) {
            showAdminPanel();
        } else {
            // Poka≈º normalny panel
            mainApp.classList.remove('hidden');
            await initializeUserData();
            
            // <<<--- DODAJ Tƒò LINIƒò TUTAJ --->>>
            await initializeLicenseStore();
            // <<<--- KONIEC DODAWANIA --->>>
            
            updateUserInfo();
            loadProducts();
            loadOrders();
            loadKeys();
            updateBalance();
            updateLastUpdateTime();
        }
    } else {
        console.log('User logged out');
        currentUser = null;
        authScreen.classList.remove('hidden');
        mainApp.classList.add('hidden');
        document.getElementById('adminPanel')?.classList.add('hidden');
    }           
});
        // Login form handler
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            console.log('Attempting login with:', email);
            
            authBtn.innerHTML = '<div class="spinner" style="width: 20px; height: 20px; margin: 0;"></div> Signing in...';
            authBtn.disabled = true;
            hideError();
            
            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                console.log('Login successful:', userCredential.user);
            } catch (error) {
                console.error('Login error:', error);
                showError('authMessage', getErrorMessage(error.code));
                authBtn.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10,17V14H3V10H10V7L15,12L10,17Z" />
                    </svg>
                    Sign In
                `;
                authBtn.disabled = false;
            }
        });

        // Helper functions
        function showError(elementId, message) {
            const el = document.getElementById(elementId);
            if (el) {
                el.textContent = message;
                el.style.display = 'block';
            }
        }

        function hideError() {
            document.querySelectorAll('.error').forEach(el => {
                el.style.display = 'none';
            });
        }

        function getErrorMessage(errorCode) {
            console.log('Error code:', errorCode);
            switch (errorCode) {
                case 'auth/user-not-found':
                    return 'User does not exist';
                case 'auth/wrong-password':
                    return 'Invalid password';
                case 'auth/invalid-email':
                    return 'Invalid email format';
                case 'auth/too-many-requests':
                    return 'Too many login attempts. Try again later';
                case 'auth/invalid-credential':
                    return 'Invalid login credentials';
                case 'auth/user-disabled':
                    return 'Account has been disabled';
                case 'auth/network-request-failed':
                    return 'Network error. Check your connection';
                default:
                    return `Login error: ${errorCode}. Check your credentials and try again`;
            }
        }

async function updateProfileDates() {
    try {
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        
        if (userSnap.exists()) {
            const userData = userSnap.data();
            
            // Update Member Since
            if (userData.joinDate) {
                const joinDate = new Date(userData.joinDate.toDate());
                document.getElementById('profileMemberSince').textContent = joinDate.toLocaleDateString();
                
                // Calculate and update Days Active
                const today = new Date();
                const daysDiff = Math.floor((today - joinDate) / (1000 * 60 * 60 * 24));
                document.getElementById('daysActive').textContent = daysDiff;
            } else {
                document.getElementById('profileMemberSince').textContent = 'Unknown';
                document.getElementById('daysActive').textContent = '0';
            }
        }
    } catch (error) {
        console.error('Error updating profile dates:', error);
        document.getElementById('profileMemberSince').textContent = 'Error';
        document.getElementById('daysActive').textContent = '0';
    }
}

async function updateUserInfo() {
    const email = currentUser.email;
    const username = email.split('@')[0];
    const avatar = username.charAt(0).toUpperCase();

    userName.textContent = username;
    userEmailDisplay.textContent = email;
    userAvatar.textContent = avatar;
    
    // Update profile tab info
    document.getElementById('profileName').textContent = username;
    document.getElementById('profileEmail').textContent = email;
    document.getElementById('profileUUID').textContent = currentUser.uid; // <<<--- DODAJ Tƒò LINIƒò
    document.getElementById('lastLogin').textContent = 'Just now';

    // Update profile dates and plan info
    if (currentUser && !isAdmin(currentUser.email)) {
        await updateProfileDates();
        await updateUserPlanInfo();
    }
}


async function updateUserPlanInfo() {
    try {
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        
        let planType = 'Reseller'; // Default plan
        let planDisplay = 'Reseller (-40%)'; // Default display
        
        if (userSnap.exists()) {
            const userData = userSnap.data();
            
            if (userData.plan && userData.plan.type && planTypes[userData.plan.type]) {
                const planInfo = planTypes[userData.plan.type];
                planType = planInfo.name;
                planDisplay = `${planInfo.name} (-${planInfo.discount}%)`;
            }
        }
        
        // Update sidebar plan display
        const userPlanDisplay = document.getElementById('userPlanDisplay');
        if (userPlanDisplay) {
            userPlanDisplay.textContent = planDisplay;
        }
        
        // Update profile Account Type
        const profileAccountType = document.getElementById('profileAccountType');
        if (profileAccountType) {
            profileAccountType.textContent = planType;
        }
        
    } catch (error) {
        console.error('Error updating user plan info:', error);
        
        // Set defaults on error
        const userPlanDisplay = document.getElementById('userPlanDisplay');
        if (userPlanDisplay) {
            userPlanDisplay.textContent = 'Reseller (-40%)';
        }
        
        const profileAccountType = document.getElementById('profileAccountType');
        if (profileAccountType) {
            profileAccountType.textContent = 'Reseller';
        }
    }
}


        async function updateDashboardStats() {
    if (!currentUser) return;
    
    try {
        // Pobierz dane u≈ºytkownika
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        
        if (userSnap.exists()) {
            const userData = userSnap.data();
            const totalKeys = userData.totalKeys || 0;
            
            // Pobierz liczbƒô zam√≥wie≈Ñ u≈ºytkownika
            const ordersRef = collection(db, 'orders');
            const q = query(ordersRef, where('userEmail', '==', currentUser.email));
            const querySnapshot = await getDocs(q);
            const totalOrders = querySnapshot.size;
            
            // Aktualizuj wy≈õwietlane liczby
            document.getElementById('keysGenerated').textContent = totalKeys;
            document.getElementById('totalOrders').textContent = totalOrders;
        }
    } catch (error) {
        console.error('Error updating dashboard stats:', error);
    }
}

async function updateBalance() {
    document.getElementById('balanceDisplay').textContent = `$${userBalance.toFixed(2)}`;
    
    // Update balance page display if it exists
    const currentBalanceDisplay = document.getElementById('currentBalanceDisplay');
    if (currentBalanceDisplay) {
        currentBalanceDisplay.textContent = `$${userBalance.toFixed(2)}`;
    }
    
    // Zapisz balans do Firebase
    if (currentUser && !isAdmin(currentUser.email)) {
        try {
            const userRef = doc(db, 'users', currentUser.email);
            await updateDoc(userRef, {
                balance: userBalance
            });
        } catch (error) {
            console.error('Error updating balance:', error);
        }

      

    }
    
    // Aktualizuj te≈º dane u≈ºytkownika je≈õli istniejƒÖ
    if (currentUser && realUsersData && realUsersData[currentUser.email]) {
        realUsersData[currentUser.email].balance = userBalance;
    }

    await updateDashboardStats();

}

        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
            
        }

        function loadProducts() {
            productsList.innerHTML = '';
            
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                productItem.onclick = () => selectProduct(product);
                
                productItem.innerHTML = `
                    <div class="product-status-dot ${product.status}"></div>
                    <div class="product-info">
                        <h4>${product.name}</h4>
                        <p>${product.status === 'available' ? 'Available' : 'Unavailable'}</p>
                    </div>
                `;
                
                productsList.appendChild(productItem);
                
            });
        }


        // HWID Reset Functions
window.requestHWIDReset = async function(keyValue) {
    if (!confirm(`Request HWID reset for key: ${keyValue}?`)) return;
    
    try {
        // Znajd≈∫ klucz w danych u≈ºytkownika
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        const userData = userSnap.data();
        const keys = userData.generatedKeys || [];
        
        // Zaktualizuj status klucza
        const updatedKeys = keys.map(key => {
            if (key.key === keyValue) {
                return { ...key, hwidResetStatus: 'pending' };
            }
            return key;
        });
        
        await updateDoc(userRef, { generatedKeys: updatedKeys });
        
        // Dodaj request do kolekcji HWID resets
        const resetRef = doc(collection(db, 'hwidResets'));
        await setDoc(resetRef, {
            keyValue: keyValue,
            userEmail: currentUser.email,
            requestedAt: new Date(),
            status: 'pending',
            productInfo: keys.find(k => k.key === keyValue)?.product || 'Unknown'
        });
        
        loadKeys(); // Od≈õwie≈º listƒô kluczy
        alert('‚úÖ HWID reset request submitted successfully!');
        
    } catch (error) {
        console.error('Error requesting HWID reset:', error);
        alert('‚ùå Error submitting request. Please try again.');
    }
};

window.markAsRead = async function(keyValue) {
    try {
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        const userData = userSnap.data();
        const keys = userData.generatedKeys || [];
        
        // Resetuj status do 'not_requested'
        const updatedKeys = keys.map(key => {
            if (key.key === keyValue) {
                return { ...key, hwidResetStatus: 'not_requested' };
            }
            return key;
        });
        
        await updateDoc(userRef, { generatedKeys: updatedKeys });
        loadKeys(); // Od≈õwie≈º listƒô kluczy
        
    } catch (error) {
        console.error('Error marking as read:', error);
        alert('‚ùå Error updating status. Please try again.');
    }
};

async function loadOrders() {
    const tbody = document.getElementById('ordersTableBody');
    tbody.innerHTML = '';
    
    if (!currentUser) return;
    
    try {
        // Pobierz zam√≥wienia u≈ºytkownika z Firebase
        const ordersRef = collection(db, 'orders');
        const q = query(ordersRef, where('userEmail', '==', currentUser.email));
        const querySnapshot = await getDocs(q);
        
        if (querySnapshot.empty) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td colspan="7" style="text-align: center; color: #64748b; padding: 40px;">
                    No Orders Found :(
                </td>
            `;
            tbody.appendChild(row);
            return;
        }
        
        // <<<--- SORTUJ ZAM√ìWIENIA OD NAJNOWSZYCH --->>>
        const orders = [];
        querySnapshot.forEach((docSnap) => {
            orders.push(docSnap.data());
        });
        
        orders.sort((a, b) => new Date(b.date.toDate()) - new Date(a.date.toDate()));
        
        orders.forEach((order) => {
            // WyciƒÖgnij product i type z pola product
            const productParts = order.product.split(' - ');
            const productName = productParts[0] || order.product;
            const variantType = productParts.length > 1 ? productParts.slice(1).join(' - ') : 'Mixed';
            
            // <<<--- SPRAWD≈π CZY ZAM√ìWIENIE JEST NOWE (OSTATNIE 24H) --->>>
            const orderDate = new Date(order.date.toDate());
            const now = new Date();
            const minutesDiff = (now - orderDate) / (1000 * 60);
            const isNew = minutesDiff <= 15;
            
            const newBadge = isNew ? '<span style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: 700; margin-left: 8px;">NEW</span>' : '';
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><span class="order-id">${order.id}</span>${newBadge}</td>
                <td>${productName}</td>
                <td>${variantType}</td>
                <td>${order.keys}</td>
                <td>$${order.amount.toFixed(2)}</td>
                <td>${orderDate.toLocaleDateString()}</td>
                <td><span class="order-status status-${order.status}">${order.status}</span></td>
            `;
            tbody.appendChild(row);
            
        });

        await updateDashboardStats();

    } catch (error) {
        console.error('Error loading orders:', error);
        const row = document.createElement('tr');
        row.innerHTML = `
            <td colspan="7" style="text-align: center; color: #ef4444; padding: 40px;">
                Error loading orders
            </td>
        `;
        tbody.appendChild(row);
    }
}

async function loadKeys() {
    const tbody = document.getElementById('keysTableBody');
    tbody.innerHTML = '';
    
    if (!currentUser) return;
    
    try {
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        
        if (userSnap.exists()) {
            const userData = userSnap.data();
            let keys = userData.generatedKeys || [];
            
            if (keys.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="5" style="text-align: center; color: #64748b; padding: 40px;">
                        No Licenses Found :(
                    </td>
                `;
                tbody.appendChild(row);
                return;
            }
            
            // <<<--- SORTUJ KLUCZE OD NAJNOWSZYCH --->>>
            keys.sort((a, b) => new Date(b.generatedAt.toDate()) - new Date(a.generatedAt.toDate()));
            
            keys.forEach(keyData => {
                const row = document.createElement('tr');
                
                // WyciƒÖgnij product i type z pola product
                const productParts = keyData.product.split(' - ');
                const productName = productParts[0] || keyData.product;
                const variantType = productParts[1] || 'Unknown';
                
                // <<<--- SPRAWD≈π CZY KLUCZ JEST NOWY (OSTATNIE 24H) --->>>
                const keyDate = new Date(keyData.generatedAt.toDate());
                const now = new Date();
                const minutesDiff = (now - keyDate) / (1000 * 60);
                const isNew = minutesDiff <= 15;
                
                const newBadge = isNew ? '<span style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: 700; margin-left: 8px;">NEW</span>' : '';
                
const resetStatus = keyData.hwidResetStatus || 'not_requested';
let statusHTML = '';
let actionHTML = '';

switch(resetStatus) {
    case 'not_requested':
        statusHTML = '<span style="display: flex; align-items: center; gap: 8px;"><div style="width: 8px; height: 8px; background: #64748b; border-radius: 50%;"></div><span style="color: #64748b;">Not Requested</span></span>';
        actionHTML = `<button class="reset-btn" onclick="requestHWIDReset('${keyData.key}')">Reset HWID</button>`;
        break;
    case 'pending':
        statusHTML = '<span style="display: flex; align-items: center; gap: 8px;"><div style="width: 8px; height: 8px; background: #f59e0b; border-radius: 50%;"></div><span style="color: #f59e0b;">Pending</span></span>';
        actionHTML = '<span style="color: #64748b; font-size: 12px;">Request submitted</span>';
        break;
    case 'completed':
        statusHTML = '<span style="display: flex; align-items: center; gap: 8px;"><div style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%;"></div><span style="color: #22c55e;">Reset Completed</span></span>';
        actionHTML = `<button class="reset-btn" style="background: #22c55e; border-color: #22c55e;" onclick="markAsRead('${keyData.key}')">‚úì</button>`;
        break;
    case 'declined':
        statusHTML = '<span style="display: flex; align-items: center; gap: 8px;"><div style="width: 8px; height: 8px; background: #ef4444; border-radius: 50%;"></div><span style="color: #ef4444;">Reset Declined</span></span>';
        actionHTML = `<button class="reset-btn" style="background: #ef4444; border-color: #ef4444;" onclick="markAsRead('${keyData.key}')">‚úì</button>`;
        break;
}

row.innerHTML = `
    <td>
        <div class="key-value-container">
            <span class="key-value" title="${keyData.key}">${keyData.key}</span>
            <button class="copy-key-btn" onclick="copyKeyToClipboard('${keyData.key}')" title="Copy key">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                </svg>
            </button>
            ${newBadge}
        </div>
    </td>
    <td>${productName}</td>
    <td>${variantType}</td>
    <td>${keyDate.toLocaleDateString()}</td>
    <td>
        <div style="display: flex; align-items: center; gap: 12px;">
            ${statusHTML}
            ${actionHTML}
        </div>
    </td>
`;
                tbody.appendChild(row);
            });

            await updateDashboardStats();
        }
    } catch (error) {
        console.error('Error loading keys:', error);
        const row = document.createElement('tr');
        row.innerHTML = `
            <td colspan="5" style="text-align: center; color: #ef4444; padding: 40px;">
                Error loading keys
            </td>
        `;
        tbody.appendChild(row);
    }
}

        function selectProduct(product) {
            selectedProduct = product;
            
            // Update active state
            document.querySelectorAll('.product-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Reset cart for this product
            cart = {};
            product.variants.forEach(variant => {
                cart[variant.name] = 0;
            });
            
            renderProductDetails();
        }


        function refreshProductPricesAfterPlanChange() {
    // Je≈õli u≈ºytkownik ma wybrany produkt, od≈õwie≈º ceny
    if (selectedProduct) {
        renderProductDetails();
    }
    
}


function getCurrentPlanDisplay() {
    if (!currentUser || !realUsersData || !realUsersData[currentUser.email]) {
        return 'Loading...';
    }
    
    const userData = realUsersData[currentUser.email];
    const plan = userData.plan;
    
    if (plan && plan.type && planTypes[plan.type]) {
        const planInfo = planTypes[plan.type];
        return `${planInfo.name} (-${planInfo.discount}%)`;
    }
    
    return 'Reseller (-40%)'; // Default
}



function getCurrentPlanDiscountOnly() {
    if (!currentUser || !realUsersData || !realUsersData[currentUser.email]) {
        return '-40%';
    }
    
    const userData = realUsersData[currentUser.email];
    const plan = userData.plan;
    
    if (plan && plan.type && planTypes[plan.type]) {
        const planInfo = planTypes[plan.type];
        return `-${planInfo.discount}%`;
    }
    
    return '-40%'; // Default
}


function renderProductDetails() {
    if (!selectedProduct) return;
    
    console.log('renderProductDetails called:', {
        selectedProduct: selectedProduct.name,
        currentUser: currentUser?.email,
        realUsersData: realUsersData ? Object.keys(realUsersData).length + ' users loaded' : 'not loaded'
    });
    
    const product = selectedProduct;
    const statusBadge = product.status === 'available' ? 
        '<span class="product-status-badge available"><div class="product-status-dot available"></div> Available</span>' :
        '<span class="product-status-badge unavailable"><div class="product-status-dot unavailable"></div> Unavailable</span>';
    
    let variantsHTML = '';
    product.variants.forEach(variant => {
        const originalPrice = variant.price;
        const discountedPrice = calculatePlanPrice(originalPrice, currentUser?.email, selectedProduct.name);
        const discount = getUserPlanDiscount(currentUser?.email, selectedProduct.name);
        const hasDiscount = discountedPrice < originalPrice;

        console.log(`Variant ${variant.name}:`, {
            originalPrice,
            discountedPrice,
            discount: discount + '%',
            hasDiscount
        });

        variantsHTML += `
            <div class="variant-item">
                <div class="variant-info">
                    <div class="variant-name">${variant.name}</div>
                    <div class="variant-price-container">
                        ${hasDiscount ? `<div class="original-price">$${originalPrice.toFixed(2)}</div>` : ''}
                        <div class="${hasDiscount ? 'discounted-price' : 'variant-price'}">
                            $${discountedPrice.toFixed(2)} - ${variant.duration}
                        </div>
                    </div>
                </div>
                <div class="variant-controls">
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('${variant.name}', -1)">‚àí</button>
                        <div class="quantity-display">${cart[variant.name] || 0}</div>
                        <button class="quantity-btn" onclick="changeQuantity('${variant.name}', 1)">+</button>
                    </div>
                </div>
            </div>
        `;
    });
    
    // Render bundles
    let bundlesHTML = '';
    bundles.forEach(bundle => {
        const originalTotal = bundle.products.reduce((sum, p) => sum + p.originalPrice, 0);
        const savings = originalTotal - bundle.bundlePrice;
        
        let bundleProductsHTML = '';
        bundle.products.forEach(product => {
            bundleProductsHTML += `
                <div class="bundle-product">
                    <span>${product.name}</span>
                    <span class="bundle-product-price">$${product.originalPrice.toFixed(2)}</span>
                </div>
            `;
        });
        
        bundlesHTML += `
            <div class="bundle-item ${bundle.type}">
                <div class="bundle-header">
                    <div class="bundle-info">
                        <h4>${bundle.name}</h4>
                        <p>${bundle.description}</p>
                    </div>
                    <div class="bundle-tag ${bundle.type}">${bundle.tag}</div>
                </div>
                
                <div class="bundle-products">
                    ${bundleProductsHTML}
                </div>
                
                <div class="bundle-pricing">
                    <div class="bundle-discount">-${bundle.discount}% OFF</div>
                    <div class="bundle-prices">
                        <div class="bundle-original-price">$${originalTotal.toFixed(2)}</div>
                        <div class="bundle-final-price">$${bundle.bundlePrice.toFixed(2)}</div>
                    </div>
                </div>
                
                <div class="bundle-controls">
                    <div class="bundle-quantity-control">
                        <button class="bundle-quantity-btn" onclick="changeBundleQuantity('${bundle.id}', -1)">‚àí</button>
                        <div class="bundle-quantity-display">${cart['bundle_' + bundle.id] || 0}</div>
                        <button class="bundle-quantity-btn" onclick="changeBundleQuantity('${bundle.id}', 1)">+</button>
                    </div>
                    ${bundle.timeLeft ? `<div class="time-remaining">‚è∞ ${bundle.timeLeft}</div>` : ''}
                </div>
            </div>
        `;
    });
    
   const totalData = calculateTotal(); // ZMIE≈É tƒô liniƒô
const total = totalData.total;
const hasItems = totalData.hasItems;
    
    productDetailsContent.innerHTML = `
    <div class="product-header">
        <div class="product-main-info">
            <div class="product-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                    <path d="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18M16,11L18.78,6H6.14L8.5,11H16Z"/>
                </svg>
            </div>
            <div>
                <h1 class="product-title">${product.name}</h1>
                <p class="product-description">${product.description}</p>
            </div>
            ${statusBadge}
        </div>
    </div>
    
    <div style="padding: 24px; overflow-y: auto; max-height: calc(100vh - 140px);">
        <div class="variants-section">
            <h3 class="section-title">Select Variants</h3>
            ${variantsHTML}
        </div>
<!-- BUNDLES HIDDEN
<div class="bundles-section">
    <h3 class="section-title">BUNDLES</h3>
    <div class="bundles-grid">
        ${bundlesHTML}
    </div>
</div>
-->
        
<div class="purchase-section">
    <div class="purchase-info-grid">
        <div class="purchase-info-left">
            <div class="purchase-info-item">
                <div class="purchase-info-label">TOTAL:</div>
                <div class="purchase-info-value">
                    ${total === 0 && hasItems ? 'FREE!' : '$' + total.toFixed(2)}
                </div>
            </div>
            
            <div class="purchase-info-item">
                <div class="purchase-info-label">Account Plan:</div>
                <div class="purchase-info-value">
                    ${getCurrentPlanDiscountOnly()}
                </div>
            </div>
        </div>
        
        <div class="purchase-info-right">
            <button class="purchase-btn" onclick="purchase()" ${
                product.status !== 'available' || 
                !hasItems || 
                (total > userBalance && total > 0) ? 'disabled' : ''
            }>
                ${product.status !== 'available' ? 'Unavailable' : 
                  !hasItems ? 'Select Items' :
                  total > userBalance && total > 0 ? 'Insufficient Balance' :
                  total === 0 ? 'üéâ GET FREE' :
                  'PURCHASE'}
            </button>
        </div>
    </div>
</div>
    
`;
}

        // Global functions for onclick handlers
        window.changeQuantity = function(variantName, change) {
            if (!cart[variantName]) cart[variantName] = 0;
            cart[variantName] = Math.max(0, cart[variantName] + change);
            renderProductDetails();
        };

        window.changeBundleQuantity = function(bundleId, change) {
    const key = 'bundle_' + bundleId;
    if (!cart[key]) cart[key] = 0;
    cart[key] = Math.max(0, cart[key] + change);
    renderProductDetails();
};

        window.selectPaymentMethod = function(method) {
            selectedPaymentMethod = method;
            renderProductDetails();
        };





window.purchase = async function() {
    const totalData = calculateTotal();
if (!selectedProduct || !totalData.hasItems) return;

const total = totalData.total;

    const fee = selectedPaymentMethod === 'paypal' ? total * 0.035 : 
               selectedPaymentMethod === 'stripe' ? total * 0.045 : 0;
    const finalTotal = total + fee;
    
    const purchaseBtn = document.querySelector('.purchase-btn');
    
    if (finalTotal > userBalance) {
        // Animacja b≈Çƒôdu niewystarczajƒÖcego balansu
        purchaseBtn.classList.add('error');
        purchaseBtn.innerHTML = 'Insufficient Balance!';
        
        // Poka≈º modal z informacjƒÖ
        showInsufficientBalanceModal(finalTotal, userBalance);
        
        // Przywr√≥ƒá normalny stan po animacji
        setTimeout(() => {
            purchaseBtn.classList.remove('error');
            renderProductDetails(); // Od≈õwie≈º przycisk
        }, 1200);
        return;
    }
    
    const items = [];
    selectedProduct.variants.forEach(variant => {
        if (cart[variant.name] > 0) {
            items.push({
                name: `${selectedProduct.name} - ${variant.name}`,
                variantName: variant.name, // <<<--- DODAJ Tƒò LINIƒò
                quantity: cart[variant.name],
                price: variant.price
            });
        }
    });
    
    if (items.length === 0) return;
    
    // Deduct from balance
userBalance -= finalTotal;
await updateBalance();
    
    // <<<--- ZASTƒÑP "Add to orders (simulate)" CA≈ÅƒÑ TƒÑ SEKCJƒÑ --->>>
    const generatedKeys = [];

    // Generuj prawdziwe klucze dla ka≈ºdego produktu
    for (const item of items) {
        for (let i = 0; i < item.quantity; i++) {
            try {
                const license = await allocateLicense(selectedProduct.name, item.variantName, currentUser.email);
                generatedKeys.push({
                    key: license,
                    product: item.name
                });
            } catch (error) {
                alert(`‚ùå Error generating license for ${item.name}: ${error.message}`);
                return;
            }
        }
    }

// Zapisz zam√≥wienie do Firebase
const orderId = `ORD-2025-${Date.now()}`;
const orderRef = doc(collection(db, 'orders'));

// Lepsze formatowanie produktu dla orders
let productDisplay;
if (items.length === 1) {
    productDisplay = items[0].name; // np. "Fortnite Private - 1 Day License"
} else {
    // Je≈õli wiele produkt√≥w, poka≈º g≈Ç√≥wny produkt + "Mixed"
    const mainProduct = selectedProduct.name;
    productDisplay = `${mainProduct} - Mixed`;
}

await setDoc(orderRef, {
    id: orderId,
    userEmail: currentUser.email,
    product: productDisplay,
    keys: items.reduce((sum, i) => sum + i.quantity, 0),
    amount: finalTotal,
    date: new Date(),
    status: 'completed',
    generatedKeys: generatedKeys
});

    // Od≈õwie≈º dane
    loadOrders();
    loadKeys();
    // <<<--- KONIEC ZASTƒòPOWANIA --->>>
    
    // Reset cart
    Object.keys(cart).forEach(key => cart[key] = 0);
    renderProductDetails();
    
    alert(`üéâ Purchase completed!\n\nüì¶ Products:\n${items.map(item => `${item.name} x${item.quantity} - $${(item.price * item.quantity).toFixed(2)}`).join('\n')}\n\nüîë Generated Keys:\n${generatedKeys.map(k => `${k.product}: ${k.key}`).join('\n')}\n\nüí∞ Total: $${finalTotal.toFixed(2)}\nüí≥ Method: ${getPaymentMethodName()}`);
};

function showInsufficientBalanceModal(required, current) {
    const modal = document.createElement('div');
    modal.className = 'balance-modal';
    modal.innerHTML = `
        <div class="balance-modal-content">
            <div class="balance-modal-header">
                <h3>Insufficient Balance</h3>
            </div>
            <div class="balance-modal-body">
                <p>You need <strong>$${required.toFixed(2)}</strong> but only have <strong>$${current.toFixed(2)}</strong></p>
                <p>Missing: <strong style="color: #ef4444;">$${(required - current).toFixed(2)}</strong></p>
            </div>
            <div class="balance-modal-actions">
                <button class="modal-btn add-funds" onclick="goToBalancePage(); closeBalanceModal();">Add Funds</button>
                <button class="modal-btn close" onclick="closeBalanceModal();">Close</button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    
    setTimeout(() => modal.classList.add('show'), 10);
}

window.closeBalanceModal = function() {
    const modal = document.querySelector('.balance-modal');
    if (modal) {
        modal.classList.remove('show');
        setTimeout(() => modal.remove(), 300);
    }
};

        window.resetHWID = function(key) {
            if (confirm(`Are you sure you want to reset HWID for key: ${key}?`)) {
                alert(`üîÑ HWID reset initiated for key: ${key}\n\nThis may take a few moments to process.`);
            }
        };

window.addFunds = function() {
    showContent('balanceContent'); // <<<--- ZMIE≈É Z prompt na redirect
};

        window.showDashboardTab = function(tabName) {
            // Update tab buttons
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Show content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}Tab`).classList.add('active');
            
            currentDashboardTab = tabName;
        };

        function getPaymentMethodName() {
            switch(selectedPaymentMethod) {
                case 'crypto': return 'Crypto (BTC/LTC/SOL)';
                case 'paypal': return 'PayPal (Friends & Family)';
                case 'stripe': return 'Stripe (Credit Card)';
                default: return 'Unknown';
            }
        }

function calculateTotal() {
    let total = 0;
    let hasItems = false; // DODAJ tƒô zmiennƒÖ
    
    if (selectedProduct && currentUser) {
        selectedProduct.variants.forEach(variant => {
            const quantity = cart[variant.name] || 0;
            if (quantity > 0) { // DODAJ to sprawdzenie
                hasItems = true;
                const discountedPrice = calculatePlanPrice(variant.price, currentUser.email, selectedProduct.name);
                total += quantity * discountedPrice;
            }
        });
        
        // Sprawd≈∫ te≈º bundles
        bundles.forEach(bundle => {
            const quantity = cart['bundle_' + bundle.id] || 0;
            if (quantity > 0) {
                hasItems = true;
                total += quantity * bundle.bundlePrice;
            }
        });
    }
    
    // NAPRAWKA: Zwr√≥ƒá obiekt z total i informacjƒÖ czy sƒÖ przedmioty
    return { total: total, hasItems: hasItems };
}

        // Navigation
// Navigation
function setupNavigation() {
    document.getElementById('dashboardNav').addEventListener('click', () => showContent('dashboardContent'));
    document.getElementById('balanceNav').addEventListener('click', () => showContent('balanceContent')); // <<<--- DODAJ Tƒò LINIƒò
    document.getElementById('productsNav').addEventListener('click', () => showContent('productsContent'));
    document.getElementById('ordersNav').addEventListener('click', () => showContent('ordersContent'));
    document.getElementById('keysNav').addEventListener('click', () => showContent('keysContent'));
    document.getElementById('settingsNav').addEventListener('click', () => showContent('settingsContent'));
    document.getElementById('logoutBtn').addEventListener('click', logout);
    document.getElementById('addonsNav').addEventListener('click', () => showContent('addonsContent'));
}

window.showContent = function(contentId) {
    // Update navigation
    document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
    document.querySelector(`#${contentId.replace('Content', 'Nav')}`).classList.add('active');
    
    // Show content
    document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
    document.getElementById(contentId).classList.add('active');
    
    // <<<--- DODAJ Tƒò LINIƒò --->>>
    // Initialize balance page if accessed
    if (contentId === 'balanceContent') {
        updateBalanceCalculation();
    }
};

        async function logout() {
            try {
                await signOut(auth);
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        // Auto-update time every minute
        setInterval(updateLastUpdateTime, 60000);

        // Initialize navigation when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            setupNavigation();
        });



let realUsersData = {};
let usersListener = null;


function setupAdminNavigation() {
    document.getElementById('adminUsersNav').addEventListener('click', () => showAdminContent('adminUsersContent'));
    document.getElementById('adminLicensesNav').addEventListener('click', () => showAdminContent('adminLicensesContent'));
    document.getElementById('adminHwidNav').addEventListener('click', () => showAdminContent('adminHwidContent'));
    document.getElementById('adminPlansNav').addEventListener('click', () => showAdminContent('adminPlansContent')); // DODAJ Tƒò LINIƒò
    document.getElementById('adminStatusNav').addEventListener('click', () => showAdminContent('adminStatusContent'));
}
window.showAdminContent = function(contentId) {
    // Update navigation
    document.querySelectorAll('#adminPanel .nav-item').forEach(item => item.classList.remove('active'));
    document.querySelector(`#${contentId.replace('Content', 'Nav')}`).classList.add('active');
    
    // Show content
    document.querySelectorAll('#adminPanel .content-section').forEach(section => section.classList.remove('active'));
    document.getElementById(contentId).classList.add('active');
    
    // Od≈õwie≈º dane licencji gdy otwieramy sekcjƒô licencji
if (contentId === 'adminLicensesContent') {
    loadLicenseStoreData();
}

// DODAJ Tƒò SEKCJƒò:
if (contentId === 'adminHwidContent') {
    loadHwidResets();
}

    if (contentId === 'adminPlansContent') {
        loadUsersForPlans();
        loadUserPlansList();
    }

};


async function loadHwidResets() {
    const pendingGrid = document.getElementById('pendingRequestsGrid');
    const historyGrid = document.getElementById('historyRequestsGrid');
    const pendingCount = document.getElementById('pendingHwidCount');
    const historyCount = document.getElementById('historyHwidCount');
    
    // Loading states
    pendingGrid.innerHTML = '<div style="text-align: center; color: #64748b; padding: 20px;">Loading...</div>';
    historyGrid.innerHTML = '<div style="text-align: center; color: #64748b; padding: 20px;">Loading...</div>';

    try {
        // Load pending requests
        const pendingQuery = query(collection(db, 'hwidResets'), where('status', '==', 'pending'));
        const pendingSnapshot = await getDocs(pendingQuery);
        
        // Load history (completed and declined)
        const historyQuery = query(collection(db, 'hwidResets'), where('status', 'in', ['completed', 'declined']));
        const historySnapshot = await getDocs(historyQuery);
        
        // Update counts
        pendingCount.textContent = pendingSnapshot.size;
        historyCount.textContent = historySnapshot.size;
        
        // Render pending requests
        pendingGrid.innerHTML = '';
        if (pendingSnapshot.empty) {
            pendingGrid.innerHTML = '<div style="text-align: center; color: #64748b; padding: 40px;">No pending requests</div>';
        } else {
            pendingSnapshot.forEach((docSnap) => {
                const resetData = docSnap.data();
                const requestedAt = new Date(resetData.requestedAt.toDate());
                const timePassed = Math.floor((new Date() - requestedAt) / (1000 * 60));
                
                const card = document.createElement('div');
                card.className = 'hwid-reset-card';
                card.innerHTML = `
                    <div class="hwid-reset-header">
                        <div class="hwid-reset-avatar">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                                <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                            </svg>
                        </div>
                        <div class="hwid-reset-info">
                            <h4>HWID Reset Request</h4>
                            <p>${resetData.userEmail}</p>
                        </div>
                    </div>
                    
                    <div class="hwid-reset-details">
                        <div class="hwid-reset-detail">
                            <span class="hwid-reset-detail-label">Key:</span>
                            <span class="hwid-reset-detail-value" style="font-family: 'Courier New', monospace;">${resetData.keyValue}</span>
                        </div>
                        <div class="hwid-reset-detail">
                            <span class="hwid-reset-detail-label">Product:</span>
                            <span class="hwid-reset-detail-value">${resetData.productInfo}</span>
                        </div>
                        <div class="hwid-reset-detail">
                            <span class="hwid-reset-detail-label">Requested:</span>
                            <span class="hwid-reset-detail-value">${timePassed}m ago</span>
                        </div>
                    </div>
                    
                    <div class="hwid-reset-actions">
                        <button class="hwid-action-btn accept" onclick="processHwidReset('${docSnap.id}', '${resetData.keyValue}', '${resetData.userEmail}', 'completed')">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                            </svg>
                            Accept
                        </button>
                        <button class="hwid-action-btn decline" onclick="processHwidReset('${docSnap.id}', '${resetData.keyValue}', '${resetData.userEmail}', 'declined')">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                            </svg>
                            Decline
                        </button>
                    </div>
                `;
                pendingGrid.appendChild(card);
            });
        }
        
        // Render history
        historyGrid.innerHTML = '';
        if (historySnapshot.empty) {
            historyGrid.innerHTML = '<div style="text-align: center; color: #64748b; padding: 40px;">No history found</div>';
        } else {
            const historyItems = [];
            historySnapshot.forEach((docSnap) => {
                historyItems.push(docSnap.data());
            });
            
            // Sort by processedAt (newest first)
            historyItems.sort((a, b) => new Date(b.processedAt.toDate()) - new Date(a.processedAt.toDate()));
            
            historyItems.forEach((resetData) => {
                const processedAt = new Date(resetData.processedAt.toDate());
                const statusColor = resetData.status === 'completed' ? '#22c55e' : '#ef4444';
                const statusText = resetData.status === 'completed' ? 'Completed' : 'Declined';
                const statusIcon = resetData.status === 'completed' ? 
                    '<path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>' :
                    '<path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>';
                
                const card = document.createElement('div');
                card.className = 'hwid-reset-card';
                card.innerHTML = `
                    <div class="hwid-reset-header">
                        <div class="hwid-reset-avatar" style="background: linear-gradient(135deg, ${statusColor} 0%, ${statusColor}dd 100%);">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                                ${statusIcon}
                            </svg>
                        </div>
                        <div class="hwid-reset-info">
                            <h4>${statusText}</h4>
                            <p>${resetData.userEmail}</p>
                        </div>
                    </div>
                    
                    <div class="hwid-reset-details">
                        <div class="hwid-reset-detail">
                            <span class="hwid-reset-detail-label">Key:</span>
                            <span class="hwid-reset-detail-value" style="font-family: 'Courier New', monospace;">${resetData.keyValue}</span>
                        </div>
                        <div class="hwid-reset-detail">
                            <span class="hwid-reset-detail-label">Product:</span>
                            <span class="hwid-reset-detail-value">${resetData.productInfo}</span>
                        </div>
                        <div class="hwid-reset-detail">
                            <span class="hwid-reset-detail-label">Processed:</span>
                            <span class="hwid-reset-detail-value">${processedAt.toLocaleDateString()}</span>
                        </div>
                    </div>
                `;
                historyGrid.appendChild(card);
            });
        }
        
    } catch (error) {
        console.error('Error loading HWID resets:', error);
        pendingGrid.innerHTML = '<div style="text-align: center; color: #ef4444; padding: 40px;">Error loading requests</div>';
        historyGrid.innerHTML = '<div style="text-align: center; color: #ef4444; padding: 40px;">Error loading history</div>';
    }
}

window.processHwidReset = async function(resetDocId, keyValue, userEmail, newStatus) {
    const action = newStatus === 'completed' ? 'accept' : 'decline';
    if (!confirm(`${action.charAt(0).toUpperCase() + action.slice(1)} HWID reset for key: ${keyValue}?`)) return;
    
    try {
        // Zaktualizuj status w kolekcji hwidResets
        const resetRef = doc(db, 'hwidResets', resetDocId);
        await updateDoc(resetRef, {
            status: newStatus,
            processedAt: new Date()
        });
        
        // Zaktualizuj status w danych u≈ºytkownika
        const userRef = doc(db, 'users', userEmail);
        const userSnap = await getDoc(userRef);
        const userData = userSnap.data();
        const keys = userData.generatedKeys || [];
        
        const updatedKeys = keys.map(key => {
            if (key.key === keyValue) {
                return { ...key, hwidResetStatus: newStatus };
            }
            return key;
        });
        
        await updateDoc(userRef, { generatedKeys: updatedKeys });
        
        // Od≈õwie≈º listƒô request√≥w
        loadHwidResets();
        
        alert(`‚úÖ HWID reset request ${newStatus} successfully!`);
        
    } catch (error) {
        console.error('Error processing HWID reset:', error);
        alert('‚ùå Error processing request. Please try again.');
    }
};


async function showAdminPanel() {
    document.getElementById('adminPanel').classList.remove('hidden');
    setupAdminNavigation();
await loadRealUsersData();
await loadLicenseStoreData();
await loadHwidResets(); // DODAJ Tƒò LINIƒò
    
    // DODAJ Tƒò LINIƒò:
    showAdminContent('adminUsersContent'); // Poka≈º Users Management jako domy≈õlne
}

async function loadRealUsersData() {
    const usersGrid = document.getElementById('usersGrid');
    usersGrid.innerHTML = `
        <div class="loading-users">
            <div class="spinner"></div>
            <h3>Loading Users...</h3>
            <p>Fetching user data from Firebase</p>
        </div>
    `;

    try {
        // S≈Çuchacz w czasie rzeczywistym dla kolekcji users
        usersListener = onSnapshot(collection(db, 'users'), (snapshot) => {
            realUsersData = {};
            snapshot.forEach((doc) => {
                realUsersData[doc.id] = doc.data();
            });
            renderUsersGrid();
            updateAdminStats();
            
            // NAPRAWKA: Od≈õwie≈º ceny dla aktualnego u≈ºytkownika
            if (currentUser && realUsersData[currentUser.email]) {
                console.log('Refreshing prices for user:', currentUser.email);
                console.log('User plan updated:', realUsersData[currentUser.email].plan);
                
                // Od≈õwie≈º informacje o planie u≈ºytkownika
                updateUserPlanInfo();
                
                // Od≈õwie≈º ceny produkt√≥w je≈õli u≈ºytkownik ma wybrany produkt
                if (selectedProduct) {
                    console.log('Re-rendering product details with new plan');
                    renderProductDetails();
                }
            }
        });
    } catch (error) {
        console.error('Error loading users:', error);
        usersGrid.innerHTML = `
            <div class="loading-users">
                <h3>Error Loading Users</h3>
                <p>Unable to fetch user data from Firebase</p>
            </div>
        `;
    }
}


function renderUsersGrid() {
    const usersGrid = document.getElementById('usersGrid');
    
    if (Object.keys(realUsersData).length === 0) {
        usersGrid.innerHTML = `
            <div class="loading-users">
                <div class="empty-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16,4C18.11,4 20,5.89 20,8C20,10.11 18.11,12 16,12C13.89,12 12,10.11 12,8C12,5.89 13.89,4 16,4M16,14C20.42,14 24,15.79 24,18V20H8V18C8,15.79 11.58,14 16,14Z"/>
                    </svg>
                </div>
                <h3>No Users Found</h3>
                <p>No user accounts have been created yet</p>
            </div>
        `;
        return;
    }

    usersGrid.innerHTML = '';
    
    Object.entries(realUsersData).forEach(([email, userData]) => {
        const userCard = document.createElement('div');
        userCard.className = 'user-card';
        
        const avatar = email.charAt(0).toUpperCase();
        const isOnline = userData.isOnline || false;
        const balance = userData.balance || 0;
        const joinDate = userData.joinDate ? new Date(userData.joinDate.toDate()).toLocaleDateString() : 'Unknown';
        const lastLogin = userData.lastLogin ? new Date(userData.lastLogin.toDate()).toLocaleString() : 'Never';
        const totalKeys = userData.totalKeys || 0;
        const lastKeyGenerated = userData.lastKeyGenerated ? new Date(userData.lastKeyGenerated.toDate()).toLocaleDateString() : 'Never';
        
        userCard.innerHTML = `
            <div class="user-card-header">
                <div class="user-card-avatar">
                    ${avatar}
                    <div class="${isOnline ? 'user-online-indicator' : 'user-offline-indicator'}"></div>
                </div>
                <div class="user-card-info">
                    <h3>${email.split('@')[0]}</h3>
                    <p>${email}</p>
                </div>
            </div>
            
            <div class="user-card-stats">
                <div class="user-stat">
                    <div class="user-stat-value">$${balance.toFixed(2)}</div>
                    <div class="user-stat-label">Balance</div>
                </div>
                <div class="user-stat">
                    <div class="user-stat-value">${totalKeys}</div>
                    <div class="user-stat-label">Total Keys</div>
                </div>
            </div>
            
            <div class="user-card-details">
                <div class="user-detail-row">
                    <span class="user-detail-label">Joined</span>
                    <span class="user-detail-value">${joinDate}</span>
                </div>
                <div class="user-detail-row">
                    <span class="user-detail-label">Last Login</span>
                    <span class="user-detail-value">${lastLogin}</span>
                </div>
                <div class="user-detail-row">
                    <span class="user-detail-label">Last Key</span>
                    <span class="user-detail-value">${lastKeyGenerated}</span>
                </div>
                <div class="user-detail-row">
                    <span class="user-detail-label">Status</span>
                    <span class="user-detail-value">
                        <span class="status-indicator ${isOnline ? 'status-online' : 'status-offline'}">
                            ${isOnline ? 'Online' : 'Offline'}
                        </span>
                    </span>
                </div>
            </div>
            
            <div class="user-card-actions">
                <button class="user-action-btn balance" onclick="addBalanceToUser('${email}')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                    </svg>
                    Add Balance
                </button>
                <button class="user-action-btn view" onclick="viewUserKeys('${email}')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                    </svg>
                    View Keys
                </button>
                <button class="user-action-btn delete" onclick="deleteUser('${email}')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                    </svg>
                    Delete
                </button>
            </div>
        `;
        
        usersGrid.appendChild(userCard);
    });
}

function updateAdminStats() {
    const totalUsers = Object.keys(realUsersData).length;
    const onlineUsers = Object.values(realUsersData).filter(user => user.isOnline).length;
    const totalBalance = Object.values(realUsersData).reduce((sum, user) => sum + (user.balance || 0), 0);
    
    document.getElementById('totalUsersCount').textContent = totalUsers;
    document.getElementById('onlineUsersCount').textContent = onlineUsers;
    document.getElementById('totalSystemBalance').textContent = `$${totalBalance.toFixed(2)}`;
    document.getElementById('totalUsersDisplay').textContent = totalUsers;
}



window.addBalanceToUser = async function(email) {
    showBalanceManagementModal(email);
};

function showBalanceManagementModal(email) {
    const currentBalance = realUsersData[email]?.balance || 0;
    
    const modal = document.createElement('div');
    modal.className = 'admin-modal';
    modal.innerHTML = `
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3>üí∞ Manage Balance</h3>
                <p>User: <strong>${email}</strong></p>
                <p>Current Balance: <strong>$${currentBalance.toFixed(2)}</strong></p>
            </div>
            <div class="admin-modal-body">
                <div class="balance-input-group">
                    <label>Amount:</label>
                    <input type="number" id="balanceAmount" placeholder="0.00" min="0" step="0.01">
                </div>
                <div class="balance-actions">
                    <button class="balance-action-btn add" onclick="updateUserBalance('${email}', 'add')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                        </svg>
                        Add Balance
                    </button>
                    <button class="balance-action-btn subtract" onclick="updateUserBalance('${email}', 'subtract')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,13H5V11H19V13Z"/>
                        </svg>
                        Subtract Balance
                    </button>
                </div>
            </div>
            <div class="admin-modal-footer">
                <button class="modal-btn close" onclick="closeAdminModal()">Close</button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    
    setTimeout(() => modal.classList.add('show'), 10);
    document.getElementById('balanceAmount').focus();
}

window.updateUserBalance = async function(email, action) {
    const amount = parseFloat(document.getElementById('balanceAmount').value);
    if (!amount || amount <= 0) {
        alert('Please enter a valid amount');
        return;
    }
    
    try {
        const userRef = doc(db, 'users', email);
        const currentBalance = realUsersData[email]?.balance || 0;
        
        let newBalance;
        if (action === 'add') {
            newBalance = currentBalance + amount;
        } else {
            newBalance = Math.max(0, currentBalance - amount); // Nie pozw√≥l na ujemny balans
        }
        
        await updateDoc(userRef, {
            balance: newBalance
        });
        
        closeAdminModal();
        alert(`‚úÖ Successfully ${action === 'add' ? 'added' : 'subtracted'} $${amount.toFixed(2)} ${action === 'add' ? 'to' : 'from'} ${email}'s balance`);
    } catch (error) {
        console.error('Error updating balance:', error);
        alert('‚ùå Error updating balance. Please try again.');
    }
};

window.closeAdminModal = function() {
    const modal = document.querySelector('.admin-modal');
    if (modal) {
        modal.classList.remove('show');
        setTimeout(() => modal.remove(), 300);
    }
};



window.deleteUser = async function(email) {
    if (confirm(`‚ö†Ô∏è Are you sure you want to delete user: ${email}?\n\nThis action cannot be undone!`)) {
        try {
            await deleteDoc(doc(db, 'users', email));
            alert(`‚úÖ User ${email} has been deleted successfully.`);
        } catch (error) {
            console.error('Error deleting user:', error);
            alert('‚ùå Error deleting user. Please try again.');
        }
    }
};

window.viewUserKeys = function(email) {
    const userData = realUsersData[email];
    const keys = userData?.generatedKeys || [];
    
    if (keys.length === 0) {
        alert(`No keys generated by ${email}`);
        return;
    }
    
    let keysText = `üîë Generated Keys for ${email}:\n\n`;
    keys.forEach((key, index) => {
        const productParts = key.product.split(' - ');
        const productName = productParts[0] || key.product;
        const variantType = productParts[1] || 'Unknown';
        
        keysText += `${index + 1}. ${key.key}\n   Product: ${productName}\n   Type: ${variantType}\n   Date: ${new Date(key.generatedAt.toDate()).toLocaleString()}\n\n`;
    });
    
    alert(keysText);
};


// Aktualizuj funkcjƒô initializeUserData aby zapisywaƒá do Firebase
async function initializeUserData() {
    try {
        const userRef = doc(db, 'users', currentUser.email);
        const userSnap = await getDoc(userRef);
        
        if (userSnap.exists()) {
            const userData = userSnap.data();
            userBalance = userData.balance || 0;
            
            // NAPRAWKA: Zapisz dane u≈ºytkownika do realUsersData natychmiast
            if (!realUsersData) {
                realUsersData = {};
            }
            realUsersData[currentUser.email] = userData;
            
            console.log('User data loaded:', userData);
            console.log('User plan:', userData.plan);
            
            // Update online status and last login
            await updateDoc(userRef, {
                isOnline: true,
                lastLogin: new Date()
            });

            await updateDashboardStats();
            await updateUserPlanInfo();
            
        } else {
            // New user - create document with default Reseller plan
            userBalance = 0;
            const newUserData = {
                balance: 0,
                joinDate: new Date(),
                lastLogin: new Date(),
                isOnline: true,
                totalKeys: 0,
                generatedKeys: [],
                plan: {
                    type: 'reseller',
                    product: 'every_product',
                    assignedAt: new Date()
                }
            };
            
            await setDoc(userRef, newUserData);
            
            // NAPRAWKA: Zapisz dane nowego u≈ºytkownika do realUsersData
            if (!realUsersData) {
                realUsersData = {};
            }
            realUsersData[currentUser.email] = newUserData;
            
            console.log('New user created with default plan');
        }
        
        // Wymu≈õ od≈õwie≈ºenie cen po za≈Çadowaniu danych
        setTimeout(() => {
            if (selectedProduct) {
                console.log('Refreshing product details after user data load');
                renderProductDetails();
            }
        }, 500);
        
    } catch (error) {
        console.error('Error initializing user data:', error);
        userBalance = 0;
    }
}


// Zaktualizuj status offline przy wylogowaniu
const originalLogout = logout;
logout = async function() {
    if (currentUser && !isAdmin(currentUser.email)) {
        try {
            const userRef = doc(db, 'users', currentUser.email);
            await updateDoc(userRef, {
                isOnline: false
            });
        } catch (error) {
            console.error('Error updating offline status:', error);
        }
    }
    
    // Zatrzymaj listener u≈ºytkownik√≥w je≈õli istnieje
    if (usersListener) {
        usersListener();
        usersListener = null;
    }
    
    await originalLogout();
};


// <<<--- DODAJ WSZYSTKIE TE FUNKCJE TUTAJ --->>>

// Balance Payment Method Selection
window.selectBalancePaymentMethod = function(method) {
    selectedBalancePaymentMethod = method;
    
    // Update UI
    document.querySelectorAll('.payment-method-card').forEach(card => {
        card.classList.remove('selected');
    });
    document.querySelector(`[data-method="${method}"]`).classList.add('selected');
    
    updateBalanceCalculation();
};

// Preset Amount Selection
window.selectPresetAmount = function(amount, discount) {
    selectedBalanceAmount = amount;
    selectedDiscount = discount;
    
    // Update custom input
    document.getElementById('customBalanceAmount').value = amount;
    
    // Update UI
    document.querySelectorAll('.preset-amount-card').forEach(card => {
        card.classList.remove('selected');
    });
    event.currentTarget.classList.add('selected');
    
    updateBalanceCalculation();
};


window.updateBalanceCalculation = function() {
    const customAmount = parseFloat(document.getElementById('customBalanceAmount')?.value || 0) || 0;
    
    // If custom amount is entered, clear preset selection
    if (customAmount > 0 && customAmount !== selectedBalanceAmount) {
        selectedBalanceAmount = customAmount;
        selectedDiscount = 0;
        document.querySelectorAll('.preset-amount-card').forEach(card => {
            card.classList.remove('selected');
        });
    }
    
    const discountAmount = (selectedBalanceAmount * selectedDiscount) / 100;
    const subtotal = selectedBalanceAmount - discountAmount;
    const fee = selectedBalancePaymentMethod === 'crypto' ? subtotal * 0.05 : 0;
    const total = subtotal + fee;
    
    // Update UI
    document.getElementById('balanceToAdd').textContent = `$${selectedBalanceAmount.toFixed(2)}`;
    document.getElementById('discountAmount').textContent = `-$${discountAmount.toFixed(2)}`;
    document.getElementById('paymentFee').textContent = `$${fee.toFixed(2)}`;
    document.getElementById('totalToPay').textContent = `$${total.toFixed(2)}`;
    
    // Update button state
    const purchaseBtn = document.getElementById('balancePurchaseBtn');
    if (selectedBalancePaymentMethod && selectedBalanceAmount > 0) {
        purchaseBtn.disabled = false;
        purchaseBtn.textContent = `Add $${selectedBalanceAmount.toFixed(2)} Balance`;
    } else {
        purchaseBtn.disabled = true;
        purchaseBtn.textContent = 'Select Payment Method & Amount';
    }
    
    // Update current balance display
    document.getElementById('currentBalanceDisplay').textContent = `$${userBalance.toFixed(2)}`;

    
};




// Funkcje zarzƒÖdzania licencjami
let licenseStoreData = {};

// Wczytaj dane magazynu licencji
async function loadLicenseStoreData() {
    try {
        const storeRef = doc(db, 'licenseStore', 'products');
        const storeSnap = await getDoc(storeRef);
        
        if (storeSnap.exists()) {
            licenseStoreData = storeSnap.data();
        } else {
            licenseStoreData = {};
        }
        
        renderLicenseStats();
    } catch (error) {
        console.error('Error loading license store:', error);
    }
}

// Renderuj statystyki licencji
function renderLicenseStats() {
    const statsGrid = document.getElementById('licenseStatsGrid');
    const totalKeysDisplay = document.getElementById('totalKeysInStore');
    
    let totalKeys = 0;
    let totalUsed = 0; // Mo≈ºna dodaƒá tracking u≈ºytych kluczy w przysz≈Ço≈õci
    
    let statsHTML = '';
    
    Object.entries(licenseStoreData).forEach(([productName, variants]) => {
        Object.entries(variants).forEach(([variantName, keys]) => {
            const available = keys.length;
            totalKeys += available;
            
            const status = available === 0 ? 'Out of Stock' : 
                          available < 5 ? 'Low Stock' : 'In Stock';
            const statusClass = available === 0 ? 'status-offline' : 
                               available < 5 ? 'status-warning' : 'status-online';
            
            statsHTML += `
                <div class="stat-card">
                    <div class="stat-header">
<div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
        <path d="M22,18V22H18V19H15V16H12L9.74,13.74C9.19,13.91 8.61,14 8,14A6,6 0 0,1 2,8A6,6 0 0,1 8,2A6,6 0 0,1 14,8C14,8.61 13.91,9.19 13.74,9.74L22,18M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5ZD"/>
    </svg>
</div>
                        <div class="status-indicator ${statusClass}">${status}</div>
                    </div>
                    <div class="stat-value">${available}</div>
                    <div class="stat-label">${productName}<br><small>${variantName}</small></div>
                </div>
            `;
        });
    });
    
    statsGrid.innerHTML = statsHTML;
    totalKeysDisplay.textContent = totalKeys;
}

// Aktualizuj opcje wariant√≥w na podstawie wybranego produktu
window.updateVariantOptions = function() {
    const productSelect = document.getElementById('licenseProductSelect');
    const variantSelect = document.getElementById('licenseVariantSelect');
    
    const selectedProduct = productSelect.value;
    
    // Wyczy≈õƒá opcje wariant√≥w
    variantSelect.innerHTML = '<option value="">Select Variant</option>';
    
    if (selectedProduct && licenseStoreData[selectedProduct]) {
        variantSelect.disabled = false;
        
Object.keys(licenseStoreData[selectedProduct]).forEach(variantName => {
    const option = document.createElement('option');
    option.value = variantName;
    option.textContent = variantName;
    option.style.padding = '12px 16px';
    option.style.height = '44px';
    option.style.lineHeight = '20px';
    option.style.backgroundColor = '#1a1d29';
    option.style.color = '#ffffff';
    variantSelect.appendChild(option);
});
    } else {
        variantSelect.disabled = true;
    }
};

// Dodaj licencje do magazynu
window.addLicensesToStore = async function() {
    const productSelect = document.getElementById('licenseProductSelect');
    const variantSelect = document.getElementById('licenseVariantSelect');
    const keysInput = document.getElementById('licenseKeysInput');
    
    const productName = productSelect.value;
    const variantName = variantSelect.value;
    const keysText = keysInput.value.trim();
    
    // Walidacja
    if (!productName) {
        alert('Please select a product');
        return;
    }
    
    if (!variantName) {
        alert('Please select a variant');
        return;
    }
    
    if (!keysText) {
        alert('Please enter license keys');
        return;
    }
    
    // Przetw√≥rz klucze (jeden na liniƒô)
    const newKeys = keysText.split('\n')
        .map(key => key.trim())
        .filter(key => key.length > 0);
    
    if (newKeys.length === 0) {
        alert('No valid keys found');
        return;
    }
    
    try {
        const storeRef = doc(db, 'licenseStore', 'products');
        
        // Pobierz aktualne dane
        const storeSnap = await getDoc(storeRef);
        const currentData = storeSnap.exists() ? storeSnap.data() : {};
        
        // Dodaj nowe klucze do istniejƒÖcych
        if (!currentData[productName]) {
            currentData[productName] = {};
        }
        
        if (!currentData[productName][variantName]) {
            currentData[productName][variantName] = [];
        }
        
        const existingKeys = currentData[productName][variantName];
        const updatedKeys = [...existingKeys, ...newKeys];
        
        // Zaktualizuj w Firebase
        await updateDoc(storeRef, {
            [`${productName}.${variantName}`]: updatedKeys
        });
        
        // Wyczy≈õƒá formularz
        keysInput.value = '';
        productSelect.value = '';
        variantSelect.innerHTML = '<option value="">Select Variant</option>';
        variantSelect.disabled = true;
        
        // Od≈õwie≈º dane
        await loadLicenseStoreData();
        
        alert(`‚úÖ Successfully added ${newKeys.length} keys to ${productName} - ${variantName}\n\nTotal keys now: ${updatedKeys.length}`);
        
    } catch (error) {
        console.error('Error adding licenses:', error);
        alert('‚ùå Error adding licenses. Please try again.');
    }
};


// Proceed to Payment
window.proceedToBalancePayment = function() {
    if (!selectedBalancePaymentMethod || selectedBalanceAmount <= 0) return;
    
    const discountAmount = (selectedBalanceAmount * selectedDiscount) / 100;
    const subtotal = selectedBalanceAmount - discountAmount;
    const fee = selectedBalancePaymentMethod === 'crypto' ? subtotal * 0.05 : 0;
    const total = subtotal + fee;
    
    showPaymentInstructions(selectedBalancePaymentMethod, total);
};

// Show Payment Instructions
function showPaymentInstructions(method, amount) {
 const paymentDetails = {
        paypal: {
            title: 'PayPal Payment',
            address: 'scs.harp@paypal.hub.pl',
            instruction: 'Send payment as Friends & Family to:'
        },
        stripe: {
            title: 'Credit/Debit Card Payment',
            address: 'https://buy.stripe.com/fZe5mT3q27xb4qQ9AN',
            instruction: 'Complete payment using this Stripe link:'
        },
        crypto: {
            title: 'Cryptocurrency Payment',
            addresses: {
                'Bitcoin (BTC)': 'bc1qr3r8ts4dssvnxkl6twa7lf06l2czc889xftaqx',
                'Litecoin (LTC)': 'LV99hZkuoB8rxD7MuoYmdcbfzGuYncy9v9',
                'Solana (SOL)': 'DLAFu2wJ7uiWSvdn7ycA8i8DyH8xr3RjP5YnW8NmKamz'
            },
            instruction: 'Send payment to any of these addresses:'
        }
    };
    
    const details = paymentDetails[method];
    
    let addressesHTML = '';
    if (method === 'crypto') {
        Object.entries(details.addresses).forEach(([currency, address]) => {
            addressesHTML += `
                <div class="crypto-payment-row">
                    <div class="crypto-label">${currency}:</div>
                    <div class="crypto-address-box" onclick="copyToClipboard('${address}')" title="Click to copy">
                        ${address}
                    </div>
                </div>
            `;
        });
    } else {
        addressesHTML = `
            <div class="payment-detail-item">
                <span class="payment-detail-label">${method === 'stripe' ? '' : 'Email [ Send in F&F ]'}</span>
                <span class="payment-detail-value" onclick="copyToClipboard('${details.address}')">${details.address}</span>
            </div>
        `;
    }
    
const modal = document.createElement('div');
    modal.className = 'payment-instructions-modal';
    modal.innerHTML = `
        <div class="payment-instructions-content enhanced">
            <div class="payment-instructions-header">
                <h3>${details.title}</h3>
                <div class="payment-amount">$${amount.toFixed(2)}</div>
            </div>
            
            <p style="color: #e2e8f0; margin-bottom: 16px; text-align: center; font-size: 14px;">
                ${details.instruction}
            </p>
            
            <div class="payment-details enhanced">
                ${addressesHTML}
            </div>
            
            <div class="discord-section">
                <p style="color: #64748b; margin-bottom: 12px; font-size: 13px;">
                    After sending payment, submit confirmation on Discord:
                </p>
                <a href="https://discord.gg/varpud" target="_blank" class="discord-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.445.865-.608 1.249a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.249.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/>
                    </svg>
                    Join Discord
                </a>
            </div>
            
            <button class="close-instructions-btn" onclick="closePaymentInstructions()">
                Close
            </button>
        </div>
    `;

    document.body.appendChild(modal);
    setTimeout(() => modal.classList.add('show'), 10);
}

// Copy to Clipboard Function
window.copyToClipboard = function(text) {
    navigator.clipboard.writeText(text).then(() => {
        // Visual feedback
        event.target.style.background = 'rgba(34, 197, 94, 0.3)';
        setTimeout(() => {
            event.target.style.background = 'rgba(102, 126, 234, 0.1)';
        }, 500);
        
        // Show tooltip or alert
        const tooltip = document.createElement('div');
        tooltip.textContent = 'Copied!';
        tooltip.style.cssText = `
            position: fixed;
            top: ${event.clientY - 40}px;
            left: ${event.clientX}px;
            background: #22c55e;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            z-index: 10001;
            pointer-events: none;
        `;
        document.body.appendChild(tooltip);
        setTimeout(() => tooltip.remove(), 2000);
    });
};

// Close Payment Instructions
window.closePaymentInstructions = function() {
    const modal = document.querySelector('.payment-instructions-modal');
    if (modal) {
        modal.classList.remove('show');
        setTimeout(() => modal.remove(), 300);
    }
};

// Function to go to balance page
window.goToBalancePage = function() {
    showContent('balanceContent');
};

// <<<--- KONIEC DODAWANYCH FUNKCJI --->>>


// Addons Functions
window.updateRebrandPrice = function() {
    const select = document.getElementById('rebrandProductSelect');
    const priceDisplay = document.getElementById('rebrandPrice');
    const purchaseBtn = document.getElementById('rebrandPurchaseBtn');
    
    if (select.value) {
        const price = select.options[select.selectedIndex].dataset.price;
        priceDisplay.textContent = `$${price}`;
        purchaseBtn.disabled = false;
        purchaseBtn.textContent = `Purchase for $${price}`;
    } else {
        priceDisplay.textContent = 'Select Product';
        purchaseBtn.disabled = true;
        purchaseBtn.textContent = 'Select Product First';
    }
};

window.updatePanelPrice = function() {
    const select = document.getElementById('panelProductSelect');
    const priceDisplay = document.getElementById('panelPrice');
    const purchaseBtn = document.getElementById('panelPurchaseBtn');
    
    if (select.value) {
        const price = select.options[select.selectedIndex].dataset.price;
        priceDisplay.textContent = `$${price}`;
        purchaseBtn.disabled = false;
        purchaseBtn.textContent = `Purchase for $${price}`;
    } else {
        priceDisplay.textContent = 'Select Product';
        purchaseBtn.disabled = true;
        purchaseBtn.textContent = 'Select Product First';
    }
};

window.purchaseAddon = function(addonType, price) {
    if (price > userBalance) {
        showInsufficientBalanceModal(price, userBalance);
        return;
    }
    
    if (confirm(`Purchase ${addonType} for $${price}?`)) {
        // Purchase logic here
        showAddonPayment(addonType, price);
    }
};

window.purchaseRebrand = function() {
    const select = document.getElementById('rebrandProductSelect');
    if (!select.value) return;
    
    const price = parseFloat(select.options[select.selectedIndex].dataset.price);
    const productName = select.options[select.selectedIndex].textContent;
    
    if (price > userBalance) {
        showInsufficientBalanceModal(price, userBalance);
        return;
    }
    
    if (confirm(`Purchase Rebrand + Panel Plan for ${productName}?`)) {
        showAddonPayment('rebrand', price);
    }
};

window.purchasePanel = function() {
    const select = document.getElementById('panelProductSelect');
    if (!select.value) return;
    
    const price = parseFloat(select.options[select.selectedIndex].dataset.price);
    const productName = select.options[select.selectedIndex].textContent;
    
    if (price > userBalance) {
        showInsufficientBalanceModal(price, userBalance);
        return;
    }
    
    if (confirm(`Purchase Panel Plan for ${productName}?`)) {
        showAddonPayment('panel', price);
    }
};

function showAddonPayment(addonType, price) {
    // Show payment methods modal similar to balance payment
    const modal = document.createElement('div');
    modal.className = 'payment-instructions-modal';
    modal.innerHTML = `
        <div class="payment-instructions-content">
            <div class="payment-instructions-header">
                <h3>üíé Premium Addon Purchase</h3>
                <div class="payment-amount">$${price.toFixed(2)}</div>
            </div>
            
            <p style="color: #e2e8f0; margin-bottom: 16px; text-align: center;">
                Complete your addon purchase via Discord:
            </p>
            
            <div class="discord-section">
                <p style="color: #64748b; margin-bottom: 12px;">
                    Contact our team on Discord to finalize your purchase:
                </p>
                <a href="https://discord.gg/varpud" target="_blank" class="discord-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.445.865-.608 1.249a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.249.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/>
                    </svg>
                    Purchase on Discord
                </a>
            </div>
            
            <button class="close-instructions-btn" onclick="closePaymentInstructions()">
                Close
            </button>
        </div>
    `;
    
    document.body.appendChild(modal);
    setTimeout(() => modal.classList.add('show'), 10);
}

// Update balance display in addons
function updateAddonsBalance() {
    const addonsBalanceDisplay = document.getElementById('addonsBalanceDisplay');
    if (addonsBalanceDisplay) {
        addonsBalanceDisplay.textContent = `$${userBalance.toFixed(2)}`;
    }
}

// Update balance function to include addons
const originalUpdateBalance = updateBalance;
updateBalance = async function() {
    await originalUpdateBalance();
    updateAddonsBalance();
};




// Plans Management System
// Plans Management System - PRZENIE≈ö NA G√ìRƒò
const planTypes = {
    'reseller': { name: 'Reseller', discount: 40, color: '#3b82f6' },
    'reseller_premium': { name: 'Reseller Premium', discount: 50, color: '#8b5cf6' },
    'panel_access': { name: 'Panel Access + Resell', discount: 100, color: '#ef4444' }
};

// Load users into plan selection dropdown
async function loadUsersForPlans() {
    const userSelect = document.getElementById('planUserSelect');
    userSelect.innerHTML = '<option value="">Choose User</option>';
    
    Object.keys(realUsersData).forEach(email => {
        if (email !== 'varp.administrator@op.pl') { // Exclude admin
            const option = document.createElement('option');
            option.value = email;
            option.textContent = `${email.split('@')[0]} (${email})`;
            userSelect.appendChild(option);
        }
    });
}

// Update current plan display when user is selected
document.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
        const userSelect = document.getElementById('planUserSelect');
        if (userSelect) {
            userSelect.addEventListener('change', () => {
                updateCurrentPlanDisplay();
            });
        }
    }, 1000);
});

function updateCurrentPlanDisplay() {
    const userSelect = document.getElementById('planUserSelect');
    const currentPlanText = document.getElementById('currentPlanText');
    
    if (!userSelect || !currentPlanText) return;
    
    const selectedUser = userSelect.value;
    
    if (!selectedUser || !realUsersData[selectedUser]) {
        currentPlanText.textContent = 'Select user to view plan';
        return;
    }
    
    const userData = realUsersData[selectedUser];
    const plan = userData.plan;
    
    if (plan) {
        const planInfo = planTypes[plan.type];
        currentPlanText.innerHTML = `
            <strong style="color: ${planInfo.color};">${planInfo.name}</strong><br>
            <span style="color: #64748b;">Product: ${plan.product}</span><br>
            <span style="color: #64748b;">Discount: -${planInfo.discount}%</span>
        `;
    } else {
        currentPlanText.textContent = 'No plan assigned';
    }
}

// Funkcja do wymuszenia od≈õwie≈ºenia cen
window.forceRefreshPrices = function() {
    console.log('=== FORCING PRICE REFRESH ===');
    
    if (!currentUser) {
        console.log('No current user');
        return;
    }
    
    if (!realUsersData || !realUsersData[currentUser.email]) {
        console.log('User data not loaded, attempting to reload...');
        // Prze≈Çaduj dane u≈ºytkownika
        initializeUserData().then(() => {
            updateUserPlanInfo();
            if (selectedProduct) {
                renderProductDetails();
            }
        });
        return;
    }
    
    const userData = realUsersData[currentUser.email];
    console.log('Current user data:', userData);
    console.log('Current user plan:', userData.plan);
    
    // Wymu≈õ od≈õwie≈ºenie informacji o planie
    updateUserPlanInfo();
    
    // Wymu≈õ ponowne renderowanie produktu
    if (selectedProduct) {
        console.log('Force rendering product details');
        renderProductDetails();
    }
    
    console.log('=== REFRESH COMPLETE ===');
};
// Assign plan to user
window.assignUserPlan = async function() {
    const userSelect = document.getElementById('planUserSelect');
    const planSelect = document.getElementById('planTypeSelect');
    const productSelect = document.getElementById('planProductSelect');
    
    const selectedUser = userSelect.value;
    const selectedPlan = planSelect.value;
    const selectedProduct = productSelect.value;
    
    if (!selectedUser || !selectedPlan || !selectedProduct) {
        alert('Please fill all fields');
        return;
    }
    
    const planInfo = planTypes[selectedPlan];
    const productText = selectedProduct === 'every_product' ? 'Every Product' : selectedProduct;
    
    if (!confirm(`Assign ${planInfo.name} (-${planInfo.discount}%) for ${productText} to ${selectedUser}?`)) {
        return;
    }
    
    try {
        console.log('=== ASSIGNING PLAN ===');
        console.log('User:', selectedUser);
        console.log('Plan:', selectedPlan);
        console.log('Product:', selectedProduct);
        
        const userRef = doc(db, 'users', selectedUser);
        
        // NAPRAWKA: U≈ºyj setDoc z merge zamiast updateDoc
        await setDoc(userRef, {
            plan: {
                type: selectedPlan,
                product: selectedProduct,
                assignedAt: new Date()
            }
        }, { merge: true });
        
        console.log('Plan saved to Firebase');
        
        // NAPRAWKA: Wymu≈õ aktualizacjƒô lokalnych danych
        if (!realUsersData[selectedUser]) {
            realUsersData[selectedUser] = {};
        }
        
        realUsersData[selectedUser].plan = {
            type: selectedPlan,
            product: selectedProduct,
            assignedAt: new Date()
        };
        
        console.log('Plan updated in local data:', realUsersData[selectedUser].plan);
        
        // Clear selections
        userSelect.value = '';
        planSelect.value = '';
        productSelect.value = 'every_product';
        
        // Refresh displays
        updateCurrentPlanDisplay();
        loadUserPlansList();
        
        alert(`‚úÖ Successfully assigned ${planInfo.name} to ${selectedUser}`);
        
        // NAPRAWKA: Je≈õli to aktualny u≈ºytkownik, wymu≈õ pe≈Çne od≈õwie≈ºenie
        if (selectedUser === currentUser?.email) {
            console.log('Plan assigned to current user - forcing immediate refresh');
            
            // Aktualizuj dane u≈ºytkownika natychmiast
            await updateUserPlanInfo();
            
            // Wymu≈õ ponowne renderowanie produkt√≥w
            if (selectedProduct) {
                console.log('Re-rendering products with new plan');
                renderProductDetails();
            }
            
            // Dodatkowo - wymu≈õ prze≈Çadowanie strony po 2 sekundach jako backup
            setTimeout(() => {
                console.log('Forcing page reload to ensure plan takes effect');
                location.reload();
            }, 2000);
        }
        
    } catch (error) {
        console.error('Error assigning plan:', error);
        alert('‚ùå Error assigning plan: ' + error.message);
    }
};

// Load users with plans
async function loadUserPlansList() {
    const plansList = document.getElementById('userPlansList');
    const totalCount = document.getElementById('totalPlansCount');
    
    if (!plansList || !totalCount) return;
    
    plansList.innerHTML = '<div style="text-align: center; color: #64748b; padding: 20px;">Loading...</div>';
    
    const usersWithPlans = Object.entries(realUsersData).filter(([email, data]) => 
        data.plan && email !== 'varp.administrator@op.pl'
    );
    
    totalCount.textContent = usersWithPlans.length;
    
    if (usersWithPlans.length === 0) {
        plansList.innerHTML = '<div style="text-align: center; color: #64748b; padding: 40px;">No plans assigned</div>';
        return;
    }
    
    plansList.innerHTML = '';
    
    usersWithPlans.forEach(([email, userData]) => {
        const plan = userData.plan;
        const planInfo = planTypes[plan.type];
        const assignedDate = plan.assignedAt ? new Date(plan.assignedAt.toDate()).toLocaleDateString() : 'Unknown';
        const productText = plan.product === 'every_product' ? 'Every Product' : plan.product;
        
        const planCard = document.createElement('div');
        planCard.className = 'hwid-reset-card';
        planCard.innerHTML = `
            <div class="hwid-reset-header">
                <div class="hwid-reset-info">
                    <h4>${planInfo.name}</h4>
                    <p>${email}</p>
                </div>
            </div>
            
            <div class="hwid-reset-details">
                <div class="hwid-reset-detail">
                    <span class="hwid-reset-detail-label">Discount:</span>
                    <span class="hwid-reset-detail-value">-${planInfo.discount}%</span>
                </div>
                <div class="hwid-reset-detail">
                    <span class="hwid-reset-detail-label">Product Access:</span>
                    <span class="hwid-reset-detail-value">${productText}</span>
                </div>
                <div class="hwid-reset-detail">
                    <span class="hwid-reset-detail-label">Assigned:</span>
                    <span class="hwid-reset-detail-value">${assignedDate}</span>
                </div>
            </div>
            
            <div class="hwid-reset-actions">
                <button class="hwid-action-btn decline" onclick="removePlanFromUser('${email}')">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                    </svg>
                    Remove Plan
                </button>
            </div>
        `;
        plansList.appendChild(planCard);
    });
}

// Remove plan from user
window.removePlanFromUser = async function(email) {
    if (!confirm(`Remove plan from ${email}?`)) return;
    
    try {
        const userRef = doc(db, 'users', email);
        await updateDoc(userRef, {
            plan: null
        });
        
        loadUserPlansList();
        updateCurrentPlanDisplay();
        
        alert(`‚úÖ Plan removed from ${email}`);
        
    } catch (error) {
        console.error('Error removing plan:', error);
        alert('‚ùå Error removing plan. Please try again.');
    }
};

// Calculate price with plan discount
function calculatePlanPrice(originalPrice, userEmail, productName) {
    if (!userEmail) {
        console.log('No user email provided');
        return originalPrice * 0.6; // Default 40% discount
    }
    
    console.log('=== CALCULATING PRICE ===');
    console.log('Original price:', originalPrice);
    console.log('User email:', userEmail);
    console.log('Product name:', productName);
    
    // Default plan is Reseller (-40%)
    let discount = 40;
    let finalDiscount = 0.40;
    
    // Sprawd≈∫ dane u≈ºytkownika
    if (realUsersData && realUsersData[userEmail]) {
        const userData = realUsersData[userEmail];
        console.log('User data found:', userData);
        console.log('User plan:', userData.plan);
        
        if (userData.plan && userData.plan.type) {
            const planType = userData.plan.type;
            const planProduct = userData.plan.product;
            
            console.log('Plan type:', planType);
            console.log('Plan product:', planProduct);
            console.log('Target product:', productName);
            
            // Sprawd≈∫ czy plan ma zastosowanie do tego produktu
            if (planProduct === 'every_product' || planProduct === productName) {
                const planInfo = planTypes[planType];
                if (planInfo) {
                    discount = planInfo.discount;
                    finalDiscount = discount / 100;
                    console.log('Plan applies! Discount:', discount + '%');
                } else {
                    console.log('Plan type not found in planTypes');
                }
            } else {
                console.log('Plan does not apply to this product');
            }
        } else {
            console.log('No plan found for user, using default 40%');
        }
    } else {
        console.log('User data not found, using default 40%');
        console.log('Available users:', realUsersData ? Object.keys(realUsersData) : 'realUsersData is null');
    }
    
    // Specjalny przypadek: 100% zni≈ºka = GRATIS
    if (finalDiscount >= 1.0) {
        console.log('100% discount - FREE!');
        return 0.00;
    }
    
    const finalPrice = originalPrice * (1 - finalDiscount);
    console.log('Final calculation:', originalPrice, '* (1 -', finalDiscount, ') =', finalPrice);
    console.log('=== END CALCULATION ===');
    
    return finalPrice;
}


function getUserPlanDiscount(userEmail, productName) {
    if (!userEmail) {
        console.log('No user email, returning default 40% discount');
        return 40;
    }
    
    // Default plan is Reseller (-40%)
    let discount = 40;
    
    if (realUsersData && realUsersData[userEmail] && realUsersData[userEmail].plan) {
        const plan = realUsersData[userEmail].plan;
        
        // Check if plan applies to this product
        if (plan.product === 'every_product' || plan.product === productName) {
            const planInfo = planTypes[plan.type];
            if (planInfo) {
                discount = planInfo.discount;
                console.log('User discount:', discount + '%');
            }
        }
    }
    
    return discount;
}


// Debugging tools
window.testPlanSystem = function() {
    console.log('=== TESTING PLAN SYSTEM ===');
    console.log('Current user:', currentUser?.email);
    console.log('Real users data:', realUsersData ? 'LOADED' : 'NOT LOADED');
    
    if (currentUser && realUsersData && realUsersData[currentUser.email]) {
        const userData = realUsersData[currentUser.email];
        console.log('User plan:', userData.plan);
        
        if (userData.plan) {
            const planInfo = planTypes[userData.plan.type];
            console.log('Plan info:', planInfo);
            console.log('Expected discount:', planInfo.discount + '%');
        }
        
        // Test price calculation
        const testPrice = 5.99; // Fortnite Private 1 Day
        const calculatedPrice = calculatePlanPrice(testPrice, currentUser.email, 'Fortnite Private');
        const discount = getUserPlanDiscount(currentUser.email, 'Fortnite Private');
        
        console.log(`Test calculation: $${testPrice} -> $${calculatedPrice.toFixed(2)} (${discount}% off)`);
        console.log('Expected final price:', testPrice * (1 - (planTypes[userData.plan?.type]?.discount || 40) / 100));
    }
    
    console.log('=== END TEST ===');
};


// Debugging function - dodaj przed console.log('VARP Panel initialized successfully');
window.debugUserPlan = async function(userEmail) {
    if (!userEmail && currentUser) {
        userEmail = currentUser.email;
    }
    
    if (!userEmail) {
        console.log('No user email provided');
        return;
    }
    
    console.log('=== DEBUGGING USER PLAN ===');
    console.log('User email:', userEmail);
    
    // Sprawd≈∫ lokalne dane
    console.log('Local realUsersData:', realUsersData);
    console.log('Local user data:', realUsersData ? realUsersData[userEmail] : 'not found');
    
    // Sprawd≈∫ Firebase bezpo≈õrednio
    try {
        const userRef = doc(db, 'users', userEmail);
        const userSnap = await getDoc(userRef);
        
        if (userSnap.exists()) {
            const firebaseData = userSnap.data();
            console.log('Firebase user data:', firebaseData);
            console.log('Firebase plan:', firebaseData.plan);
            
            // Por√≥wnaj z lokalnymi danymi
            if (realUsersData && realUsersData[userEmail]) {
                console.log('Local vs Firebase plan match:', 
                    JSON.stringify(realUsersData[userEmail].plan) === JSON.stringify(firebaseData.plan)
                );
            }
        } else {
            console.log('User not found in Firebase');
        }
    } catch (error) {
        console.error('Error fetching from Firebase:', error);
    }
    
    // Test kalkulacji cen
    const testPrice = 5.99;
    const calculatedPrice = calculatePlanPrice(testPrice, userEmail, 'Fortnite Private');
    console.log('Test price calculation:', testPrice, '->', calculatedPrice);
    
    console.log('=== END DEBUG ===');
};

// Copy Key Function
window.copyKeyToClipboard = function(keyValue) {
    navigator.clipboard.writeText(keyValue).then(() => {
        // Visual feedback - change button color
        const button = event.target.closest('.copy-key-btn');
        const originalStyle = button.style.background;
        
button.style.background = '#6F62C2'; // lub '#32cd32' dla nieco ciemniejszego zielonego
button.style.boxShadow = '0 0 20px rgba(0, 255, 127, 0.6)';
        button.innerHTML = `
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
            </svg>
        `;
        
        // Show tooltip
        const tooltip = document.createElement('div');
        tooltip.textContent = 'Copied!';
        tooltip.style.cssText = `
            position: fixed;
            top: ${event.clientY - 40}px;
            left: ${event.clientX}px;
            background: #22c55e;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            z-index: 10001;
            pointer-events: none;
            font-weight: 600;
        `;
        document.body.appendChild(tooltip);
        
        // Reset button after 2 seconds
        setTimeout(() => {
            button.style.background = originalStyle;
            button.innerHTML = `
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                </svg>
            `;
            tooltip.remove();
        }, 2000);
        
    }).catch(err => {

    });
};


console.log('VARP Panel initialized successfully');
window.logout = logout;
        console.log('VARP Panel initialized successfully');
    </script>
</body>
</html>
